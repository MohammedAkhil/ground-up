"use strict";var Rc=Object.create;var zr=Object.defineProperty;var xc=Object.getOwnPropertyDescriptor;var $c=Object.getOwnPropertyNames;var jc=Object.getPrototypeOf,Pc=Object.prototype.hasOwnProperty;var Yt=(r,t)=>()=>(r&&(t=r(r=0)),t);var it=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),qn=(r,t)=>{for(var n in t)zr(r,n,{get:t[n],enumerable:!0})},ks=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of $c(t))!Pc.call(r,i)&&i!==n&&zr(r,i,{get:()=>t[i],enumerable:!(s=xc(t,i))||s.enumerable});return r};var re=(r,t,n)=>(n=r!=null?Rc(jc(r)):{},ks(t||!r||!r.__esModule?zr(n,"default",{value:r,enumerable:!0}):n,r)),vc=r=>ks(zr({},"__esModule",{value:!0}),r);var Yn=it(oe=>{"use strict";var zs=oe&&oe.__awaiter||function(r,t,n,s){function i(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function b(y){try{h(s.next(y))}catch(O){d(O)}}function p(y){try{h(s.throw(y))}catch(O){d(O)}}function h(y){y.done?c(y.value):i(y.value).then(b,p)}h((s=s.apply(r,t||[])).next())})};Object.defineProperty(oe,"__esModule",{value:!0});oe.HttpError=oe.optimistic=oe.okify=oe.ok=oe.SUCCESS_CODES=oe.handle=void 0;function Hc(r,t){return zs(this,void 0,void 0,function*(){let{status:n,data:s,headers:i}=yield r,c=t[n];if(c)return c(s);if(t.default)return t.default(n,s);throw new Zt(n,s,i)})}oe.handle=Hc;oe.SUCCESS_CODES=[200,201,202,204];function Ws(r){return zs(this,void 0,void 0,function*(){let t=yield r;if(oe.SUCCESS_CODES.some(n=>n==t.status))return t.data;throw new Zt(t.status,t.data,t.headers)})}oe.ok=Ws;function Fs(r){return(...t)=>Ws(r(...t))}oe.okify=Fs;function Gc(r){let t={};return Object.entries(r).forEach(([n,s])=>{t[n]=typeof s=="function"?Fs(s):s}),t}oe.optimistic=Gc;var Zt=class extends Error{constructor(t,n,s){super(`Error: ${t}`),this.status=t,this.data=n,this.headers=s}};oe.HttpError=Zt});var Xn=it(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.joinUrl=pe.stripUndefined=pe.delimited=pe.encode=pe.allowReserved=pe.encodeReserved=void 0;pe.encodeReserved=[encodeURIComponent,encodeURIComponent];pe.allowReserved=[encodeURIComponent,encodeURI];function Qs(r,t=","){let n=(s,i)=>{let c=r[i%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(c).join(t):Object.entries(s).reduce((b,p)=>[...b,...p],[]).map(c).join(t):c(String(s))};return(s,...i)=>s.reduce((c,d,b)=>`${c}${d}${n(i[b],b)}`,"")}pe.encode=Qs;function Xc(r=","){return(t,n=pe.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,i])=>Qs(n,r)`${s}=${i}`).join("&")}pe.delimited=Xc;function eu(r){return r&&JSON.parse(JSON.stringify(r))}pe.stripUndefined=eu;function tu(...r){return r.filter(Boolean).map((t,n)=>n===0?t:t.replace(/^\/+/,"")).map((t,n,s)=>n===s.length-1?t:t.replace(/\/+$/,"")).join("/")}pe.joinUrl=tu});var ea=it(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.space=ce.pipe=ce.form=ce.json=ce.explode=ce.deep=ce.query=void 0;var De=Xn();function ru(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}ce.query=ru;function nu(r,[t,n]=De.encodeReserved){let s=(0,De.encode)([d=>d,t]),i=(0,De.encode)([d=>d,n]),c=(d,b="")=>Object.entries(d).filter(([,p])=>p!==void 0).map(([p,h])=>{let y=Array.isArray(d)?"":p,O=b?s`${b}[${y}]`:p;return typeof h=="object"?c(h,O):i`${O}=${h}`}).join("&");return c(r)}ce.deep=nu;function Vs(r,t=De.encodeReserved){let n=(0,De.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>Array.isArray(i)?i.map(c=>n`${s}=${c}`).join("&"):typeof i=="object"?Vs(i,t):n`${s}=${i}`).join("&")}ce.explode=Vs;function au(r,t=De.encodeReserved){let n=(0,De.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>{let c=JSON.stringify(i);return n`${s}=${c}`}).join("&")}ce.json=au;ce.form=(0,De.delimited)();ce.pipe=(0,De.delimited)("|");ce.space=(0,De.delimited)("%20")});var Hs=it(he=>{"use strict";var su=he&&he.__createBinding||(Object.create?(function(r,t,n,s){s===void 0&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(r,s,i)}):(function(r,t,n,s){s===void 0&&(s=n),r[s]=t[n]})),ou=he&&he.__setModuleDefault||(Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t}),iu=he&&he.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&su(t,r,n);return ou(t,r),t},Jr=he&&he.__awaiter||function(r,t,n,s){function i(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function b(y){try{h(s.next(y))}catch(O){d(O)}}function p(y){try{h(s.throw(y))}catch(O){d(O)}}function h(y){y.done?c(y.value):i(y.value).then(b,p)}h((s=s.apply(r,t||[])).next())})},Hr=he&&he.__rest||function(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(n[s[i]]=r[s[i]]);return n};Object.defineProperty(he,"__esModule",{value:!0});he.runtime=void 0;var cu=iu(ea()),Js=Xn(),uu=Yn();function lu(r){function t(p,h){return Jr(this,void 0,void 0,function*(){let y=yield i(p,h),O;try{O=yield y.text()}catch{}return{status:y.status,headers:y.headers,contentType:y.headers.get("content-type"),data:O}})}function n(p,h={}){return Jr(this,void 0,void 0,function*(){let{status:y,headers:O,contentType:k,data:E}=yield t(p,Object.assign(Object.assign({},h),{headers:Object.assign({Accept:"application/json"},h.headers)}));return(k?k.includes("json"):!1)?{status:y,headers:O,data:E?JSON.parse(E):null}:{status:y,headers:O,data:E}})}function s(p,h={}){return Jr(this,void 0,void 0,function*(){let y=yield i(p,h),O;try{O=yield y.blob()}catch{}return{status:y.status,headers:y.headers,data:O}})}function i(p,h={}){return Jr(this,void 0,void 0,function*(){let y=Object.assign(Object.assign({},r),h),{baseUrl:O,headers:k,fetch:E}=y,_=Hr(y,["baseUrl","headers","fetch"]),R=(0,Js.joinUrl)(O,p);return yield(E||fetch)(R,Object.assign(Object.assign({},_),{headers:(0,Js.stripUndefined)(Object.assign(Object.assign({},r.headers),k))}))})}function c(p){return p?.match(/\bjson\b/i)?p:"application/json"}function d(p){return p?.startsWith("application/x-www-form-urlencoded")?p:"application/x-www-form-urlencoded"}function b(p){return p?.startsWith("multipart/form-data")?p:"multipart/form-data"}return{ok:uu.ok,fetchText:t,fetchJson:n,fetchBlob:s,json(p){var{body:h,headers:y}=p,O=Hr(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},O),h!=null&&{body:JSON.stringify(h)}),{headers:Object.assign(Object.assign({},y),{"Content-Type":c(String(y?.["Content-Type"]))})})},form(p){var{body:h,headers:y}=p,O=Hr(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},O),h!=null&&{body:cu.form(h)}),{headers:Object.assign(Object.assign({},y),{"Content-Type":d(String(y?.["Content-Type"]))})})},multipart(p){var{body:h,headers:y}=p,O=Hr(p,["body","headers"]);if(h==null)return O;let k=new(r.formDataConstructor||O.formDataConstructor||FormData),E=(_,R)=>{typeof R=="string"||R instanceof Blob?k.append(_,R):k.append(_,new Blob([JSON.stringify(R)],{type:"application/json"}))};return Object.entries(h).forEach(([_,R])=>{Array.isArray(R)?R.forEach(j=>E(_,j)):E(_,R)}),Object.assign(Object.assign({},O),{body:k,headers:Object.assign(Object.assign({},y),{"Content-Type":b(String(y?.["Content-Type"]))})})}}}he.runtime=lu});var Xs=it((Gr,Zs)=>{(function(r,t){typeof Gr=="object"&&typeof Zs<"u"?t(Gr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Gr,(function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=s();function c(e){return typeof e=="object"&&e!==null||typeof e=="function"}let d=n,b=Promise,p=Promise.prototype.then,h=Promise.resolve.bind(b),y=Promise.reject.bind(b);function O(e){return new b(e)}function k(e){return h(e)}function E(e){return y(e)}function _(e,a,o){return p.call(e,a,o)}function R(e,a,o){_(_(e,a,o),void 0,d)}function j(e,a){R(e,a)}function T(e,a){R(e,void 0,a)}function W(e,a,o){return _(e,a,o)}function L(e){_(e,void 0,d)}let $=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=k(void 0);return o=>_(a,o)})();function F(e,a,o){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,o)}function U(e,a,o){try{return k(F(e,a,o))}catch(u){return E(u)}}let ae=16384;class ee{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let o=this._back,u=o;o._elements.length===ae-1&&(u={_elements:[],_next:void 0}),o._elements.push(a),u!==o&&(this._back=u,o._next=u),++this._size}shift(){let a=this._front,o=a,u=this._cursor,f=u+1,g=a._elements,w=g[u];return f===ae&&(o=a._next,f=0),--this._size,this._cursor=f,a!==o&&(this._front=o),g[u]=void 0,w}forEach(a){let o=this._cursor,u=this._front,f=u._elements;for(;(o!==f.length||u._next!==void 0)&&!(o===f.length&&(u=u._next,f=u._elements,o=0,f.length===0));)a(f[o]),++o}peek(){let a=this._front,o=this._cursor;return a._elements[o]}}function Ie(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?te(e):a._state==="closed"?q(e):ie(e,a._storedError)}function Ue(e,a){let o=e._ownerReadableStream;return Te(o,a)}function Y(e){e._ownerReadableStream._state==="readable"?I(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):K(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function G(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function te(e){e._closedPromise=O((a,o)=>{e._closedPromise_resolve=a,e._closedPromise_reject=o})}function ie(e,a){te(e),I(e,a)}function q(e){te(e),Z(e)}function I(e,a){e._closedPromise_reject!==void 0&&(L(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function K(e,a){ie(e,a)}function Z(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Me=t("[[AbortSteps]]"),et=t("[[ErrorSteps]]"),ue=t("[[CancelSteps]]"),le=t("[[PullSteps]]"),ir=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},cn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function un(e){return typeof e=="object"||typeof e=="function"}function je(e,a){if(e!==void 0&&!un(e))throw new TypeError(`${a} is not an object.`)}function ye(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function ln(e){return typeof e=="object"&&e!==null||typeof e=="function"}function cr(e,a){if(!ln(e))throw new TypeError(`${a} is not an object.`)}function Pe(e,a,o){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${o}'.`)}function It(e,a,o){if(e===void 0)throw new TypeError(`${a} is required in '${o}'.`)}function dn(e){return Number(e)}function ba(e){return e===0?0:e}function si(e){return ba(cn(e))}function ga(e,a){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=ba(f),!ir(f))throw new TypeError(`${a} is not a finite number`);if(f=si(f),f<0||f>u)throw new TypeError(`${a} is outside the accepted range of 0 to ${u}, inclusive`);return!ir(f)||f===0?0:f}function fn(e,a){if(!Ye(e))throw new TypeError(`${a} is not a ReadableStream.`)}function mt(e){return new Ut(e)}function ya(e,a){e._reader._readRequests.push(a)}function pn(e,a,o){let f=e._reader._readRequests.shift();o?f._closeSteps():f._chunkSteps(a)}function ur(e){return e._reader._readRequests.length}function Sa(e){let a=e._reader;return!(a===void 0||!Ve(a))}class Ut{constructor(a){if(Pe(a,1,"ReadableStreamDefaultReader"),fn(a,"First parameter"),Ke(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ie(this,a),this._readRequests=new ee}get closed(){return Ve(this)?this._closedPromise:E(lr("closed"))}cancel(a=void 0){return Ve(this)?this._ownerReadableStream===void 0?E(G("cancel")):Ue(this,a):E(lr("cancel"))}read(){if(!Ve(this))return E(lr("read"));if(this._ownerReadableStream===void 0)return E(G("read from"));let a,o,u=O((g,w)=>{a=g,o=w});return Mt(this,{_chunkSteps:g=>a({value:g,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:g=>o(g)}),u}releaseLock(){if(!Ve(this))throw lr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Y(this)}}}Object.defineProperties(Ut.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ve(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Ut}function Mt(e,a){let o=e._ownerReadableStream;o._disturbed=!0,o._state==="closed"?a._closeSteps():o._state==="errored"?a._errorSteps(o._storedError):o._readableStreamController[le](a)}function lr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let wa=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class _a{constructor(a,o){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=o}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let o=()=>this._returnSteps(a);return this._ongoingPromise?W(this._ongoingPromise,o,o):o()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return E(G("iterate"));let o,u,f=O((w,x)=>{o=w,u=x});return Mt(a,{_chunkSteps:w=>{this._ongoingPromise=void 0,$(()=>o({value:w,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Y(a),o({value:void 0,done:!0})},_errorSteps:w=>{this._ongoingPromise=void 0,this._isFinished=!0,Y(a),u(w)}}),f}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let o=this._reader;if(o._ownerReadableStream===void 0)return E(G("finish iterating"));if(!this._preventCancel){let u=Ue(o,a);return Y(o),W(u,()=>({value:a,done:!0}))}return Y(o),k({value:a,done:!0})}}let Oa={next(){return Ea(this)?this._asyncIteratorImpl.next():E(ka("next"))},return(e){return Ea(this)?this._asyncIteratorImpl.return(e):E(ka("return"))}};wa!==void 0&&Object.setPrototypeOf(Oa,wa);function oi(e,a){let o=mt(e),u=new _a(o,a),f=Object.create(Oa);return f._asyncIteratorImpl=u,f}function Ea(e){if(!c(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof _a}catch{return!1}}function ka(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ra=Number.isNaN||function(e){return e!==e};function qt(e){return e.slice()}function xa(e,a,o,u,f){new Uint8Array(e).set(new Uint8Array(o,u,f),a)}function wd(e){return e}function dr(e){return!1}function $a(e,a,o){if(e.slice)return e.slice(a,o);let u=o-a,f=new ArrayBuffer(u);return xa(f,0,e,a,u),f}function ii(e){return!(typeof e!="number"||Ra(e)||e<0)}function ja(e){let a=$a(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function mn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function hn(e,a,o){if(!ii(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:o}),e._queueTotalSize+=o}function ci(e){return e._queue.peek().value}function Je(e){e._queue=new ee,e._queueTotalSize=0}class Dt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!bn(this))throw wn("view");return this._view}respond(a){if(!bn(this))throw wn("respond");if(Pe(a,1,"respond"),a=ga(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(this._view.buffer),br(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!bn(this))throw wn("respondWithNewView");if(Pe(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(a.buffer),gr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Dt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ht{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!tt(this))throw Lt("byobRequest");return Sn(this)}get desiredSize(){if(!tt(this))throw Lt("desiredSize");return Ma(this)}close(){if(!tt(this))throw Lt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);Bt(this)}enqueue(a){if(!tt(this))throw Lt("enqueue");if(Pe(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);hr(this,a)}error(a=void 0){if(!tt(this))throw Lt("error");ve(this,a)}[ue](a){Pa(this),Je(this);let o=this._cancelAlgorithm(a);return mr(this),o}[le](a){let o=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Aa(this);let g=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);a._chunkSteps(g);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(w){a._errorSteps(w);return}let g={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(g)}ya(o,a),rt(this)}}Object.defineProperties(ht.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ht.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function tt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ht}function bn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Dt}function rt(e){if(!fi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();R(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,rt(e))},u=>{ve(e,u)})}function Pa(e){yn(e),e._pendingPullIntos=new ee}function gn(e,a){let o=!1;e._state==="closed"&&(o=!0);let u=va(a);a.readerType==="default"?pn(e,u,o):hi(e,u,o)}function va(e){let a=e.bytesFilled,o=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/o)}function fr(e,a,o,u){e._queue.push({buffer:a,byteOffset:o,byteLength:u}),e._queueTotalSize+=u}function Ta(e,a){let o=a.elementSize,u=a.bytesFilled-a.bytesFilled%o,f=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),g=a.bytesFilled+f,w=g-g%o,x=f,M=!1;w>u&&(x=w-a.bytesFilled,M=!0);let z=e._queue;for(;x>0;){let N=z.peek(),Q=Math.min(x,N.byteLength),X=a.byteOffset+a.bytesFilled;xa(a.buffer,X,N.buffer,N.byteOffset,Q),N.byteLength===Q?z.shift():(N.byteOffset+=Q,N.byteLength-=Q),e._queueTotalSize-=Q,Ca(e,Q,a),x-=Q}return M}function Ca(e,a,o){o.bytesFilled+=a}function Aa(e){e._queueTotalSize===0&&e._closeRequested?(mr(e),Ht(e._controlledReadableByteStream)):rt(e)}function yn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ia(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Ta(e,a)&&(pr(e),gn(e._controlledReadableByteStream,a))}}function ui(e,a,o){let u=e._controlledReadableByteStream,f=1;a.constructor!==DataView&&(f=a.constructor.BYTES_PER_ELEMENT);let g=a.constructor,w=a.buffer,x={buffer:w,bufferByteLength:w.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:f,viewConstructor:g,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(x),Ba(u,o);return}if(u._state==="closed"){let M=new g(x.buffer,x.byteOffset,0);o._closeSteps(M);return}if(e._queueTotalSize>0){if(Ta(e,x)){let M=va(x);Aa(e),o._chunkSteps(M);return}if(e._closeRequested){let M=new TypeError("Insufficient bytes to fill elements in the given buffer");ve(e,M),o._errorSteps(M);return}}e._pendingPullIntos.push(x),Ba(u,o),rt(e)}function li(e,a){let o=e._controlledReadableByteStream;if(_n(o))for(;La(o)>0;){let u=pr(e);gn(o,u)}}function di(e,a,o){if(Ca(e,a,o),o.bytesFilled<o.elementSize)return;pr(e);let u=o.bytesFilled%o.elementSize;if(u>0){let f=o.byteOffset+o.bytesFilled,g=$a(o.buffer,f-u,f);fr(e,g,0,g.byteLength)}o.bytesFilled-=u,gn(e._controlledReadableByteStream,o),Ia(e)}function Ua(e,a){let o=e._pendingPullIntos.peek();yn(e),e._controlledReadableByteStream._state==="closed"?li(e):di(e,a,o),rt(e)}function pr(e){return e._pendingPullIntos.shift()}function fi(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(Sa(a)&&ur(a)>0||_n(a)&&La(a)>0||Ma(e)>0)}function mr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Bt(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ve(e,u),u}mr(e),Ht(a)}}function hr(e,a){let o=e._controlledReadableByteStream;if(e._closeRequested||o._state!=="readable")return;let u=a.buffer,f=a.byteOffset,g=a.byteLength,w=u;if(e._pendingPullIntos.length>0){let x=e._pendingPullIntos.peek();dr(x.buffer),x.buffer=x.buffer}if(yn(e),Sa(o))if(ur(o)===0)fr(e,w,f,g);else{e._pendingPullIntos.length>0&&pr(e);let x=new Uint8Array(w,f,g);pn(o,x,!1)}else _n(o)?(fr(e,w,f,g),Ia(e)):fr(e,w,f,g);rt(e)}function ve(e,a){let o=e._controlledReadableByteStream;o._state==="readable"&&(Pa(e),Je(e),mr(e),ls(o,a))}function Sn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),o=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),u=Object.create(Dt.prototype);mi(u,e,o),e._byobRequest=u}return e._byobRequest}function Ma(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function br(e,a){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+a>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=o.buffer,Ua(e,a)}function gr(e,a){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+a.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=a.byteLength;o.buffer=a.buffer,Ua(e,f)}function qa(e,a,o,u,f,g,w){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Je(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=g,a._pullAlgorithm=u,a._cancelAlgorithm=f,a._autoAllocateChunkSize=w,a._pendingPullIntos=new ee,e._readableStreamController=a;let x=o();R(k(x),()=>{a._started=!0,rt(a)},M=>{ve(a,M)})}function pi(e,a,o){let u=Object.create(ht.prototype),f=()=>{},g=()=>k(void 0),w=()=>k(void 0);a.start!==void 0&&(f=()=>a.start(u)),a.pull!==void 0&&(g=()=>a.pull(u)),a.cancel!==void 0&&(w=M=>a.cancel(M));let x=a.autoAllocateChunkSize;if(x===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");qa(e,u,f,g,w,o,x)}function mi(e,a,o){e._associatedReadableByteStreamController=a,e._view=o}function wn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Lt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Da(e){return new zt(e)}function Ba(e,a){e._reader._readIntoRequests.push(a)}function hi(e,a,o){let f=e._reader._readIntoRequests.shift();o?f._closeSteps(a):f._chunkSteps(a)}function La(e){return e._reader._readIntoRequests.length}function _n(e){let a=e._reader;return!(a===void 0||!nt(a))}class zt{constructor(a){if(Pe(a,1,"ReadableStreamBYOBReader"),fn(a,"First parameter"),Ke(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!tt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ie(this,a),this._readIntoRequests=new ee}get closed(){return nt(this)?this._closedPromise:E(yr("closed"))}cancel(a=void 0){return nt(this)?this._ownerReadableStream===void 0?E(G("cancel")):Ue(this,a):E(yr("cancel"))}read(a){if(!nt(this))return E(yr("read"));if(!ArrayBuffer.isView(a))return E(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return E(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return E(new TypeError("view's buffer must have non-zero byteLength"));if(dr(a.buffer),this._ownerReadableStream===void 0)return E(G("read from"));let o,u,f=O((w,x)=>{o=w,u=x});return za(this,a,{_chunkSteps:w=>o({value:w,done:!1}),_closeSteps:w=>o({value:w,done:!0}),_errorSteps:w=>u(w)}),f}releaseLock(){if(!nt(this))throw yr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Y(this)}}}Object.defineProperties(zt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function nt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof zt}function za(e,a,o){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?o._errorSteps(u._storedError):ui(u._readableStreamController,a,o)}function yr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Wt(e,a){let{highWaterMark:o}=e;if(o===void 0)return a;if(Ra(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function Sr(e){let{size:a}=e;return a||(()=>1)}function wr(e,a){je(e,a);let o=e?.highWaterMark,u=e?.size;return{highWaterMark:o===void 0?void 0:dn(o),size:u===void 0?void 0:bi(u,`${a} has member 'size' that`)}}function bi(e,a){return ye(e,a),o=>dn(e(o))}function gi(e,a){je(e,a);let o=e?.abort,u=e?.close,f=e?.start,g=e?.type,w=e?.write;return{abort:o===void 0?void 0:yi(o,e,`${a} has member 'abort' that`),close:u===void 0?void 0:Si(u,e,`${a} has member 'close' that`),start:f===void 0?void 0:wi(f,e,`${a} has member 'start' that`),write:w===void 0?void 0:_i(w,e,`${a} has member 'write' that`),type:g}}function yi(e,a,o){return ye(e,o),u=>U(e,a,[u])}function Si(e,a,o){return ye(e,o),()=>U(e,a,[])}function wi(e,a,o){return ye(e,o),u=>F(e,a,[u])}function _i(e,a,o){return ye(e,o),(u,f)=>U(e,a,[u,f])}function Wa(e,a){if(!bt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Oi(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Ei=typeof AbortController=="function";function ki(){if(Ei)return new AbortController}class Ft{constructor(a={},o={}){a===void 0?a=null:cr(a,"First parameter");let u=wr(o,"Second parameter"),f=gi(a,"First parameter");if(Na(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let w=Sr(u),x=Wt(u,1);Di(this,f,x,w)}get locked(){if(!bt(this))throw Rr("locked");return gt(this)}abort(a=void 0){return bt(this)?gt(this)?E(new TypeError("Cannot abort a stream that already has a writer")):_r(this,a):E(Rr("abort"))}close(){return bt(this)?gt(this)?E(new TypeError("Cannot close a stream that already has a writer")):qe(this)?E(new TypeError("Cannot close an already-closing stream")):Qa(this):E(Rr("close"))}getWriter(){if(!bt(this))throw Rr("getWriter");return Fa(this)}}Object.defineProperties(Ft.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Fa(e){return new Nt(e)}function Ri(e,a,o,u,f=1,g=()=>1){let w=Object.create(Ft.prototype);Na(w);let x=Object.create(yt.prototype);return Ka(w,x,e,a,o,u,f,g),w}function Na(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ee,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function bt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Ft}function gt(e){return e._writer!==void 0}function _r(e,a){var o;if(e._state==="closed"||e._state==="errored")return k(void 0);e._writableStreamController._abortReason=a,(o=e._writableStreamController._abortController)===null||o===void 0||o.abort();let u=e._state;if(u==="closed"||u==="errored")return k(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,a=void 0);let g=O((w,x)=>{e._pendingAbortRequest={_promise:void 0,_resolve:w,_reject:x,_reason:a,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=g,f||En(e,a),g}function Qa(e){let a=e._state;if(a==="closed"||a==="errored")return E(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let o=O((f,g)=>{let w={_resolve:f,_reject:g};e._closeRequest=w}),u=e._writer;return u!==void 0&&e._backpressure&&a==="writable"&&Cn(u),Bi(e._writableStreamController),o}function xi(e){return O((o,u)=>{let f={_resolve:o,_reject:u};e._writeRequests.push(f)})}function On(e,a){if(e._state==="writable"){En(e,a);return}kn(e)}function En(e,a){let o=e._writableStreamController;e._state="erroring",e._storedError=a;let u=e._writer;u!==void 0&&Ja(u,a),!Ti(e)&&o._started&&kn(e)}function kn(e){e._state="errored",e._writableStreamController[et]();let a=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(a)}),e._writeRequests=new ee,e._pendingAbortRequest===void 0){Or(e);return}let o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,o._wasAlreadyErroring){o._reject(a),Or(e);return}let u=e._writableStreamController[Me](o._reason);R(u,()=>{o._resolve(),Or(e)},f=>{o._reject(f),Or(e)})}function $i(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ji(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,On(e,a)}function Pi(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let o=e._writer;o!==void 0&&ts(o)}function vi(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),On(e,a)}function qe(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ti(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ci(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ai(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Or(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&vn(a,e._storedError)}function Rn(e,a){let o=e._writer;o!==void 0&&a!==e._backpressure&&(a?Vi(o):Cn(o)),e._backpressure=a}class Nt{constructor(a){if(Pe(a,1,"WritableStreamDefaultWriter"),Wa(a,"First parameter"),gt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let o=a._state;if(o==="writable")!qe(a)&&a._backpressure?$r(this):rs(this),xr(this);else if(o==="erroring")Tn(this,a._storedError),xr(this);else if(o==="closed")rs(this),Ni(this);else{let u=a._storedError;Tn(this,u),es(this,u)}}get closed(){return at(this)?this._closedPromise:E(st("closed"))}get desiredSize(){if(!at(this))throw st("desiredSize");if(this._ownerWritableStream===void 0)throw Qt("desiredSize");return qi(this)}get ready(){return at(this)?this._readyPromise:E(st("ready"))}abort(a=void 0){return at(this)?this._ownerWritableStream===void 0?E(Qt("abort")):Ii(this,a):E(st("abort"))}close(){if(!at(this))return E(st("close"));let a=this._ownerWritableStream;return a===void 0?E(Qt("close")):qe(a)?E(new TypeError("Cannot close an already-closing stream")):Va(this)}releaseLock(){if(!at(this))throw st("releaseLock");this._ownerWritableStream!==void 0&&Ha(this)}write(a=void 0){return at(this)?this._ownerWritableStream===void 0?E(Qt("write to")):Ga(this,a):E(st("write"))}}Object.defineProperties(Nt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function at(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Nt}function Ii(e,a){let o=e._ownerWritableStream;return _r(o,a)}function Va(e){let a=e._ownerWritableStream;return Qa(a)}function Ui(e){let a=e._ownerWritableStream,o=a._state;return qe(a)||o==="closed"?k(void 0):o==="errored"?E(a._storedError):Va(e)}function Mi(e,a){e._closedPromiseState==="pending"?vn(e,a):Qi(e,a)}function Ja(e,a){e._readyPromiseState==="pending"?ns(e,a):Ji(e,a)}function qi(e){let a=e._ownerWritableStream,o=a._state;return o==="errored"||o==="erroring"?null:o==="closed"?0:Za(a._writableStreamController)}function Ha(e){let a=e._ownerWritableStream,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ja(e,o),Mi(e,o),a._writer=void 0,e._ownerWritableStream=void 0}function Ga(e,a){let o=e._ownerWritableStream,u=o._writableStreamController,f=Li(u,a);if(o!==e._ownerWritableStream)return E(Qt("write to"));let g=o._state;if(g==="errored")return E(o._storedError);if(qe(o)||g==="closed")return E(new TypeError("The stream is closing or closed and cannot be written to"));if(g==="erroring")return E(o._storedError);let w=xi(o);return zi(u,a,f),w}let Ya={};class yt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!xn(this))throw Pn("abortReason");return this._abortReason}get signal(){if(!xn(this))throw Pn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!xn(this))throw Pn("error");this._controlledWritableStream._state==="writable"&&Xa(this,a)}[Me](a){let o=this._abortAlgorithm(a);return Er(this),o}[et](){Je(this)}}Object.defineProperties(yt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(yt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function xn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof yt}function Ka(e,a,o,u,f,g,w,x){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._abortReason=void 0,a._abortController=ki(),a._started=!1,a._strategySizeAlgorithm=x,a._strategyHWM=w,a._writeAlgorithm=u,a._closeAlgorithm=f,a._abortAlgorithm=g;let M=jn(a);Rn(e,M);let z=o(),N=k(z);R(N,()=>{a._started=!0,kr(a)},Q=>{a._started=!0,On(e,Q)})}function Di(e,a,o,u){let f=Object.create(yt.prototype),g=()=>{},w=()=>k(void 0),x=()=>k(void 0),M=()=>k(void 0);a.start!==void 0&&(g=()=>a.start(f)),a.write!==void 0&&(w=z=>a.write(z,f)),a.close!==void 0&&(x=()=>a.close()),a.abort!==void 0&&(M=z=>a.abort(z)),Ka(e,f,g,w,x,M,o,u)}function Er(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Bi(e){hn(e,Ya,0),kr(e)}function Li(e,a){try{return e._strategySizeAlgorithm(a)}catch(o){return $n(e,o),1}}function Za(e){return e._strategyHWM-e._queueTotalSize}function zi(e,a,o){try{hn(e,a,o)}catch(f){$n(e,f);return}let u=e._controlledWritableStream;if(!qe(u)&&u._state==="writable"){let f=jn(e);Rn(u,f)}kr(e)}function kr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){kn(a);return}if(e._queue.length===0)return;let u=ci(e);u===Ya?Wi(e):Fi(e,u)}function $n(e,a){e._controlledWritableStream._state==="writable"&&Xa(e,a)}function Wi(e){let a=e._controlledWritableStream;Ci(a),mn(e);let o=e._closeAlgorithm();Er(e),R(o,()=>{Pi(a)},u=>{vi(a,u)})}function Fi(e,a){let o=e._controlledWritableStream;Ai(o);let u=e._writeAlgorithm(a);R(u,()=>{$i(o);let f=o._state;if(mn(e),!qe(o)&&f==="writable"){let g=jn(e);Rn(o,g)}kr(e)},f=>{o._state==="writable"&&Er(e),ji(o,f)})}function jn(e){return Za(e)<=0}function Xa(e,a){let o=e._controlledWritableStream;Er(e),En(o,a)}function Rr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Pn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function st(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Qt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function xr(e){e._closedPromise=O((a,o)=>{e._closedPromise_resolve=a,e._closedPromise_reject=o,e._closedPromiseState="pending"})}function es(e,a){xr(e),vn(e,a)}function Ni(e){xr(e),ts(e)}function vn(e,a){e._closedPromise_reject!==void 0&&(L(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Qi(e,a){es(e,a)}function ts(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function $r(e){e._readyPromise=O((a,o)=>{e._readyPromise_resolve=a,e._readyPromise_reject=o}),e._readyPromiseState="pending"}function Tn(e,a){$r(e),ns(e,a)}function rs(e){$r(e),Cn(e)}function ns(e,a){e._readyPromise_reject!==void 0&&(L(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Vi(e){$r(e)}function Ji(e,a){Tn(e,a)}function Cn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let as=typeof DOMException<"u"?DOMException:void 0;function Hi(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Gi(){let e=function(o,u){this.message=o||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Yi=Hi(as)?as:Gi();function ss(e,a,o,u,f,g){let w=mt(e),x=Fa(a);e._disturbed=!0;let M=!1,z=k(void 0);return O((N,Q)=>{let X;if(g!==void 0){if(X=()=>{let P=new Yi("Aborted","AbortError"),D=[];u||D.push(()=>a._state==="writable"?_r(a,P):k(void 0)),f||D.push(()=>e._state==="readable"?Te(e,P):k(void 0)),me(()=>Promise.all(D.map(J=>J())),!0,P)},g.aborted){X();return}g.addEventListener("abort",X)}function Ce(){return O((P,D)=>{function J(Se){Se?P():_(_t(),J,D)}J(!1)})}function _t(){return M?k(!0):_(x._readyPromise,()=>O((P,D)=>{Mt(w,{_chunkSteps:J=>{z=_(Ga(x,J),void 0,n),P(!1)},_closeSteps:()=>P(!0),_errorSteps:D})}))}if(ze(e,w._closedPromise,P=>{u?Ee(!0,P):me(()=>_r(a,P),!0,P)}),ze(a,x._closedPromise,P=>{f?Ee(!0,P):me(()=>Te(e,P),!0,P)}),de(e,w._closedPromise,()=>{o?Ee():me(()=>Ui(x))}),qe(a)||a._state==="closed"){let P=new TypeError("the destination writable stream closed before all data could be piped to it");f?Ee(!0,P):me(()=>Te(e,P),!0,P)}L(Ce());function Ze(){let P=z;return _(z,()=>P!==z?Ze():void 0)}function ze(P,D,J){P._state==="errored"?J(P._storedError):T(D,J)}function de(P,D,J){P._state==="closed"?J():j(D,J)}function me(P,D,J){if(M)return;M=!0,a._state==="writable"&&!qe(a)?j(Ze(),Se):Se();function Se(){R(P(),()=>We(D,J),Ot=>We(!0,Ot))}}function Ee(P,D){M||(M=!0,a._state==="writable"&&!qe(a)?j(Ze(),()=>We(P,D)):We(P,D))}function We(P,D){Ha(x),Y(w),g!==void 0&&g.removeEventListener("abort",X),P?Q(D):N(void 0)}})}class St{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!jr(this))throw Tr("desiredSize");return An(this)}close(){if(!jr(this))throw Tr("close");if(!wt(this))throw new TypeError("The stream is not in a state that permits close");Jt(this)}enqueue(a=void 0){if(!jr(this))throw Tr("enqueue");if(!wt(this))throw new TypeError("The stream is not in a state that permits enqueue");return vr(this,a)}error(a=void 0){if(!jr(this))throw Tr("error");He(this,a)}[ue](a){Je(this);let o=this._cancelAlgorithm(a);return Pr(this),o}[le](a){let o=this._controlledReadableStream;if(this._queue.length>0){let u=mn(this);this._closeRequested&&this._queue.length===0?(Pr(this),Ht(o)):Vt(this),a._chunkSteps(u)}else ya(o,a),Vt(this)}}Object.defineProperties(St.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(St.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function jr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof St}function Vt(e){if(!os(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();R(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Vt(e))},u=>{He(e,u)})}function os(e){let a=e._controlledReadableStream;return!wt(e)||!e._started?!1:!!(Ke(a)&&ur(a)>0||An(e)>0)}function Pr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Jt(e){if(!wt(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Pr(e),Ht(a))}function vr(e,a){if(!wt(e))return;let o=e._controlledReadableStream;if(Ke(o)&&ur(o)>0)pn(o,a,!1);else{let u;try{u=e._strategySizeAlgorithm(a)}catch(f){throw He(e,f),f}try{hn(e,a,u)}catch(f){throw He(e,f),f}}Vt(e)}function He(e,a){let o=e._controlledReadableStream;o._state==="readable"&&(Je(e),Pr(e),ls(o,a))}function An(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ki(e){return!os(e)}function wt(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function is(e,a,o,u,f,g,w){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=w,a._strategyHWM=g,a._pullAlgorithm=u,a._cancelAlgorithm=f,e._readableStreamController=a;let x=o();R(k(x),()=>{a._started=!0,Vt(a)},M=>{He(a,M)})}function Zi(e,a,o,u){let f=Object.create(St.prototype),g=()=>{},w=()=>k(void 0),x=()=>k(void 0);a.start!==void 0&&(g=()=>a.start(f)),a.pull!==void 0&&(w=()=>a.pull(f)),a.cancel!==void 0&&(x=M=>a.cancel(M)),is(e,f,g,w,x,o,u)}function Tr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Xi(e,a){return tt(e._readableStreamController)?tc(e):ec(e)}function ec(e,a){let o=mt(e),u=!1,f=!1,g=!1,w=!1,x,M,z,N,Q,X=O(de=>{Q=de});function Ce(){return u?(f=!0,k(void 0)):(u=!0,Mt(o,{_chunkSteps:me=>{$(()=>{f=!1;let Ee=me,We=me;g||vr(z._readableStreamController,Ee),w||vr(N._readableStreamController,We),u=!1,f&&Ce()})},_closeSteps:()=>{u=!1,g||Jt(z._readableStreamController),w||Jt(N._readableStreamController),(!g||!w)&&Q(void 0)},_errorSteps:()=>{u=!1}}),k(void 0))}function _t(de){if(g=!0,x=de,w){let me=qt([x,M]),Ee=Te(e,me);Q(Ee)}return X}function Ze(de){if(w=!0,M=de,g){let me=qt([x,M]),Ee=Te(e,me);Q(Ee)}return X}function ze(){}return z=In(ze,Ce,_t),N=In(ze,Ce,Ze),T(o._closedPromise,de=>{He(z._readableStreamController,de),He(N._readableStreamController,de),(!g||!w)&&Q(void 0)}),[z,N]}function tc(e){let a=mt(e),o=!1,u=!1,f=!1,g=!1,w=!1,x,M,z,N,Q,X=O(P=>{Q=P});function Ce(P){T(P._closedPromise,D=>{P===a&&(ve(z._readableStreamController,D),ve(N._readableStreamController,D),(!g||!w)&&Q(void 0))})}function _t(){nt(a)&&(Y(a),a=mt(e),Ce(a)),Mt(a,{_chunkSteps:D=>{$(()=>{u=!1,f=!1;let J=D,Se=D;if(!g&&!w)try{Se=ja(D)}catch(Ot){ve(z._readableStreamController,Ot),ve(N._readableStreamController,Ot),Q(Te(e,Ot));return}g||hr(z._readableStreamController,J),w||hr(N._readableStreamController,Se),o=!1,u?ze():f&&de()})},_closeSteps:()=>{o=!1,g||Bt(z._readableStreamController),w||Bt(N._readableStreamController),z._readableStreamController._pendingPullIntos.length>0&&br(z._readableStreamController,0),N._readableStreamController._pendingPullIntos.length>0&&br(N._readableStreamController,0),(!g||!w)&&Q(void 0)},_errorSteps:()=>{o=!1}})}function Ze(P,D){Ve(a)&&(Y(a),a=Da(e),Ce(a));let J=D?N:z,Se=D?z:N;za(a,P,{_chunkSteps:Et=>{$(()=>{u=!1,f=!1;let kt=D?w:g;if(D?g:w)kt||gr(J._readableStreamController,Et);else{let Es;try{Es=ja(Et)}catch(Mn){ve(J._readableStreamController,Mn),ve(Se._readableStreamController,Mn),Q(Te(e,Mn));return}kt||gr(J._readableStreamController,Et),hr(Se._readableStreamController,Es)}o=!1,u?ze():f&&de()})},_closeSteps:Et=>{o=!1;let kt=D?w:g,Lr=D?g:w;kt||Bt(J._readableStreamController),Lr||Bt(Se._readableStreamController),Et!==void 0&&(kt||gr(J._readableStreamController,Et),!Lr&&Se._readableStreamController._pendingPullIntos.length>0&&br(Se._readableStreamController,0)),(!kt||!Lr)&&Q(void 0)},_errorSteps:()=>{o=!1}})}function ze(){if(o)return u=!0,k(void 0);o=!0;let P=Sn(z._readableStreamController);return P===null?_t():Ze(P._view,!1),k(void 0)}function de(){if(o)return f=!0,k(void 0);o=!0;let P=Sn(N._readableStreamController);return P===null?_t():Ze(P._view,!0),k(void 0)}function me(P){if(g=!0,x=P,w){let D=qt([x,M]),J=Te(e,D);Q(J)}return X}function Ee(P){if(w=!0,M=P,g){let D=qt([x,M]),J=Te(e,D);Q(J)}return X}function We(){}return z=us(We,ze,me),N=us(We,de,Ee),Ce(a),[z,N]}function rc(e,a){je(e,a);let o=e,u=o?.autoAllocateChunkSize,f=o?.cancel,g=o?.pull,w=o?.start,x=o?.type;return{autoAllocateChunkSize:u===void 0?void 0:ga(u,`${a} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:nc(f,o,`${a} has member 'cancel' that`),pull:g===void 0?void 0:ac(g,o,`${a} has member 'pull' that`),start:w===void 0?void 0:sc(w,o,`${a} has member 'start' that`),type:x===void 0?void 0:oc(x,`${a} has member 'type' that`)}}function nc(e,a,o){return ye(e,o),u=>U(e,a,[u])}function ac(e,a,o){return ye(e,o),u=>U(e,a,[u])}function sc(e,a,o){return ye(e,o),u=>F(e,a,[u])}function oc(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function ic(e,a){je(e,a);let o=e?.mode;return{mode:o===void 0?void 0:cc(o,`${a} has member 'mode' that`)}}function cc(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function uc(e,a){return je(e,a),{preventCancel:!!e?.preventCancel}}function cs(e,a){je(e,a);let o=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,g=e?.signal;return g!==void 0&&lc(g,`${a} has member 'signal' that`),{preventAbort:!!o,preventCancel:!!u,preventClose:!!f,signal:g}}function lc(e,a){if(!Oi(e))throw new TypeError(`${a} is not an AbortSignal.`)}function dc(e,a){je(e,a);let o=e?.readable;It(o,"readable","ReadableWritablePair"),fn(o,`${a} has member 'readable' that`);let u=e?.writable;return It(u,"writable","ReadableWritablePair"),Wa(u,`${a} has member 'writable' that`),{readable:o,writable:u}}class Ge{constructor(a={},o={}){a===void 0?a=null:cr(a,"First parameter");let u=wr(o,"Second parameter"),f=rc(a,"First parameter");if(Un(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let g=Wt(u,0);pi(this,f,g)}else{let g=Sr(u),w=Wt(u,1);Zi(this,f,w,g)}}get locked(){if(!Ye(this))throw ot("locked");return Ke(this)}cancel(a=void 0){return Ye(this)?Ke(this)?E(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,a):E(ot("cancel"))}getReader(a=void 0){if(!Ye(this))throw ot("getReader");return ic(a,"First parameter").mode===void 0?mt(this):Da(this)}pipeThrough(a,o={}){if(!Ye(this))throw ot("pipeThrough");Pe(a,1,"pipeThrough");let u=dc(a,"First parameter"),f=cs(o,"Second parameter");if(Ke(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(gt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let g=ss(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return L(g),u.readable}pipeTo(a,o={}){if(!Ye(this))return E(ot("pipeTo"));if(a===void 0)return E("Parameter 1 is required in 'pipeTo'.");if(!bt(a))return E(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=cs(o,"Second parameter")}catch(f){return E(f)}return Ke(this)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):gt(a)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ss(this,a,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ye(this))throw ot("tee");let a=Xi(this);return qt(a)}values(a=void 0){if(!Ye(this))throw ot("values");let o=uc(a,"First parameter");return oi(this,o.preventCancel)}}Object.defineProperties(Ge.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ge.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Ge.prototype,t.asyncIterator,{value:Ge.prototype.values,writable:!0,configurable:!0});function In(e,a,o,u=1,f=()=>1){let g=Object.create(Ge.prototype);Un(g);let w=Object.create(St.prototype);return is(g,w,e,a,o,u,f),g}function us(e,a,o){let u=Object.create(Ge.prototype);Un(u);let f=Object.create(ht.prototype);return qa(u,f,e,a,o,0,void 0),u}function Un(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ye(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ge}function Ke(e){return e._reader!==void 0}function Te(e,a){if(e._disturbed=!0,e._state==="closed")return k(void 0);if(e._state==="errored")return E(e._storedError);Ht(e);let o=e._reader;o!==void 0&&nt(o)&&(o._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),o._readIntoRequests=new ee);let u=e._readableStreamController[ue](a);return W(u,n)}function Ht(e){e._state="closed";let a=e._reader;a!==void 0&&(Z(a),Ve(a)&&(a._readRequests.forEach(o=>{o._closeSteps()}),a._readRequests=new ee))}function ls(e,a){e._state="errored",e._storedError=a;let o=e._reader;o!==void 0&&(I(o,a),Ve(o)?(o._readRequests.forEach(u=>{u._errorSteps(a)}),o._readRequests=new ee):(o._readIntoRequests.forEach(u=>{u._errorSteps(a)}),o._readIntoRequests=new ee))}function ot(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function ds(e,a){je(e,a);let o=e?.highWaterMark;return It(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:dn(o)}}let fs=e=>e.byteLength;try{Object.defineProperty(fs,"name",{value:"size",configurable:!0})}catch{}class Cr{constructor(a){Pe(a,1,"ByteLengthQueuingStrategy"),a=ds(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!ms(this))throw ps("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ms(this))throw ps("size");return fs}}Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ps(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ms(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Cr}let hs=()=>1;try{Object.defineProperty(hs,"name",{value:"size",configurable:!0})}catch{}class Ar{constructor(a){Pe(a,1,"CountQueuingStrategy"),a=ds(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!gs(this))throw bs("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!gs(this))throw bs("size");return hs}}Object.defineProperties(Ar.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ar.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function bs(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function gs(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Ar}function fc(e,a){je(e,a);let o=e?.flush,u=e?.readableType,f=e?.start,g=e?.transform,w=e?.writableType;return{flush:o===void 0?void 0:pc(o,e,`${a} has member 'flush' that`),readableType:u,start:f===void 0?void 0:mc(f,e,`${a} has member 'start' that`),transform:g===void 0?void 0:hc(g,e,`${a} has member 'transform' that`),writableType:w}}function pc(e,a,o){return ye(e,o),u=>U(e,a,[u])}function mc(e,a,o){return ye(e,o),u=>F(e,a,[u])}function hc(e,a,o){return ye(e,o),(u,f)=>U(e,a,[u,f])}class Ir{constructor(a={},o={},u={}){a===void 0&&(a=null);let f=wr(o,"Second parameter"),g=wr(u,"Third parameter"),w=fc(a,"First parameter");if(w.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(w.writableType!==void 0)throw new RangeError("Invalid writableType specified");let x=Wt(g,0),M=Sr(g),z=Wt(f,1),N=Sr(f),Q,X=O(Ce=>{Q=Ce});bc(this,X,z,N,x,M),yc(this,w),w.start!==void 0?Q(w.start(this._transformStreamController)):Q(void 0)}get readable(){if(!ys(this))throw Os("readable");return this._readable}get writable(){if(!ys(this))throw Os("writable");return this._writable}}Object.defineProperties(Ir.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function bc(e,a,o,u,f,g){function w(){return a}function x(X){return _c(e,X)}function M(X){return Oc(e,X)}function z(){return Ec(e)}e._writable=Ri(w,x,z,M,o,u);function N(){return kc(e)}function Q(X){return Mr(e,X),k(void 0)}e._readable=In(w,N,Q,f,g),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,qr(e,!0),e._transformStreamController=void 0}function ys(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ir}function Ur(e,a){He(e._readable._readableStreamController,a),Mr(e,a)}function Mr(e,a){Ss(e._transformStreamController),$n(e._writable._writableStreamController,a),e._backpressure&&qr(e,!1)}function qr(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=O(o=>{e._backpressureChangePromise_resolve=o}),e._backpressure=a}class Gt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Dr(this))throw Br("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return An(a)}enqueue(a=void 0){if(!Dr(this))throw Br("enqueue");ws(this,a)}error(a=void 0){if(!Dr(this))throw Br("error");Sc(this,a)}terminate(){if(!Dr(this))throw Br("terminate");wc(this)}}Object.defineProperties(Gt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Gt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Dr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Gt}function gc(e,a,o,u){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=o,a._flushAlgorithm=u}function yc(e,a){let o=Object.create(Gt.prototype),u=g=>{try{return ws(o,g),k(void 0)}catch(w){return E(w)}},f=()=>k(void 0);a.transform!==void 0&&(u=g=>a.transform(g,o)),a.flush!==void 0&&(f=()=>a.flush(o)),gc(e,o,u,f)}function Ss(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ws(e,a){let o=e._controlledTransformStream,u=o._readable._readableStreamController;if(!wt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{vr(u,a)}catch(g){throw Mr(o,g),o._readable._storedError}Ki(u)!==o._backpressure&&qr(o,!0)}function Sc(e,a){Ur(e._controlledTransformStream,a)}function _s(e,a){let o=e._transformAlgorithm(a);return W(o,void 0,u=>{throw Ur(e._controlledTransformStream,u),u})}function wc(e){let a=e._controlledTransformStream,o=a._readable._readableStreamController;Jt(o);let u=new TypeError("TransformStream terminated");Mr(a,u)}function _c(e,a){let o=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return W(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return _s(o,a)})}return _s(o,a)}function Oc(e,a){return Ur(e,a),k(void 0)}function Ec(e){let a=e._readable,o=e._transformStreamController,u=o._flushAlgorithm();return Ss(o),W(u,()=>{if(a._state==="errored")throw a._storedError;Jt(a._readableStreamController)},f=>{throw Ur(e,f),a._storedError})}function kc(e){return qr(e,!1),e._backpressureChangePromise}function Br(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Os(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Cr,r.CountQueuingStrategy=Ar,r.ReadableByteStreamController=ht,r.ReadableStream=Ge,r.ReadableStreamBYOBReader=zt,r.ReadableStreamBYOBRequest=Dt,r.ReadableStreamDefaultController=St,r.ReadableStreamDefaultReader=Ut,r.TransformStream=Ir,r.TransformStreamDefaultController=Gt,r.WritableStream=Ft,r.WritableStreamDefaultController=yt,r.WritableStreamDefaultWriter=Nt,Object.defineProperty(r,"__esModule",{value:!0})}))});var eo=it(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(n){throw r.emitWarning=t,n}}catch{Object.assign(globalThis,Xs())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let s=0,i=this;return new ReadableStream({type:"bytes",async pull(c){let b=await i.slice(s,Math.min(i.size,s+65536)).arrayBuffer();s+=b.byteLength,c.enqueue(new Uint8Array(b)),s===i.size&&c.close()}})})}catch{}});async function*ra(r,t=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let s=n.byteOffset,i=n.byteOffset+n.byteLength;for(;s!==i;){let c=Math.min(i-s,to),d=n.buffer.slice(s,s+c);s+=d.byteLength,yield new Uint8Array(d)}}else yield n;else{let s=0,i=n;for(;s!==i.size;){let d=await i.slice(s,Math.min(i.size,s+to)).arrayBuffer();s+=d.byteLength,yield new Uint8Array(d)}}}var qd,to,ro,Hl,Fe,er=Yt(()=>{qd=re(eo(),1);to=65536;ro=class na{#t=[];#r="";#e=0;#s="transparent";constructor(t=[],n={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let s=new TextEncoder;for(let c of t){let d;ArrayBuffer.isView(c)?d=new Uint8Array(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)):c instanceof ArrayBuffer?d=new Uint8Array(c.slice(0)):c instanceof na?d=c:d=s.encode(`${c}`),this.#e+=ArrayBuffer.isView(d)?d.byteLength:d.size,this.#t.push(d)}this.#s=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#r=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#e}get type(){return this.#r}async text(){let t=new TextDecoder,n="";for await(let s of ra(this.#t,!1))n+=t.decode(s,{stream:!0});return n+=t.decode(),n}async arrayBuffer(){let t=new Uint8Array(this.size),n=0;for await(let s of ra(this.#t,!1))t.set(s,n),n+=s.length;return t.buffer}stream(){let t=ra(this.#t,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let s=await t.next();s.done?n.close():n.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,n=this.size,s=""){let{size:i}=this,c=t<0?Math.max(i+t,0):Math.min(t,i),d=n<0?Math.max(i+n,0):Math.min(n,i),b=Math.max(d-c,0),p=this.#t,h=[],y=0;for(let k of p){if(y>=b)break;let E=ArrayBuffer.isView(k)?k.byteLength:k.size;if(c&&E<=c)c-=E,d-=E;else{let _;ArrayBuffer.isView(k)?(_=k.subarray(c,Math.min(E,d)),y+=_.byteLength):(_=k.slice(c,Math.min(E,d)),y+=_.size),d-=E,h.push(_),c=0}}let O=new na([],{type:String(s).toLowerCase()});return O.#e=b,O.#t=h,O}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(ro.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Hl=ro,Fe=Hl});var Gl,Yl,jt,aa=Yt(()=>{er();Gl=class extends Fe{#t=0;#r="";constructor(t,n,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let i=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(i)||(this.#t=i),this.#r=String(n)}get name(){return this.#r}get lastModified(){return this.#t}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Fe&&/^(File)$/.test(t[Symbol.toStringTag])}},Yl=Gl,jt=Yl});function so(r,t=Fe){var n=`${no()}${no()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((c,d)=>typeof c=="string"?s.push(i+sa(d)+`"\r
\r
${c.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(i+sa(d)+`"; filename="${sa(c.name,1)}"\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,c,`\r
`)),s.push(`--${n}--`),new t(s,{type:"multipart/form-data; boundary="+n})}var tr,Kl,Zl,no,Xl,ao,sa,ut,lt,Yr=Yt(()=>{er();aa();({toStringTag:tr,iterator:Kl,hasInstance:Zl}=Symbol),no=Math.random,Xl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ao=(r,t,n)=>(r+="",/^(Blob|File)$/.test(t&&t[tr])?[(n=n!==void 0?n+"":t[tr]=="File"?t.name:"blob",r),t.name!==n||t[tr]=="blob"?new jt([t],n,t):t]:[r,t+""]),sa=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),ut=(r,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)},lt=class{#t=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[tr](){return"FormData"}[Kl](){return this.entries()}static[Zl](t){return t&&typeof t=="object"&&t[tr]==="FormData"&&!Xl.some(n=>typeof t[n]!="function")}append(...t){ut("append",arguments,2),this.#t.push(ao(...t))}delete(t){ut("delete",arguments,1),t+="",this.#t=this.#t.filter(([n])=>n!==t)}get(t){ut("get",arguments,1),t+="";for(var n=this.#t,s=n.length,i=0;i<s;i++)if(n[i][0]===t)return n[i][1];return null}getAll(t,n){return ut("getAll",arguments,1),n=[],t+="",this.#t.forEach(s=>s[0]===t&&n.push(s[1])),n}has(t){return ut("has",arguments,1),t+="",this.#t.some(n=>n[0]===t)}forEach(t,n){ut("forEach",arguments,1);for(var[s,i]of this)t.call(n,i,s,this)}set(...t){ut("set",arguments,2);var n=[],s=!0;t=ao(...t),this.#t.forEach(i=>{i[0]===t[0]?s&&(s=!n.push(t)):n.push(i)}),s&&n.push(t),this.#t=n}*entries(){yield*this.#t}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var lo=it((Yd,uo)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}uo.exports=globalThis.DOMException});var Zr,ed,Xd,ia=Yt(()=>{Zr=require("node:fs"),ed=re(lo(),1);aa();er();({stat:Xd}=Zr.promises)});var po={};qn(po,{toFormData:()=>id});function od(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let n=t[2]||t[3]||"",s=n.slice(n.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(i,c)=>String.fromCharCode(c)),s}async function id(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new ca(n[1]||n[2]),i,c,d,b,p,h,y=[],O=new lt,k=T=>{d+=j.decode(T,{stream:!0})},E=T=>{y.push(T)},_=()=>{let T=new jt(y,h,{type:p});O.append(b,T)},R=()=>{O.append(b,d)},j=new TextDecoder("utf-8");j.decode(),s.onPartBegin=function(){s.onPartData=k,s.onPartEnd=R,i="",c="",d="",b="",p="",h=null,y.length=0},s.onHeaderField=function(T){i+=j.decode(T,{stream:!0})},s.onHeaderValue=function(T){c+=j.decode(T,{stream:!0})},s.onHeaderEnd=function(){if(c+=j.decode(),i=i.toLowerCase(),i==="content-disposition"){let T=c.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);T&&(b=T[2]||T[3]||""),h=od(c),h&&(s.onPartData=E,s.onPartEnd=_)}else i==="content-type"&&(p=c);c="",i=""};for await(let T of r)s.write(T);return s.end(),O}var Be,H,fo,Xe,Xr,en,td,nr,rd,nd,ad,sd,dt,ca,mo=Yt(()=>{ia();Yr();Be=0,H={START_BOUNDARY:Be++,HEADER_FIELD_START:Be++,HEADER_FIELD:Be++,HEADER_VALUE_START:Be++,HEADER_VALUE:Be++,HEADER_VALUE_ALMOST_DONE:Be++,HEADERS_ALMOST_DONE:Be++,PART_DATA_START:Be++,PART_DATA:Be++,END:Be++},fo=1,Xe={PART_BOUNDARY:fo,LAST_BOUNDARY:fo*=2},Xr=10,en=13,td=32,nr=45,rd=58,nd=97,ad=122,sd=r=>r|32,dt=()=>{},ca=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=dt,this.onHeaderField=dt,this.onHeadersEnd=dt,this.onHeaderValue=dt,this.onPartBegin=dt,this.onPartData=dt,this.onPartEnd=dt,this.boundaryChars={},t=`\r
--`+t;let n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s),this.boundaryChars[n[s]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=H.START_BOUNDARY}write(t){let n=0,s=t.length,i=this.index,{lookbehind:c,boundary:d,boundaryChars:b,index:p,state:h,flags:y}=this,O=this.boundary.length,k=O-1,E=t.length,_,R,j=$=>{this[$+"Mark"]=n},T=$=>{delete this[$+"Mark"]},W=($,F,U,ae)=>{(F===void 0||F!==U)&&this[$](ae&&ae.subarray(F,U))},L=($,F)=>{let U=$+"Mark";U in this&&(F?(W($,this[U],n,t),delete this[U]):(W($,this[U],t.length,t),this[U]=0))};for(n=0;n<s;n++)switch(_=t[n],h){case H.START_BOUNDARY:if(p===d.length-2){if(_===nr)y|=Xe.LAST_BOUNDARY;else if(_!==en)return;p++;break}else if(p-1===d.length-2){if(y&Xe.LAST_BOUNDARY&&_===nr)h=H.END,y=0;else if(!(y&Xe.LAST_BOUNDARY)&&_===Xr)p=0,W("onPartBegin"),h=H.HEADER_FIELD_START;else return;break}_!==d[p+2]&&(p=-2),_===d[p+2]&&p++;break;case H.HEADER_FIELD_START:h=H.HEADER_FIELD,j("onHeaderField"),p=0;case H.HEADER_FIELD:if(_===en){T("onHeaderField"),h=H.HEADERS_ALMOST_DONE;break}if(p++,_===nr)break;if(_===rd){if(p===1)return;L("onHeaderField",!0),h=H.HEADER_VALUE_START;break}if(R=sd(_),R<nd||R>ad)return;break;case H.HEADER_VALUE_START:if(_===td)break;j("onHeaderValue"),h=H.HEADER_VALUE;case H.HEADER_VALUE:_===en&&(L("onHeaderValue",!0),W("onHeaderEnd"),h=H.HEADER_VALUE_ALMOST_DONE);break;case H.HEADER_VALUE_ALMOST_DONE:if(_!==Xr)return;h=H.HEADER_FIELD_START;break;case H.HEADERS_ALMOST_DONE:if(_!==Xr)return;W("onHeadersEnd"),h=H.PART_DATA_START;break;case H.PART_DATA_START:h=H.PART_DATA,j("onPartData");case H.PART_DATA:if(i=p,p===0){for(n+=k;n<E&&!(t[n]in b);)n+=O;n-=k,_=t[n]}if(p<d.length)d[p]===_?(p===0&&L("onPartData",!0),p++):p=0;else if(p===d.length)p++,_===en?y|=Xe.PART_BOUNDARY:_===nr?y|=Xe.LAST_BOUNDARY:p=0;else if(p-1===d.length)if(y&Xe.PART_BOUNDARY){if(p=0,_===Xr){y&=~Xe.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),h=H.HEADER_FIELD_START;break}}else y&Xe.LAST_BOUNDARY&&_===nr?(W("onPartEnd"),h=H.END,y=0):p=0;if(p>0)c[p-1]=_;else if(i>0){let $=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);W("onPartData",0,i,$),i=0,j("onPartData"),n--}break;case H.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}L("onHeaderField"),L("onHeaderValue"),L("onPartData"),this.index=p,this.state=h,this.flags=y}end(){if(this.state===H.HEADER_FIELD_START&&this.index===0||this.state===H.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==H.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Sd={};qn(Sd,{default:()=>ai});module.exports=vc(Sd);var ha=re(require("react")),S=require("@raycast/api");var B=re(require("react")),A=require("@raycast/api");var Rs=Object.prototype.hasOwnProperty;function Wr(r,t){var n,s;if(r===t)return!0;if(r&&t&&(n=r.constructor)===t.constructor){if(n===Date)return r.getTime()===t.getTime();if(n===RegExp)return r.toString()===t.toString();if(n===Array){if((s=r.length)===t.length)for(;s--&&Wr(r[s],t[s]););return s===-1}if(!n||typeof r=="object"){s=0;for(n in r)if(Rs.call(r,n)&&++s&&!Rs.call(t,n)||!(n in t)||!Wr(r[n],t[n]))return!1;return Object.keys(t).length===s}}return r!==r&&t!==t}var ct=re(require("node:fs")),Vr=re(require("node:path")),As=re(require("node:crypto")),Is=re(require("node:child_process")),Us=require("node:buffer"),$t=re(require("node:stream")),Ms=require("node:util");var Hn=require("react/jsx-runtime");var Dn=globalThis;function Tc(r){let t=(0,B.useRef)(r),n=(0,B.useRef)(0);return Wr(r,t.current)||(t.current=r,n.current+=1),(0,B.useMemo)(()=>t.current,[n.current])}function ke(r){let t=(0,B.useRef)(r);return t.current=r,t}function Cc(r,t){let n=r instanceof Error?r.message:String(r);return(0,A.showToast)({style:A.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??n,primaryAction:t?.primaryAction??xs(r),secondaryAction:t?.primaryAction?xs(r):void 0})}var xs=r=>{let t=!0,n="[Extension Name]...",s="";try{let d=JSON.parse((0,ct.readFileSync)((0,Vr.join)(A.environment.assetsPath,"..","package.json"),"utf8"));n=`[${d.title}]...`,s=`https://raycast.com/${d.owner||d.author}/${d.name}`,(!d.owner||d.access==="public")&&(t=!1)}catch{}let i=A.environment.isDevelopment||t,c=r instanceof Error?r?.stack||r?.message||"":String(r);return{title:i?"Copy Logs":"Report Error",onAction(d){d.hide(),i?A.Clipboard.copy(c):(0,A.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(s)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${c}
\`\`\`
`)}`)}}};function Ac(r,t,n){let s=(0,B.useRef)(0),[i,c]=(0,B.useState)({isLoading:!0}),d=ke(r),b=ke(n?.abortable),p=ke(t||[]),h=ke(n?.onError),y=ke(n?.onData),O=ke(n?.onWillExecute),k=ke(n?.failureToastOptions),E=ke(i.data),_=(0,B.useRef)(null),R=(0,B.useRef)({page:0}),j=(0,B.useRef)(!1),T=(0,B.useRef)(!0),W=(0,B.useRef)(50),L=(0,B.useCallback)(()=>(b.current&&(b.current.current?.abort(),b.current.current=new AbortController),++s.current),[b]),$=(0,B.useCallback)((...Y)=>{let G=L();O.current?.(Y),c(q=>({...q,isLoading:!0}));let te=Ic(d.current)(...Y);function ie(q){return q.name=="AbortError"||G===s.current&&(h.current?h.current(q):A.environment.launchType!==A.LaunchType.Background&&Cc(q,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(I){I.hide(),_.current?.(...p.current||[])}},...k.current}),c({error:q,isLoading:!1})),q}return typeof te=="function"?(j.current=!0,te(R.current).then(({data:q,hasMore:I,cursor:K})=>(G===s.current&&(R.current&&(R.current.cursor=K,R.current.lastItem=q?.[q.length-1]),y.current&&y.current(q,R.current),I&&(W.current=q.length),T.current=I,c(Z=>R.current.page===0?{data:q,isLoading:!1}:{data:(Z.data||[])?.concat(q),isLoading:!1})),q),q=>(T.current=!1,ie(q)))):(j.current=!1,te.then(q=>(G===s.current&&(y.current&&y.current(q),c({data:q,isLoading:!1})),q),ie))},[y,h,p,d,c,_,O,R,k,L]);_.current=$;let F=(0,B.useCallback)(()=>{R.current={page:0};let Y=p.current||[];return $(...Y)},[$,p]),U=(0,B.useCallback)(async(Y,G)=>{let te;try{if(G?.optimisticUpdate){L(),typeof G?.rollbackOnError!="function"&&G?.rollbackOnError!==!1&&(te=structuredClone(E.current?.value));let ie=G.optimisticUpdate;c(q=>({...q,data:ie(q.data)}))}return await Y}catch(ie){if(typeof G?.rollbackOnError=="function"){let q=G.rollbackOnError;c(I=>({...I,data:q(I.data)}))}else G?.optimisticUpdate&&G?.rollbackOnError!==!1&&c(q=>({...q,data:te}));throw ie}finally{G?.shouldRevalidateAfter!==!1&&(A.environment.launchType===A.LaunchType.Background||A.environment.commandMode==="menu-bar"?await F():F())}},[F,E,c,L]),ae=(0,B.useCallback)(()=>{R.current.page+=1;let Y=p.current||[];$(...Y)},[R,p,$]);(0,B.useEffect)(()=>{R.current={page:0},n?.execute!==!1?$(...t||[]):L()},[Tc([t,n?.execute,$]),b,R]),(0,B.useEffect)(()=>()=>{L()},[L]);let ee=n?.execute!==!1?i.isLoading:!1,Ie={...i,isLoading:ee},Ue=j.current?{pageSize:W.current,hasMore:T.current,onLoadMore:ae}:void 0;return{...Ie,revalidate:F,mutate:U,pagination:Ue}}function Ic(r){return r===Promise.all||r===Promise.race||r===Promise.resolve||r===Promise.reject?r.bind(Promise):r}function $s(r){return typeof r!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))!==null}function Uc(r){return r instanceof URLSearchParams?r.toString():r}function qs(r,t=[]){function n(s){return"update"in r?r.update(s,"utf8"):r.write(s)}return{dispatch:function(s){s=Uc(s),s===null?this._null():this["_"+typeof s](s)},_object:function(s){let i=/\[object (.*)\]/i,c=Object.prototype.toString.call(s),d=i.exec(c)?.[1]??"unknown:["+c+"]";d=d.toLowerCase();let b=null;if((b=t.indexOf(s))>=0){this.dispatch("[CIRCULAR:"+b+"]");return}else t.push(s);if(Buffer.isBuffer(s))return n("buffer:"),n(s.toString("utf8"));if(d!=="object"&&d!=="function"&&d!=="asyncfunction")if(this["_"+d])this["_"+d](s);else throw new Error('Unknown object type "'+d+'"');else{let p=Object.keys(s);p=p.sort(),$s(s)||p.splice(0,0,"prototype","__proto__","constructor"),n("object:"+p.length+":");let h=this;return p.forEach(function(y){h.dispatch(y),n(":"),h.dispatch(s[y]),n(",")})}},_array:function(s,i){i=typeof i<"u"?i:!1;let c=this;if(n("array:"+s.length+":"),!i||s.length<=1){s.forEach(function(p){c.dispatch(p)});return}let d=[],b=s.map(function(p){let h=Mc(),y=t.slice();return qs(h,y).dispatch(p),d=d.concat(y.slice(t.length)),h.read().toString()});t=t.concat(d),b.sort(),this._array(b,!1)},_date:function(s){n("date:"+s.toJSON())},_symbol:function(s){n("symbol:"+s.toString())},_error:function(s){n("error:"+s.toString())},_boolean:function(s){n("bool:"+s.toString())},_string:function(s){n("string:"+s.length+":"),n(s.toString())},_function:function(s){n("fn:"),$s(s)?this.dispatch("[native]"):this.dispatch(s.toString()),this.dispatch("function-name:"+String(s.name)),this._object(s)},_number:function(s){n("number:"+s.toString())},_xml:function(s){n("xml:"+s.toString())},_null:function(){n("Null")},_undefined:function(){n("Undefined")},_regexp:function(s){n("regex:"+s.toString())},_uint8array:function(s){n("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint8clampedarray:function(s){n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},_int8array:function(s){n("int8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint16array:function(s){n("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},_int16array:function(s){n("int16array:"),this.dispatch(Array.prototype.slice.call(s))},_uint32array:function(s){n("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},_int32array:function(s){n("int32array:"),this.dispatch(Array.prototype.slice.call(s))},_float32array:function(s){n("float32array:"),this.dispatch(Array.prototype.slice.call(s))},_float64array:function(s){n("float64array:"),this.dispatch(Array.prototype.slice.call(s))},_arraybuffer:function(s){n("arraybuffer:"),this.dispatch(new Uint8Array(s))},_url:function(s){n("url:"+s.toString())},_map:function(s){n("map:");let i=Array.from(s);this._array(i,!0)},_set:function(s){n("set:");let i=Array.from(s);this._array(i,!0)},_file:function(s){n("file:"),this.dispatch([s.name,s.size,s.type,s.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){n("domwindow")},_bigint:function(s){n("bigint:"+s.toString())},_process:function(){n("process")},_timer:function(){n("timer")},_pipe:function(){n("pipe")},_tcp:function(){n("tcp")},_udp:function(){n("udp")},_tty:function(){n("tty")},_statwatcher:function(){n("statwatcher")},_securecontext:function(){n("securecontext")},_connection:function(){n("connection")},_zlib:function(){n("zlib")},_context:function(){n("context")},_nodescript:function(){n("nodescript")},_httpparser:function(){n("httpparser")},_dataview:function(){n("dataview")},_signal:function(){n("signal")},_fsevent:function(){n("fsevent")},_tlswrap:function(){n("tlswrap")}}}function Mc(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}function qc(r,t){let n=this[r];return n instanceof Date?`__raycast_cached_date__${n.toString()}`:Buffer.isBuffer(n)?`__raycast_cached_buffer__${n.toString("base64")}`:t}function Dc(r,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function js(r){let t=As.default.createHash("sha1");return qs(t).dispatch(r),t.digest("hex")}var Bc=Symbol("cache without namespace"),Ps=new Map;function Gn(r,t,n){let s=n?.cacheNamespace||Bc,i=Ps.get(s)||Ps.set(s,new A.Cache({namespace:n?.cacheNamespace})).get(s);if(!i)throw new Error("Missing cache");let c=ke(r),d=ke(t),b=(0,B.useSyncExternalStore)(i.subscribe,()=>{try{return i.get(c.current)}catch(O){console.error("Could not get Cache data:",O);return}}),p=(0,B.useMemo)(()=>{if(typeof b<"u"){if(b==="undefined")return;try{return JSON.parse(b,Dc)}catch(O){return console.warn("The cached data is corrupted",O),d.current}}else return d.current},[b,d]),h=ke(p),y=(0,B.useCallback)(O=>{let k=typeof O=="function"?O(h.current):O;if(typeof k>"u")i.set(c.current,"undefined");else{let E=JSON.stringify(k,qc);i.set(c.current,E)}return k},[i,c,h]);return[p,y]}var Rt=Symbol();function Re(r,t,n){let{initialData:s,keepPreviousData:i,internal_cacheKeySuffix:c,...d}=n||{},b=(0,B.useRef)(null),[p,h]=Gn(js(t||[])+c,Rt,{cacheNamespace:js(r)}),y=(0,B.useRef)(p!==Rt?p:s),O=(0,B.useRef)(void 0),{mutate:k,revalidate:E,..._}=Ac(r,t||[],{...d,onData(L,$){O.current=$,d.onData&&d.onData(L,$),!($&&$.page>0)&&(b.current="promise",y.current=L,h(L))}}),R,j=_.pagination;O.current&&O.current.page>0&&_.data?R=_.data:b.current==="promise"?R=y.current:i&&p!==Rt?(R=p,j&&(j.hasMore=!0,j.pageSize=p.length)):i&&p===Rt?R=y.current:p!==Rt?(R=p,j&&(j.hasMore=!0,j.pageSize=p.length)):R=s;let T=ke(R),W=(0,B.useCallback)(async(L,$)=>{let F;try{if($?.optimisticUpdate){typeof $?.rollbackOnError!="function"&&$?.rollbackOnError!==!1&&(F=structuredClone(T.current));let U=$.optimisticUpdate(T.current);b.current="cache",y.current=U,h(U)}return await k(L,{shouldRevalidateAfter:$?.shouldRevalidateAfter})}catch(U){if(typeof $?.rollbackOnError=="function"){let ae=$.rollbackOnError(T.current);b.current="cache",y.current=ae,h(ae)}else $?.optimisticUpdate&&$?.rollbackOnError!==!1&&(b.current="cache",y.current=F,h(F));throw U}},[h,k,T,y,b]);return(0,B.useEffect)(()=>{p!==Rt&&(b.current="cache",y.current=p)},[p]),{data:R,isLoading:_.isLoading,error:_.error,mutate:O.current&&O.current.page>0?k:W,pagination:j,revalidate:E}}var Nr=r=>!!r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function",Bn=Symbol.for("signal-exit emitter"),Nn=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),Dn[Bn])return Dn[Bn];Object.defineProperty(Dn,Bn,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,n){this.listeners[t].push(n)}removeListener(t,n){let s=this.listeners[t],i=s.indexOf(n);i!==-1&&(i===0&&s.length===1?s.length=0:s.splice(i,1))}emit(t,n,s){if(this.emitted[t])return!1;this.emitted[t]=!0;let i=!1;for(let c of this.listeners[t])i=c(n,s)===!0||i;return t==="exit"&&(i=this.emit("afterExit",n,s)||i),i}},Qn=class{onExit(){return()=>{}}load(){}unload(){}},Vn=class{#t;#r;#e;#s;#i;#o;#a;#n;constructor(t){this.#t=process.platform==="win32"?"SIGINT":"SIGHUP",this.#r=new Nn,this.#o={},this.#a=!1,this.#n=[],this.#n.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#n.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#n.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=t,this.#o={};for(let n of this.#n)this.#o[n]=()=>{let s=this.#e.listeners(n),{count:i}=this.#r,c=t;if(typeof c.__signal_exit_emitter__=="object"&&typeof c.__signal_exit_emitter__.count=="number"&&(i+=c.__signal_exit_emitter__.count),s.length===i){this.unload();let d=this.#r.emit("exit",null,n),b=n==="SIGHUP"?this.#t:n;d||t.kill(t.pid,b)}};this.#i=t.reallyExit,this.#s=t.emit}onExit(t,n){if(!Nr(this.#e))return()=>{};this.#a===!1&&this.load();let s=n?.alwaysLast?"afterExit":"exit";return this.#r.on(s,t),()=>{this.#r.removeListener(s,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#a){this.#a=!0,this.#r.count+=1;for(let t of this.#n)try{let n=this.#o[t];n&&this.#e.on(t,n)}catch{}this.#e.emit=(t,...n)=>this.#u(t,...n),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#a&&(this.#a=!1,this.#n.forEach(t=>{let n=this.#o[t];if(!n)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,n)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#r.count-=1)}#c(t){return Nr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#u(t,...n){let s=this.#s;if(t==="exit"&&Nr(this.#e)){typeof n[0]=="number"&&(this.#e.exitCode=n[0]);let i=s.call(this.#e,t,...n);return this.#r.emit("exit",this.#e.exitCode,null),i}else return s.call(this.#e,t,...n)}},Ln=null,Lc=(r,t)=>(Ln||(Ln=Nr(process)?new Vn(process):new Qn),Ln.onExit(r,t));function zc(r,{timeout:t}={}){let n=new Promise((b,p)=>{r.on("exit",(h,y)=>{b({exitCode:h,signal:y,timedOut:!1})}),r.on("error",h=>{p(h)}),r.stdin&&r.stdin.on("error",h=>{p(h)})}),s=Lc(()=>{r.kill()});if(t===0||t===void 0)return n.finally(()=>s());let i,c=new Promise((b,p)=>{i=setTimeout(()=>{r.kill("SIGTERM"),p(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},t)}),d=n.finally(()=>{clearTimeout(i)});return Promise.race([c,d]).finally(()=>s())}var Jn=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Wc(r){let{encoding:t}=r,n=t==="buffer",s=new $t.default.PassThrough({objectMode:!1});t&&t!=="buffer"&&s.setEncoding(t);let i=0,c=[];return s.on("data",d=>{c.push(d),i+=d.length}),s.getBufferedValue=()=>n?Buffer.concat(c,i):c.join(""),s.getBufferedLength=()=>i,s}async function vs(r,t){let n=Wc(t);return await new Promise((s,i)=>{let c=d=>{d&&n.getBufferedLength()<=Us.constants.MAX_LENGTH&&(d.bufferedData=n.getBufferedValue()),i(d)};(async()=>{try{await(0,Ms.promisify)($t.default.pipeline)(r,n),s()}catch(d){c(d)}})(),n.on("data",()=>{n.getBufferedLength()>8e7&&c(new Jn)})}),n.getBufferedValue()}async function Ts(r,t){r.destroy();try{return await t}catch(n){return n.bufferedData}}async function Fc({stdout:r,stderr:t},{encoding:n},s){let i=vs(r,{encoding:n}),c=vs(t,{encoding:n});try{return await Promise.all([s,i,c])}catch(d){return Promise.all([{error:d,exitCode:null,signal:d.signal,timedOut:d.timedOut||!1},Ts(r,i),Ts(t,c)])}}function Nc(r){let t=typeof r=="string"?`
`:10,n=typeof r=="string"?"\r":13;return r[r.length-1]===t&&(r=r.slice(0,-1)),r[r.length-1]===n&&(r=r.slice(0,-1)),r}function Cs(r,t){return r.stripFinalNewline?Nc(t):t}function Qc({timedOut:r,timeout:t,signal:n,exitCode:s}){return r?`timed out after ${t} milliseconds`:n!=null?`was killed with ${n}`:s!=null?`failed with exit code ${s}`:"failed"}function Vc({stdout:r,stderr:t,error:n,signal:s,exitCode:i,command:c,timedOut:d,options:b,parentError:p}){let y=`Command ${Qc({timedOut:d,timeout:b?.timeout,signal:s,exitCode:i})}: ${c}`,O=n?`${y}
${n.message}`:y,k=[O,t,r].filter(Boolean).join(`
`);return n?n.originalMessage=n.message:n=p,n.message=k,n.shortMessage=O,n.command=c,n.exitCode=i,n.signal=s,n.stdout=r,n.stderr=t,"bufferedData"in n&&delete n.bufferedData,n}function Jc({stdout:r,stderr:t,error:n,exitCode:s,signal:i,timedOut:c,command:d,options:b,parentError:p}){if(n||s!==0||i!==null)throw Vc({error:n,exitCode:s,signal:i,stdout:r,stderr:t,command:d,timedOut:c,options:b,parentError:p});return r}var Fr={asana:"1191201745684312",github:"7235fe8d42157f1f38c0",linear:"c8ff37b9225c3c9aefd7d66ea0e5b6f1",slack:"851756884692.5546927290212"},Qr=class r{constructor(t){this.clientId=t.clientId,this.scope=Array.isArray(t.scope)?t.scope.join(" "):t.scope,this.personalAccessToken=t.personalAccessToken,this.bodyEncoding=t.bodyEncoding,this.client=t.client,this.extraParameters=t.extraParameters,this.authorizeUrl=t.authorizeUrl,this.tokenUrl=t.tokenUrl,this.refreshTokenUrl=t.refreshTokenUrl,this.onAuthorize=t.onAuthorize,this.tokenResponseParser=t.tokenResponseParser??(n=>n),this.tokenRefreshResponseParser=t.tokenRefreshResponseParser??(n=>n),this.authorize=this.authorize.bind(this)}static asana(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Asana",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="251" height="232" fill="none"><path fill="#F06A6A" d="M179.383 54.373c0 30.017-24.337 54.374-54.354 54.374-30.035 0-54.373-24.338-54.373-54.374C70.656 24.338 94.993 0 125.029 0c30.017 0 54.354 24.338 54.354 54.373ZM54.393 122.33C24.376 122.33.02 146.668.02 176.685c0 30.017 24.337 54.373 54.373 54.373 30.035 0 54.373-24.338 54.373-54.373 0-30.017-24.338-54.355-54.373-54.355Zm141.253 0c-30.035 0-54.373 24.338-54.373 54.374 0 30.035 24.338 54.373 54.373 54.373 30.017 0 54.374-24.338 54.374-54.373 0-30.036-24.338-54.374-54.374-54.374Z"/></svg>')}`,providerId:"asana",description:"Connect your Asana account"}),clientId:t.clientId??Fr.asana,authorizeUrl:t.authorizeUrl??"https://asana.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://asana.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://asana.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static github(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"GitHub",providerIcon:{source:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>')}`,tintColor:A.Color.PrimaryText},providerId:"github",description:"Connect your GitHub account"}),clientId:t.clientId??Fr.github,authorizeUrl:t.authorizeUrl??"https://github.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://github.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://github.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static google(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.AppURI,providerName:"Google",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" style="display:block" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')}`,providerId:"google",description:"Connect your Google account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:t.tokenUrl??"https://oauth2.googleapis.com/token",refreshTokenUrl:t.tokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static jira(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Jira",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2361" height="2500" viewBox="2.59 0 214.091 224"><linearGradient id="a" x1="102.4" x2="56.15" y1="218.63" y2="172.39" gradientTransform="matrix(1 0 0 -1 0 264)" gradientUnits="userSpaceOnUse"><stop offset=".18" stop-color="#0052cc"/><stop offset="1" stop-color="#2684ff"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="114.65" x2="160.81" y1="85.77" y2="131.92"/><path fill="#2684ff" d="M214.06 105.73 117.67 9.34 108.33 0 35.77 72.56 2.59 105.73a8.89 8.89 0 0 0 0 12.54l66.29 66.29L108.33 224l72.55-72.56 1.13-1.12 32.05-32a8.87 8.87 0 0 0 0-12.59zm-105.73 39.39L75.21 112l33.12-33.12L141.44 112z"/><path fill="url(#a)" d="M108.33 78.88a55.75 55.75 0 0 1-.24-78.61L35.62 72.71l39.44 39.44z"/><path fill="url(#b)" d="m141.53 111.91-33.2 33.21a55.77 55.77 0 0 1 0 78.86L181 151.35z"/></svg>')}`,providerId:"jira",description:"Connect your Jira account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://auth.atlassian.com/authorize",tokenUrl:t.tokenUrl??"https://auth.atlassian.com/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static linear(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Linear",providerIcon:{source:{light:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#222326" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/></svg>')}`,dark:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z" /></svg>')}`}},providerId:"linear",description:"Connect your Linear account"}),clientId:t.clientId??Fr.linear,authorizeUrl:t.authorizeUrl??"https://linear.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://linear.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://linear.oauth.raycast.com/refresh-token",scope:t.scope,extraParameters:{actor:"user"},onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static slack(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Slack",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="73 73 124 124"><style>.st0{fill:#e01e5a}.st1{fill:#36c5f0}.st2{fill:#2eb67d}.st3{fill:#ecb22e}</style><path d="M99.4 151.2c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zM105.9 151.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9v-32.3z" class="st0"/><path d="M118.8 99.4c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v12.9h-12.9zM118.8 105.9c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H86.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3z" class="st1"/><path d="M170.6 118.8c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9h-12.9v-12.9zM164.1 118.8c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V86.5c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3z" class="st2"/><path d="M151.2 170.6c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9v-12.9h12.9zM151.2 164.1c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9h-32.3z" class="st3"/></svg>')}`,providerId:"slack",description:"Connect your Slack account"}),clientId:t.clientId??Fr.slack,authorizeUrl:t.authorizeUrl??"https://slack.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/token",refreshTokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/refresh-token",scope:"",extraParameters:{user_scope:t.scope},personalAccessToken:t.personalAccessToken,bodyEncoding:t.tokenUrl?t.bodyEncoding??"url-encoded":"json",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser??(n=>({access_token:n.authed_user.access_token,scope:n.authed_user.scope}))})}static zoom(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Zoom",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.845 80"><path d="M73.786 78.835H10.88A10.842 10.842 0 0 1 .833 72.122a10.841 10.841 0 0 1 2.357-11.85L46.764 16.7h-31.23C6.954 16.699 0 9.744 0 1.165h58.014c4.414 0 8.357 2.634 10.046 6.712a10.843 10.843 0 0 1-2.356 11.85L22.13 63.302h36.122c8.58 0 15.534 6.955 15.534 15.534Zm278.059-48.544C351.845 13.588 338.256 0 321.553 0c-8.934 0-16.975 3.89-22.524 10.063C293.48 3.89 285.44 0 276.505 0c-16.703 0-30.291 13.588-30.291 30.291v48.544c8.579 0 15.534-6.955 15.534-15.534v-33.01c0-8.137 6.62-14.757 14.757-14.757s14.757 6.62 14.757 14.757v33.01c0 8.58 6.955 15.534 15.534 15.534V30.291c0-8.137 6.62-14.757 14.757-14.757s14.758 6.62 14.758 14.757v33.01c0 8.58 6.954 15.534 15.534 15.534V30.291ZM238.447 40c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.908-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S173.98 26.488 173.98 40s10.953 24.466 24.466 24.466S222.913 53.512 222.913 40Zm-70.68 0c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S87.767 26.488 87.767 40s10.954 24.466 24.466 24.466S136.699 53.512 136.699 40Z" style="fill:#0b5cff"/></svg>')}`,providerId:"zoom",description:"Connect your Zoom account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://zoom.us/oauth/authorize",tokenUrl:t.tokenUrl??"https://zoom.us/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}async authorize(){let t=await this.client.getTokens();if(t?.accessToken){if(t.refreshToken&&t.isExpired()){let c=await this.refreshTokens({token:t.refreshToken});if(c)return await this.client.setTokens(c),c.access_token}return t.accessToken}let n=await this.client.authorizationRequest({endpoint:this.authorizeUrl,clientId:this.clientId,scope:this.scope,extraParameters:this.extraParameters}),{authorizationCode:s}=await this.client.authorize(n),i=await this.fetchTokens({authRequest:n,authorizationCode:s});return await this.client.setTokens(i),i.access_token}async fetchTokens({authRequest:t,authorizationCode:n}){let s;if(this.bodyEncoding==="url-encoded"){let d=new URLSearchParams;d.append("client_id",this.clientId),d.append("code",n),d.append("code_verifier",t.codeVerifier),d.append("grant_type","authorization_code"),d.append("redirect_uri",t.redirectURI),s={body:d}}else s={body:JSON.stringify({client_id:this.clientId,code:n,code_verifier:t.codeVerifier,grant_type:"authorization_code",redirect_uri:t.redirectURI}),headers:{"Content-Type":"application/json"}};let i=await fetch(this.tokenUrl,{method:"POST",...s});if(!i.ok){let d=await i.text();throw console.error("fetch tokens error:",d),new Error(`Error while fetching tokens: ${i.status} (${i.statusText})
${d}`)}let c=this.tokenResponseParser(await i.json());return Array.isArray(c.scope)?{...c,scope:c.scope.join(" ")}:c}async refreshTokens({token:t}){let n;if(this.bodyEncoding==="url-encoded"){let i=new URLSearchParams;i.append("client_id",this.clientId),i.append("refresh_token",t),i.append("grant_type","refresh_token"),n={body:i}}else n={body:JSON.stringify({client_id:this.clientId,refresh_token:t,grant_type:"refresh_token"}),headers:{"Content-Type":"application/json"}};let s=await fetch(this.refreshTokenUrl??this.tokenUrl,{method:"POST",...n});if(s.ok){let i=this.tokenRefreshResponseParser(await s.json());return i.refresh_token=i.refresh_token??t,i}else{let i=await s.text();console.error("refresh tokens error:",i),this.client.description=`${this.client.providerName} needs you to sign-in again. Press \u23CE or click the button below to continue.`,await this.client.removeTokens(),await this.authorize()}}},xt=null,Kt=null,zn=null,Wn=null,Fn=null;function Ds(r){return A.environment.commandMode==="no-view"?t=>async s=>{if(!xt){xt=r.personalAccessToken??await r.authorize(),Kt=r.personalAccessToken?"personal":"oauth";let i=(await r.client?.getTokens())?.idToken;r.onAuthorize&&await Promise.resolve(r.onAuthorize({token:xt,type:Kt,idToken:i}))}return t(s)}:t=>{let n=s=>{r.personalAccessToken?(xt=r.personalAccessToken,Kt="personal"):(zn||(zn=r.authorize()),xt=B.default.use(zn),Kt="oauth");let i;return r.client&&(Wn||(Wn=r.client?.getTokens().then(c=>c?.idToken)),i=B.default.use(Wn)),r.onAuthorize&&(Fn||(Fn=Promise.resolve(r.onAuthorize({token:xt,type:Kt,idToken:i}))),B.default.use(Fn)),(0,Hn.jsx)(t,{...s})};return n.displayName=`withAccessToken(${t.displayName||t.name})`,n}}async function se(r,t,n){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:s,language:i,timeout:c,...d}=Array.isArray(t)?n||{}:t||{},b=s!==!1?[]:["-ss"];i==="JavaScript"&&b.push("-l","JavaScript"),Array.isArray(t)&&b.push("-",...t);let p=Is.default.spawn("osascript",b,{...d,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),h=zc(p,{timeout:c??1e4});p.stdin.end(r);let[{error:y,exitCode:O,signal:k,timedOut:E},_,R]=await Fc(p,{encoding:"utf8"},h),j=Cs({stripFinalNewline:!0},_),T=Cs({stripFinalNewline:!0},R);return Jc({stdout:j,stderr:T,error:y,exitCode:O,signal:k,timedOut:E,command:"osascript",options:n,parentError:new Error})}var Bs=require("@raycast/api");function fe(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}async function Ls(r){await(0,Bs.closeMainWindow)(),await se(r)}var Ns=re(Yn());function C(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof Ns.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return r instanceof Error?r.message:String(r)}var Kn=require("@raycast/api");var Yc="7bbb789c01ff44ed842907b7a80c404f",Kc=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),Zc=new Kn.OAuth.PKCEClient({redirectMethod:Kn.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"}),Zn=new Qr({client:Zc,clientId:Yc,scope:Kc,authorizeUrl:"https://accounts.spotify.com/authorize/",tokenUrl:"https://accounts.spotify.com/api/token",refreshTokenUrl:"https://accounts.spotify.com/api/token",bodyEncoding:"url-encoded"});var ta={};qn(ta,{defaults:()=>Xt,deleteMeAlbums:()=>Vu,deleteMeAudiobooks:()=>Pu,deleteMeEpisodes:()=>el,deleteMeFollowing:()=>wl,deleteMeShows:()=>al,deleteMeTracks:()=>Yu,deletePlaylistsByPlaylistIdFollowers:()=>ll,deletePlaylistsByPlaylistIdTracks:()=>Wu,getAlbums:()=>fu,getAlbumsById:()=>du,getAlbumsByIdTracks:()=>pu,getArtists:()=>hu,getArtistsById:()=>mu,getArtistsByIdAlbums:()=>bu,getArtistsByIdRelatedArtists:()=>yu,getArtistsByIdTopTracks:()=>gu,getAudioAnalysisById:()=>Rl,getAudioFeatures:()=>El,getAudioFeaturesById:()=>kl,getAudiobooks:()=>Ru,getAudiobooksById:()=>ku,getAudiobooksByIdChapters:()=>xu,getBrowseCategories:()=>fl,getBrowseCategoriesByCategoryId:()=>pl,getBrowseCategoriesByCategoryIdPlaylists:()=>ml,getBrowseFeaturedPlaylists:()=>dl,getBrowseNewReleases:()=>gl,getChapters:()=>Cu,getChaptersById:()=>Tu,getEpisodes:()=>Eu,getEpisodesById:()=>Ou,getMarkets:()=>Fl,getMe:()=>Mu,getMeAlbums:()=>Nu,getMeAlbumsContains:()=>Ju,getMeAudiobooks:()=>$u,getMeAudiobooksContains:()=>vu,getMeEpisodes:()=>Zu,getMeEpisodesContains:()=>tl,getMeFollowing:()=>yl,getMeFollowingContains:()=>_l,getMePlayer:()=>jl,getMePlayerCurrentlyPlaying:()=>Tl,getMePlayerDevices:()=>vl,getMePlayerQueue:()=>zl,getMePlayerRecentlyPlayed:()=>Ll,getMePlaylists:()=>Fu,getMeShows:()=>rl,getMeShowsContains:()=>sl,getMeTopArtists:()=>Nl,getMeTopTracks:()=>Ql,getMeTracks:()=>Hu,getMeTracksContains:()=>Ku,getNext:()=>Vl,getPlaylistsByPlaylistId:()=>qu,getPlaylistsByPlaylistIdFollowersContains:()=>Ol,getPlaylistsByPlaylistIdImages:()=>hl,getPlaylistsByPlaylistIdTracks:()=>Bu,getRecommendations:()=>xl,getRecommendationsAvailableGenreSeeds:()=>$l,getShows:()=>wu,getShowsById:()=>Su,getShowsByIdEpisodes:()=>_u,getTracks:()=>Iu,getTracksById:()=>Au,getUsersByUserId:()=>ol,getUsersByUserIdPlaylists:()=>il,postMePlayerNext:()=>Il,postMePlayerPrevious:()=>Ul,postMePlayerQueue:()=>Wl,postPlaylistsByPlaylistIdTracks:()=>Lu,postUsersByUserIdPlaylists:()=>cl,putMeAlbums:()=>Qu,putMeAudiobooks:()=>ju,putMeEpisodes:()=>Xu,putMeFollowing:()=>Sl,putMePlayer:()=>Pl,putMePlayerPause:()=>Al,putMePlayerPlay:()=>Cl,putMePlayerRepeat:()=>ql,putMePlayerSeek:()=>Ml,putMePlayerShuffle:()=>Bl,putMePlayerVolume:()=>Dl,putMeShows:()=>nl,putMeTracks:()=>Gu,putPlaylistsByPlaylistId:()=>Du,putPlaylistsByPlaylistIdFollowers:()=>ul,putPlaylistsByPlaylistIdImages:()=>bl,putPlaylistsByPlaylistIdTracks:()=>zu,search:()=>Uu,servers:()=>Ys});var Gs=re(Hs()),m=re(ea()),Xt={baseUrl:"https://api.spotify.com/v1"},l=Gs.runtime(Xt),Ys={server1:"https://api.spotify.com/v1"};function du(r,{market:t}={},n){return l.ok(l.fetchJson(`/albums/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function fu(r,{market:t}={},n){return l.ok(l.fetchJson(`/albums${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function pu(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function mu(r,t){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function hu(r,t){return l.ok(l.fetchJson(`/artists${m.query(m.explode({ids:r}))}`,{...t}))}function bu(r,{includeGroups:t,market:n,limit:s,offset:i}={},c){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/albums${m.query(m.explode({include_groups:t,market:n,limit:s,offset:i}))}`,{...c}))}function gu(r,{market:t}={},n){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${m.query(m.explode({market:t}))}`,{...n}))}function yu(r,t){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function Su(r,{market:t}={},n){return l.ok(l.fetchJson(`/shows/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function wu(r,{market:t}={},n){return l.ok(l.fetchJson(`/shows${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function _u(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function Ou(r,{market:t}={},n){return l.ok(l.fetchJson(`/episodes/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Eu(r,{market:t}={},n){return l.ok(l.fetchJson(`/episodes${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function ku(r,{market:t}={},n){return l.ok(l.fetchJson(`/audiobooks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Ru(r,{market:t}={},n){return l.ok(l.fetchJson(`/audiobooks${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function xu(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function $u({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function ju(r,t){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"PUT"}))}function Pu(r,t){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"DELETE"}))}function vu(r,t){return l.ok(l.fetchJson(`/me/audiobooks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function Tu(r,{market:t}={},n){return l.ok(l.fetchJson(`/chapters/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Cu(r,{market:t}={},n){return l.ok(l.fetchJson(`/chapters${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function Au(r,{market:t}={},n){return l.ok(l.fetchJson(`/tracks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Iu(r,{market:t}={},n){return l.ok(l.fetchJson(`/tracks${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function Uu(r,t,{market:n,limit:s,offset:i,includeExternal:c}={},d){return l.ok(l.fetchJson(`/search${m.query(m.explode({q:r,market:n,limit:s,offset:i,include_external:c}),m.form({type:t}))}`,{...d}))}function Mu(r){return l.ok(l.fetchJson("/me",{...r}))}function qu(r,{market:t,fields:n,additionalTypes:s}={},i){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}${m.query(m.explode({market:t,fields:n,additional_types:s}))}`,{...i}))}function Du(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}`,l.json({...n,method:"PUT",body:t})))}function Bu(r,{market:t,fields:n,limit:s,offset:i,additionalTypes:c}={},d){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,fields:n,limit:s,offset:i,additional_types:c}))}`,{...d}))}function Lu(r,t,{position:n,uris:s}={},i){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({position:n,uris:s}))}`,l.json({...i,method:"POST",body:t})))}function zu(r,t,{uris:n}={},s){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({uris:n}))}`,l.json({...s,method:"PUT",body:t})))}function Wu(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,l.json({...n,method:"DELETE",body:t})))}function Fu({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/playlists${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function Nu({limit:r,offset:t,market:n}={},s){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({limit:r,offset:t,market:n}))}`,{...s}))}function Qu(r,t,n){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function Vu(r,t,n){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function Ju(r,t){return l.ok(l.fetchJson(`/me/albums/contains${m.query(m.explode({ids:r}))}`,{...t}))}function Hu({market:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function Gu(r,t,n){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function Yu(r,t,n){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function Ku(r,t){return l.ok(l.fetchJson(`/me/tracks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function Zu({market:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function Xu(r,t,n){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function el(r,t,n){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function tl(r,t){return l.ok(l.fetchJson(`/me/episodes/contains${m.query(m.explode({ids:r}))}`,{...t}))}function rl({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function nl(r,t,n){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function al(r,t,{market:n}={},s){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({ids:r,market:n}))}`,l.json({...s,method:"DELETE",body:t})))}function sl(r,t){return l.ok(l.fetchJson(`/me/shows/contains${m.query(m.explode({ids:r}))}`,{...t}))}function ol(r,t){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function il(r,{limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}/playlists${m.query(m.explode({limit:t,offset:n}))}`,{...s}))}function cl(r,t,n){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,l.json({...n,method:"POST",body:t})))}function ul(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,l.json({...n,method:"PUT",body:t})))}function ll(r,t){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function dl({country:r,locale:t,timestamp:n,limit:s,offset:i}={},c){return l.ok(l.fetchJson(`/browse/featured-playlists${m.query(m.explode({country:r,locale:t,timestamp:n,limit:s,offset:i}))}`,{...c}))}function fl({country:r,locale:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/browse/categories${m.query(m.explode({country:r,locale:t,limit:n,offset:s}))}`,{...i}))}function pl(r,{country:t,locale:n}={},s){return l.ok(l.fetchJson(`/browse/categories/${encodeURIComponent(r)}${m.query(m.explode({country:t,locale:n}))}`,{...s}))}function ml(r,{country:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${m.query(m.explode({country:t,limit:n,offset:s}))}`,{...i}))}function hl(r,t){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function bl(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...n,method:"PUT",body:t}))}function gl({country:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/browse/new-releases${m.query(m.explode({country:r,limit:t,offset:n}))}`,{...s}))}function yl(r,{after:t,limit:n}={},s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,after:t,limit:n}))}`,{...s}))}function Sl(r,t,n,s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,l.json({...s,method:"PUT",body:n})))}function wl(r,t,n,s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,l.json({...s,method:"DELETE",body:n})))}function _l(r,t,n){return l.ok(l.fetchJson(`/me/following/contains${m.query(m.explode({type:r,ids:t}))}`,{...n}))}function Ol(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${m.query(m.explode({ids:t}))}`,{...n}))}function El(r,t){return l.ok(l.fetchJson(`/audio-features${m.query(m.explode({ids:r}))}`,{...t}))}function kl(r,t){return l.ok(l.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function Rl(r,t){return l.ok(l.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function xl({limit:r,market:t,seedArtists:n,seedGenres:s,seedTracks:i,minAcousticness:c,maxAcousticness:d,targetAcousticness:b,minDanceability:p,maxDanceability:h,targetDanceability:y,minDurationMs:O,maxDurationMs:k,targetDurationMs:E,minEnergy:_,maxEnergy:R,targetEnergy:j,minInstrumentalness:T,maxInstrumentalness:W,targetInstrumentalness:L,minKey:$,maxKey:F,targetKey:U,minLiveness:ae,maxLiveness:ee,targetLiveness:Ie,minLoudness:Ue,maxLoudness:Y,targetLoudness:G,minMode:te,maxMode:ie,targetMode:q,minPopularity:I,maxPopularity:K,targetPopularity:Z,minSpeechiness:Me,maxSpeechiness:et,targetSpeechiness:ue,minTempo:le,maxTempo:ir,targetTempo:cn,minTimeSignature:un,maxTimeSignature:je,targetTimeSignature:ye,minValence:ln,maxValence:cr,targetValence:Pe}={},It){return l.ok(l.fetchJson(`/recommendations${m.query(m.explode({limit:r,market:t,seed_artists:n,seed_genres:s,seed_tracks:i,min_acousticness:c,max_acousticness:d,target_acousticness:b,min_danceability:p,max_danceability:h,target_danceability:y,min_duration_ms:O,max_duration_ms:k,target_duration_ms:E,min_energy:_,max_energy:R,target_energy:j,min_instrumentalness:T,max_instrumentalness:W,target_instrumentalness:L,min_key:$,max_key:F,target_key:U,min_liveness:ae,max_liveness:ee,target_liveness:Ie,min_loudness:Ue,max_loudness:Y,target_loudness:G,min_mode:te,max_mode:ie,target_mode:q,min_popularity:I,max_popularity:K,target_popularity:Z,min_speechiness:Me,max_speechiness:et,target_speechiness:ue,min_tempo:le,max_tempo:ir,target_tempo:cn,min_time_signature:un,max_time_signature:je,target_time_signature:ye,min_valence:ln,max_valence:cr,target_valence:Pe}))}`,{...It}))}function $l(r){return l.ok(l.fetchJson("/recommendations/available-genre-seeds",{...r}))}function jl({market:r,additionalTypes:t}={},n){return l.ok(l.fetchJson(`/me/player${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function Pl(r,t){return l.ok(l.fetchJson("/me/player",l.json({...t,method:"PUT",body:r})))}function vl(r){return l.ok(l.fetchJson("/me/player/devices",{...r}))}function Tl({market:r,additionalTypes:t}={},n){return l.ok(l.fetchJson(`/me/player/currently-playing${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function Cl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/play${m.query(m.explode({device_id:t}))}`,l.json({...n,method:"PUT",body:r})))}function Al({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/pause${m.query(m.explode({device_id:r}))}`,{...t,method:"PUT"}))}function Il({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/next${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function Ul({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/previous${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function Ml(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/seek${m.query(m.explode({position_ms:r,device_id:t}))}`,{...n,method:"PUT"}))}function ql(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/repeat${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function Dl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/volume${m.query(m.explode({volume_percent:r,device_id:t}))}`,{...n,method:"PUT"}))}function Bl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/shuffle${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function Ll({limit:r,after:t,before:n}={},s){return l.ok(l.fetchJson(`/me/player/recently-played${m.query(m.explode({limit:r,after:t,before:n}))}`,{...s}))}function zl(r){return l.ok(l.fetchJson("/me/player/queue",{...r}))}function Wl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/queue${m.query(m.explode({uri:r,device_id:t}))}`,{...n,method:"POST"}))}function Fl(r){return l.ok(l.fetchJson("/markets",{...r}))}function Nl({timeRange:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/top/artists${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function Ql({timeRange:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/top/tracks${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function Vl(r,t){let n=r.replace(Ys.server1,"");return l.ok(l.fetchJson(n,{...t}))}var Po=re(require("node:http"),1),vo=re(require("node:https"),1),pt=re(require("node:zlib"),1),Oe=re(require("node:stream"),1),or=require("node:buffer");function Jl(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,t).split(";"),s="",i=!1,c=n[0]||"text/plain",d=c;for(let y=1;y<n.length;y++)n[y]==="base64"?i=!0:n[y]&&(d+=`;${n[y]}`,n[y].indexOf("charset=")===0&&(s=n[y].substring(8)));!n[0]&&!s.length&&(d+=";charset=US-ASCII",s="US-ASCII");let b=i?"base64":"ascii",p=unescape(r.substring(t+1)),h=Buffer.from(p,b);return h.type=c,h.typeFull=d,h.charset=s,h}var Ks=Jl;var xe=re(require("node:stream"),1),Qe=require("node:util"),we=require("node:buffer");er();Yr();var Ne=class extends Error{constructor(t,n){super(t),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var be=class extends Ne{constructor(t,n,s){super(t,n),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var Kr=Symbol.toStringTag,oa=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Kr]==="URLSearchParams",rr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Kr]),oo=r=>typeof r=="object"&&(r[Kr]==="AbortSignal"||r[Kr]==="EventTarget"),io=(r,t)=>{let n=new URL(t).hostname,s=new URL(r).hostname;return n===s||n.endsWith(`.${s}`)},co=(r,t)=>{let n=new URL(t).protocol,s=new URL(r).protocol;return n===s};var cd=(0,Qe.promisify)(xe.default.pipeline),ge=Symbol("Body internals"),Le=class{constructor(t,{size:n=0}={}){let s=null;t===null?t=null:oa(t)?t=we.Buffer.from(t.toString()):rr(t)||we.Buffer.isBuffer(t)||(Qe.types.isAnyArrayBuffer(t)?t=we.Buffer.from(t):ArrayBuffer.isView(t)?t=we.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof xe.default||(t instanceof lt?(t=so(t),s=t.type.split("=")[1]):t=we.Buffer.from(String(t))));let i=t;we.Buffer.isBuffer(t)?i=xe.default.Readable.from(t):rr(t)&&(i=xe.default.Readable.from(t.stream())),this[ge]={body:t,stream:i,boundary:s,disturbed:!1,error:null},this.size=n,t instanceof xe.default&&t.on("error",c=>{let d=c instanceof Ne?c:new be(`Invalid response body while trying to fetch ${this.url}: ${c.message}`,"system",c);this[ge].error=d})}get body(){return this[ge].stream}get bodyUsed(){return this[ge].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:n,byteLength:s}=await ua(this);return t.slice(n,n+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new lt,i=new URLSearchParams(await this.text());for(let[c,d]of i)s.append(c,d);return s}let{toFormData:n}=await Promise.resolve().then(()=>(mo(),po));return n(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ge].body&&this[ge].body.type||"",n=await this.arrayBuffer();return new Fe([n],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await ua(this);return new TextDecoder().decode(t)}buffer(){return ua(this)}};Le.prototype.buffer=(0,Qe.deprecate)(Le.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Le.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ua(r){if(r[ge].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[ge].disturbed=!0,r[ge].error)throw r[ge].error;let{body:t}=r;if(t===null)return we.Buffer.alloc(0);if(!(t instanceof xe.default))return we.Buffer.alloc(0);let n=[],s=0;try{for await(let i of t){if(r.size>0&&s+i.length>r.size){let c=new be(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(c),c}s+=i.length,n.push(i)}}catch(i){throw i instanceof Ne?i:new be(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?we.Buffer.from(n.join("")):we.Buffer.concat(n,s)}catch(i){throw new be(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new be(`Premature close of server response while trying to fetch ${r.url}`)}var Pt=(r,t)=>{let n,s,{body:i}=r[ge];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof xe.default&&typeof i.getBoundary!="function"&&(n=new xe.PassThrough({highWaterMark:t}),s=new xe.PassThrough({highWaterMark:t}),i.pipe(n),i.pipe(s),r[ge].stream=n,i=s),i},ud=(0,Qe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),tn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":oa(r)?"application/x-www-form-urlencoded;charset=UTF-8":rr(r)?r.type||null:we.Buffer.isBuffer(r)||Qe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof lt?`multipart/form-data; boundary=${t[ge].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${ud(r)}`:r instanceof xe.default?null:"text/plain;charset=UTF-8",ho=r=>{let{body:t}=r[ge];return t===null?0:rr(t)?t.size:we.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},bo=async(r,{body:t})=>{t===null?r.end():await cd(t,r)};var la=require("node:util"),ar=re(require("node:http"),1),rn=typeof ar.default.validateHeaderName=="function"?ar.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},da=typeof ar.default.validateHeaderValue=="function"?ar.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},_e=class r extends URLSearchParams{constructor(t){let n=[];if(t instanceof r){let s=t.raw();for(let[i,c]of Object.entries(s))n.push(...c.map(d=>[i,d]))}else if(t!=null)if(typeof t=="object"&&!la.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)n.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");n=[...t].map(i=>{if(typeof i!="object"||la.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([s,i])=>(rn(s),da(s,String(i)),[String(s).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(s,i,c){switch(i){case"append":case"set":return(d,b)=>(rn(d),da(d,String(b)),URLSearchParams.prototype[i].call(s,String(d).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return d=>(rn(d),URLSearchParams.prototype[i].call(s,String(d).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,i,c)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let n=this.getAll(t);if(n.length===0)return null;let s=n.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,n=void 0){for(let s of this.keys())Reflect.apply(t,n,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,n)=>(t[n]=this.getAll(n),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,n)=>{let s=this.getAll(n);return n==="host"?t[n]=s[0]:t[n]=s.length>1?s:s[0],t},{})}};Object.defineProperties(_e.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function go(r=[]){return new _e(r.reduce((t,n,s,i)=>(s%2===0&&t.push(i.slice(s,s+2)),t),[]).filter(([t,n])=>{try{return rn(t),da(t,String(n)),!0}catch{return!1}}))}var ld=new Set([301,302,303,307,308]),nn=r=>ld.has(r);var Ae=Symbol("Response internals"),$e=class r extends Le{constructor(t=null,n={}){super(t,n);let s=n.status!=null?n.status:200,i=new _e(n.headers);if(t!==null&&!i.has("Content-Type")){let c=tn(t,this);c&&i.append("Content-Type",c)}this[Ae]={type:"default",url:n.url,status:s,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Ae].type}get url(){return this[Ae].url||""}get status(){return this[Ae].status}get ok(){return this[Ae].status>=200&&this[Ae].status<300}get redirected(){return this[Ae].counter>0}get statusText(){return this[Ae].statusText}get headers(){return this[Ae].headers}get highWaterMark(){return this[Ae].highWaterMark}clone(){return new r(Pt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,n=302){if(!nn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(t).toString()},status:n})}static error(){let t=new r(null,{status:0,statusText:""});return t[Ae].type="error",t}static json(t=void 0,n={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let i=new _e(n&&n.headers);return i.has("content-type")||i.set("content-type","application/json"),new r(s,{...n,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties($e.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var xo=require("node:url"),$o=require("node:util");var yo=r=>{if(r.search)return r.search;let t=r.href.length-1,n=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-n.length]==="?"?"?":""};var wo=require("node:net");function So(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var _o=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Oo="strict-origin-when-cross-origin";function Eo(r){if(!_o.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function dd(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),n=(0,wo.isIP)(t);return n===4&&/^127\./.test(t)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function vt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:dd(r)}function ko(r,{referrerURLCallback:t,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,c=So(i),d=So(i,!0);c.toString().length>4096&&(c=d),t&&(c=t(c)),n&&(d=n(d));let b=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return d;case"unsafe-url":return c;case"strict-origin":return vt(c)&&!vt(b)?"no-referrer":d.toString();case"strict-origin-when-cross-origin":return c.origin===b.origin?c:vt(c)&&!vt(b)?"no-referrer":d;case"same-origin":return c.origin===b.origin?c:"no-referrer";case"origin-when-cross-origin":return c.origin===b.origin?c:d;case"no-referrer-when-downgrade":return vt(c)&&!vt(b)?"no-referrer":c;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Ro(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let s of t)s&&_o.has(s)&&(n=s);return n}var ne=Symbol("Request internals"),sr=r=>typeof r=="object"&&typeof r[ne]=="object",fd=(0,$o.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ft=class r extends Le{constructor(t,n={}){let s;if(sr(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let i=n.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!sr(n)&&"data"in n&&fd(),(n.body!=null||sr(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let c=n.body?n.body:sr(t)&&t.body!==null?Pt(t):null;super(c,{size:n.size||t.size||0});let d=new _e(n.headers||t.headers||{});if(c!==null&&!d.has("Content-Type")){let h=tn(c,this);h&&d.set("Content-Type",h)}let b=sr(t)?t.signal:null;if("signal"in n&&(b=n.signal),b!=null&&!oo(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?t.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let h=new URL(p);p=/^about:(\/\/)?client$/.test(h)?"client":h}else p=void 0;this[ne]={method:i,redirect:n.redirect||t.redirect||"follow",headers:d,parsedURL:s,signal:b,referrer:p},this.follow=n.follow===void 0?t.follow===void 0?20:t.follow:n.follow,this.compress=n.compress===void 0?t.compress===void 0?!0:t.compress:n.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent,this.highWaterMark=n.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||t.referrerPolicy||""}get method(){return this[ne].method}get url(){return(0,xo.format)(this[ne].parsedURL)}get headers(){return this[ne].headers}get redirect(){return this[ne].redirect}get signal(){return this[ne].signal}get referrer(){if(this[ne].referrer==="no-referrer")return"";if(this[ne].referrer==="client")return"about:client";if(this[ne].referrer)return this[ne].referrer.toString()}get referrerPolicy(){return this[ne].referrerPolicy}set referrerPolicy(t){this[ne].referrerPolicy=Eo(t)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ft.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var jo=r=>{let{parsedURL:t}=r[ne],n=new _e(r[ne].headers);n.has("Accept")||n.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let b=ho(r);typeof b=="number"&&!Number.isNaN(b)&&(s=String(b))}s&&n.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=Oo),r.referrer&&r.referrer!=="no-referrer"?r[ne].referrer=ko(r):r[ne].referrer="no-referrer",r[ne].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(t));let c=yo(t),d={path:t.pathname+c,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:d}};var an=class extends Ne{constructor(t,n="aborted"){super(t,n)}};Yr();ia();var pd=new Set(["data:","http:","https:"]);async function sn(r,t){return new Promise((n,s)=>{let i=new ft(r,t),{parsedURL:c,options:d}=jo(i);if(!pd.has(c.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if(c.protocol==="data:"){let _=Ks(i.url),R=new $e(_,{headers:{"Content-Type":_.typeFull}});n(R);return}let b=(c.protocol==="https:"?vo.default:Po.default).request,{signal:p}=i,h=null,y=()=>{let _=new an("The operation was aborted.");s(_),i.body&&i.body instanceof Oe.default.Readable&&i.body.destroy(_),!(!h||!h.body)&&h.body.emit("error",_)};if(p&&p.aborted){y();return}let O=()=>{y(),E()},k=b(c.toString(),d);p&&p.addEventListener("abort",O);let E=()=>{k.abort(),p&&p.removeEventListener("abort",O)};k.on("error",_=>{s(new be(`request to ${i.url} failed, reason: ${_.message}`,"system",_)),E()}),md(k,_=>{h&&h.body&&h.body.destroy(_)}),process.version<"v14"&&k.on("socket",_=>{let R;_.prependListener("end",()=>{R=_._eventsCount}),_.prependListener("close",j=>{if(h&&R<_._eventsCount&&!j){let T=new Error("Premature close");T.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",T)}})}),k.on("response",_=>{k.setTimeout(0);let R=go(_.rawHeaders);if(nn(_.statusCode)){let $=R.get("Location"),F=null;try{F=$===null?null:new URL($,i.url)}catch{if(i.redirect!=="manual"){s(new be(`uri requested responds with an invalid redirect URL: ${$}`,"invalid-redirect")),E();return}}switch(i.redirect){case"error":s(new be(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),E();return;case"manual":break;case"follow":{if(F===null)break;if(i.counter>=i.follow){s(new be(`maximum redirect reached at: ${i.url}`,"max-redirect")),E();return}let U={headers:new _e(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Pt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!io(i.url,F)||!co(i.url,F))for(let ee of["authorization","www-authenticate","cookie","cookie2"])U.headers.delete(ee);if(_.statusCode!==303&&i.body&&t.body instanceof Oe.default.Readable){s(new be("Cannot follow redirect with body being a readable stream","unsupported-redirect")),E();return}(_.statusCode===303||(_.statusCode===301||_.statusCode===302)&&i.method==="POST")&&(U.method="GET",U.body=void 0,U.headers.delete("content-length"));let ae=Ro(R);ae&&(U.referrerPolicy=ae),n(sn(new ft(F,U))),E();return}default:return s(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&_.once("end",()=>{p.removeEventListener("abort",O)});let j=(0,Oe.pipeline)(_,new Oe.PassThrough,$=>{$&&s($)});process.version<"v12.10"&&_.on("aborted",O);let T={url:i.url,status:_.statusCode,statusText:_.statusMessage,headers:R,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},W=R.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||W===null||_.statusCode===204||_.statusCode===304){h=new $e(j,T),n(h);return}let L={flush:pt.default.Z_SYNC_FLUSH,finishFlush:pt.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){j=(0,Oe.pipeline)(j,pt.default.createGunzip(L),$=>{$&&s($)}),h=new $e(j,T),n(h);return}if(W==="deflate"||W==="x-deflate"){let $=(0,Oe.pipeline)(_,new Oe.PassThrough,F=>{F&&s(F)});$.once("data",F=>{(F[0]&15)===8?j=(0,Oe.pipeline)(j,pt.default.createInflate(),U=>{U&&s(U)}):j=(0,Oe.pipeline)(j,pt.default.createInflateRaw(),U=>{U&&s(U)}),h=new $e(j,T),n(h)}),$.once("end",()=>{h||(h=new $e(j,T),n(h))});return}if(W==="br"){j=(0,Oe.pipeline)(j,pt.default.createBrotliDecompress(),$=>{$&&s($)}),h=new $e(j,T),n(h);return}h=new $e(j,T),n(h)}),bo(k,i).catch(s)})}function md(r,t){let n=or.Buffer.from(`0\r
\r
`),s=!1,i=!1,c;r.on("response",d=>{let{headers:b}=d;s=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),r.on("socket",d=>{let b=()=>{if(s&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},p=h=>{i=or.Buffer.compare(h.slice(-5),n)===0,!i&&c&&(i=or.Buffer.compare(c.slice(-3),n.slice(0,3))===0&&or.Buffer.compare(h.slice(-2),n.slice(3))===0),c=h};d.prependListener("close",b),d.on("data",p),r.on("close",()=>{d.removeListener("close",b),d.removeListener("data",p)})})}var fa;Zn.onAuthorize=({token:r})=>{Xt.headers={Authorization:`Bearer ${r}`},Xt.fetch=sn,fa=ta};var To=Ds(Zn);function V(){if(!fa)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:fa}}async function Co(){let{spotifyClient:r}=V();try{await r.putMePlayerPause()}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){let s=fe("pause");await se(s);return}throw console.log("pause.ts Error: ",n),new Error(n)}}var Ao=require("@raycast/api"),Tt=!1;async function Ct(){return Tt=!!(await(0,Ao.getApplications)()).find(n=>n.bundleId==="com.spotify.client"),Tt}async function on(){let{spotifyClient:r}=V();try{return await r.getMePlayerDevices()}catch(t){let n=C(t);throw console.log("getMyDevices.ts Error:",n),new Error(n)}}var At={album:"spotify:album:",artist:"spotify:artist:",playlist:"spotify:playlist:",track:"spotify:track:",show:"spotify:show:",episode:"spotify:episode:"};async function Uo({id:r,type:t,contextUri:n}={}){let{spotifyClient:s}=V(),{devices:i}=await on(),c=await Ct();try{let d=i?.find(p=>p.is_active);if(!d&&c){await Io({id:r,type:t});return}let b=d?.id??i?.[0]?.id??void 0;!t||!r?await s.putMePlayerPlay({context_uri:n},{deviceId:b}):t==="track"?n?await s.putMePlayerPlay({context_uri:n,offset:{uri:`${At.track}${r}`}},{deviceId:b}):await s.putMePlayerPlay({uris:[`${At.track}${r}`]},{deviceId:b}):t==="episode"?await s.putMePlayerPlay({uris:[`${At.episode}${r}`]},{deviceId:b}):await s.putMePlayerPlay({context_uri:`${At[t]}${r}`},{deviceId:b})}catch(d){let b=C(d);if(c&&(b?.toLocaleLowerCase().includes("no device found")||b?.toLocaleLowerCase().includes("no active device")||b?.toLocaleLowerCase().includes("restricted device")||b?.toLocaleLowerCase().includes("premium required"))){await Io({id:r,type:t});return}throw new Error(b)}}async function Io({id:r,type:t}){try{if(!t||!r){let n=fe("play");await se(n)}else if(t==="track"){let n=fe(`play track "${At[t]}${r}"`);await se(n)}else{let n=fe(`
        delay 1
        play track "${At[t]}${r}"`);await se(n)}}catch(n){let s=C(n);throw new Error(s)}}async function Mo(){let{spotifyClient:r}=V();try{await r.postMePlayerNext()}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){let s=fe("next track");await se(s);return}throw console.log("skipToNext.ts Error:",n),new Error(n)}}async function qo(){let{spotifyClient:r}=V();try{await r.postMePlayerPrevious()}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){let s=fe("previous track");await se(s);return}throw console.log("skipToPrevious.ts Error:",n),new Error(n)}}async function Do({trackIds:r,artistIds:t}){let{spotifyClient:n}=V();try{return await n.getRecommendations({seedTracks:r.join(),seedArtists:t?.join()})}catch(s){let i=C(s);throw console.log("getRecommendations.ts Error:",i),new Error(i)}}async function Bo({trackIds:r=[],artistIds:t=[]}={}){let{spotifyClient:n}=V();try{let i=(await Do({trackIds:r,artistIds:t}))?.tracks;if(i)try{await n.putMePlayerPlay({uris:i.flatMap(c=>c.uri)})}catch(c){let d=C(c);if(d?.toLocaleLowerCase().includes("no active device")||d?.toLocaleLowerCase().includes("restricted device")||d?.toLocaleLowerCase().includes("premium required")){let b=fe(`play track "${i[0].uri}"`);await Ls(b)}}}catch(s){let i=C(s);throw console.log("startRadio.ts Error:",i),new Error(i)}}async function Lo({trackIds:r}){let{spotifyClient:t}=V();try{return await t.deleteMeTracks(r.join())}catch(n){let s=C(n);throw console.log("removeFromMySavedTracks.ts Error:",s),new Error(s)}}async function zo({trackIds:r}){let{spotifyClient:t}=V();try{return await t.putMeTracks(r.join())}catch(n){let s=C(n);throw console.log("addToMySavedTracks.ts Error:",s),new Error(s)}}async function Wo(r,t){let{spotifyClient:n}=V();try{return await n.putMePlayer({device_ids:[r],play:t})}catch(s){let i=C(s);throw console.log("transferMyPlayback.ts Error:",i),new Error(i)}}async function Fo(){let{spotifyClient:r}=V();try{let t=await r.getMePlayerCurrentlyPlaying({additionalTypes:"episode"});return t?{...t,item:t.item}:void 0}catch(t){let n=C(t);throw console.log("getCurrentlyPlaying.ts Error:",n),new Error(n)}}function No({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Re(()=>Fo(),[],{execute:r?.execute!==!1});return{currentlyPlayingData:t,currentlyPlayingError:n,currentlyPlayingIsLoading:s,currentlyPlayingRevalidate:i}}function Qo({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Re(()=>on(),[],{execute:r?.execute!==!1});return{myDevicesData:t,myDevicesError:n,myDevicesIsLoading:s,myDevicesRevalidate:i}}var Vo=require("react");var Jo=To(({children:r})=>((0,Vo.useEffect)(()=>{Ct()},[]),r));async function Ho({limit:r=50}={}){let{spotifyClient:t}=V(),n=null,s=null;try{for(n=await t.getMePlaylists({limit:r}),s=n?.next;s;){let i=await t.getNext(s);n={...n,...i,items:[...n?.items??[],...i.items??[]]},s=i?.next}return n}catch(i){let c=C(i);throw console.log("getMyPlaylists.ts Error:",c),new Error(c)}}function Go({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Re(()=>Ho(),[],{execute:r?.execute!==!1});return{myPlaylistsData:t,myPlaylistsError:n,myPlaylistsIsLoading:s,myPlaylistsRevalidate:i}}async function Yo({playlistId:r,trackUris:t}){let{spotifyClient:n}=V();try{return await n.postPlaylistsByPlaylistIdTracks(r,{uris:t})}catch(s){let i=C(s);throw console.log("addToPlaylist.ts Error:",i),new Error(i)}}async function Ko({trackIds:r}){let{spotifyClient:t}=V();try{return await t.getMeTracksContains(r.join())}catch(n){let s=C(n);throw console.log("containsMySavedTracks.ts Error:",s),new Error(s)}}function Zo({trackIds:r,options:t}){let{data:n,error:s,isLoading:i,revalidate:c}=Re(d=>Ko({trackIds:d}),[r],{execute:t?.execute!==!1&&r.length>0});return{containsMySavedTracksData:n,containsMySavedTracksError:s,containsMySavedTracksIsLoading:i,containsMySavedTracksRevalidate:c}}async function Xo(){let{spotifyClient:r}=V();try{return await r.getMe()}catch(t){let n=C(t);throw console.log("getMe.ts Error:",n),new Error(n)}}function ei({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Re(()=>Xo(),[],{execute:r?.execute!==!1});return{meData:t,meError:n,meIsLoading:s,meRevalidate:i}}function hd(r){let t=r.toLowerCase().trim();if(r.charAt(0)==="("||r.charAt(0)==="["||t.startsWith("feat.")||t.startsWith("ft.")||t.startsWith("featuring"))return r;let n=r.indexOf("("),s=r.indexOf("["),i=r.indexOf(" - "),c=r.match(/(\s+|\()(feat\.|ft\.|featuring)(\s|\))/i),d=c?c.index:-1,b=Math.min(n!==-1?n:1/0,s!==-1?s:1/0,i!==-1?i:1/0,d!==-1?d:1/0);return b!==1/0?r.slice(0,b).trim():r}var ti=hd;function pa({name:r,artistName:t,hideArtistName:n,maxTextLength:s,cleanupTitle:i}){let c=s?Number(s):30;if(c===0||!r||!t)return"";let d=i?ti(r):r,b=n?d:`${d} \xB7 ${t}`;return b.length<=c?b:b.substring(0,c).trim()+"\u2026"}async function ri(){if(await Ct()){let n=await se(`
    if application "Spotify" is not running then
        return "Not running"
    end if
  
    property currentUri : "Unknown URI"
    property playerState : "stopped"
  
    tell application "Spotify"
        try
            set currentUri to id of the current track
            set playerState to player state as string
        end try
    end tell
  
    if playerState is "playing" then
        return currentUri
    else if playerState is "paused" then
        return currentUri & "(paused)"
    else
        return "Not playing"
    end if`);if(n==="Not running")return{state:"NOT_RUNNING",uri:void 0};if(n==="Not playing")return{state:"NOT_PLAYING",uri:void 0};{let s=n.includes("(paused)")?"PAUSED":"PLAYING",i=n.replace(" (paused)","");return{state:s,uri:i}}}}function ni({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Re(()=>ri(),[],{execute:r?.execute!==!1});return{spotifyAppData:t,spotifyAppDataError:n,spotifyAppDataIsLoading:s,spotifyAppDataRevalidate:i}}async function ma(r){let{spotifyClient:t}=V(),n=!1;try{let s=await t.getMePlayerCurrentlyPlaying({additionalTypes:"episode"});if(s){let i=s.item;return i.duration_ms&&r*1e3>i.duration_ms?(n=!0,await t.postMePlayerNext(),"next"):(await t.putMePlayerSeek(r*1e3),"position")}return"error"}catch(s){let i=C(s);if(i?.toLocaleLowerCase().includes("restricted device")||i?.toLocaleLowerCase().includes("premium required"))if(n){let c=fe("next track");return await se(c),"next"}else{let c=fe(`set player position to ${r}`);return await se(c),"position"}throw console.log("seek.ts Error:",i),new Error(i)}}var v=require("react/jsx-runtime");function bd({launchType:r}){let{hideArtistName:t,maxTextLength:n,iconType:s,cleanupTitle:i}=(0,S.getPreferenceValues)(),[c,d]=Gn("currentlyPlayingUri",void 0),b=ha.default.useRef(!1),{spotifyAppData:p,spotifyAppDataIsLoading:h,spotifyAppDataRevalidate:y}=ni(),{currentlyPlayingData:O,currentlyPlayingIsLoading:k,currentlyPlayingRevalidate:E}=No({options:{execute:b.current}}),{myDevicesData:_}=Qo({options:{execute:r===S.LaunchType.UserInitiated}}),{myPlaylistsData:R}=Go({options:{execute:r===S.LaunchType.UserInitiated}}),{meData:j}=ei({options:{execute:r===S.LaunchType.UserInitiated}}),{containsMySavedTracksData:T,containsMySavedTracksRevalidate:W}=Zo({trackIds:O?.item?.id?[O?.item?.id]:[],options:{execute:r===S.LaunchType.UserInitiated}});ha.default.useEffect(()=>{if(p?.state==="NOT_RUNNING"||p?.state==="NOT_PLAYING"){d(void 0),b.current=!1;return}c!==p?.uri&&(d(p?.uri),b.current=!0)},[c,b,p]);let L=p?.state==="PLAYING",$=T?.[0],F=O?.currently_playing_type!=="episode",U=Date.now(),ae=7200*1e3,ee=O?.timestamp&&U-O.timestamp>ae;if(p?.state==="NOT_RUNNING")return(0,v.jsx)(gd,{isLoading:h||k||k});if(ee&&!L||!O?.item)return(0,v.jsx)(yd,{isLoading:h||k||k});let{item:Ie}=O,{name:Ue,external_urls:Y,uri:G}=Ie,te="",ie="",q=null;if(F){let{artists:I,id:K,album:Z}=Ie,Me=I?.[0]?.name,et=I?.[0]?.id;te=pa({name:Ue,artistName:Me,hideArtistName:t,maxTextLength:n,cleanupTitle:i}),ie=Z?.images.slice(-1)[0]?.url||"",q=(0,v.jsxs)(v.Fragment,{children:[$&&(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.HeartDisabled,title:"Dislike",onAction:async()=>{try{await Lo({trackIds:K?[K]:[]}),await W()}catch(ue){let le=C(ue);(0,S.showHUD)(le)}}}),!$&&(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Heart,title:"Like",onAction:async()=>{try{await zo({trackIds:K?[K]:[]}),await W()}catch(ue){let le=C(ue);(0,S.showHUD)(le)}}}),(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Forward,title:"Next",onAction:async()=>{try{await Mo(),await E()}catch(ue){let le=C(ue);(0,S.showHUD)(le)}}}),(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Rewind,title:"Previous",onAction:async()=>{try{await qo(),await E()}catch(ue){let le=C(ue);(0,S.showHUD)(le)}}}),(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Music,title:"Start Radio",onAction:async()=>{try{await Bo({trackIds:K?[K]:[],artistIds:et?[et]:[]})}catch(ue){let le=C(ue);(0,S.showHUD)(le)}}})]})}else{let{show:I}=Ie,K=I.name;te=pa({name:Ue,artistName:K,hideArtistName:t,maxTextLength:n,cleanupTitle:i}),ie=I.images.slice(-1)[0]?.url||"",q=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.RotateClockwise,title:"Skip 15 seconds",onAction:async()=>{try{let Z=(O?.progress_ms||0)/1e3;await ma(Z+15),await E()}catch(Z){let Me=C(Z);(0,S.showHUD)(Me)}}}),(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.RotateAntiClockwise,title:"Back 15 seconds",onAction:async()=>{try{let Z=(O?.progress_ms||0)/1e3;await ma(Z-15),await E()}catch(Z){let Me=C(Z);(0,S.showHUD)(Me)}}})]})}return(0,v.jsxs)(S.MenuBarExtra,{isLoading:h||k||k,icon:s==="cover-image"&&ie?{source:ie,mask:S.Image.Mask.RoundedRectangle}:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},title:te,tooltip:te,children:[L&&(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Pause,title:"Pause",onAction:async()=>{try{await Co(),await y()}catch(I){let K=C(I);(0,S.showHUD)(K)}}}),!L&&(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Play,title:"Play",onAction:async()=>{try{await Uo(),await y()}catch(I){let K=C(I);(0,S.showHUD)(K)}}}),q,(0,v.jsx)(S.MenuBarExtra.Submenu,{icon:S.Icon.List,title:"Add to Playlist",children:R?.items?.filter(I=>I.owner?.id===j?.id).map(I=>I.name&&I.id&&(0,v.jsx)(S.MenuBarExtra.Item,{title:I.name,onAction:async()=>{try{await Yo({playlistId:I.id,trackUris:[G]}),(0,S.showHUD)(`Added to ${I.name}`)}catch(K){let Z=C(K);(0,S.showHUD)(Z)}}},I.id))}),_?.devices&&(0,v.jsx)(S.MenuBarExtra.Submenu,{icon:S.Icon.Mobile,title:"Connect Device",children:_?.devices?.filter(I=>!I.is_restricted).map(I=>(0,v.jsx)(S.MenuBarExtra.Item,{title:I.name,icon:I.is_active?{source:S.Icon.SpeakerOn,tintColor:S.Color.Green}:{source:S.Icon.SpeakerOff,tintColor:S.Color.SecondaryText},onAction:async()=>{if(I.id)try{await Wo(I.id,!!L)}catch(K){let Z=C(K);(0,S.showHUD)(Z)}await(0,S.showHUD)(`Connected to ${I.name}`)}},I.id))}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.ArrowsExpand,title:"Now Playing",onAction:()=>(0,S.launchCommand)({name:"nowPlaying",type:S.LaunchType.UserInitiated})})}),(0,v.jsxs)(S.MenuBarExtra.Section,{children:[(0,v.jsx)(S.MenuBarExtra.Item,{title:"Copy URL",icon:S.Icon.Link,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:async()=>{await S.Clipboard.copy({html:`<a href=${Y?.spotify}>${te}</a>`,text:Y?.spotify}),(0,S.showHUD)("Copied URL to clipboard")}}),(0,v.jsx)(S.MenuBarExtra.Item,{icon:"spotify-icon.svg",title:"Open on Spotify",shortcut:{modifiers:["cmd"],key:"o"},onAction:()=>Tt?(0,S.open)(G||"spotify"):(0,S.open)(Y?.spotify||"https://play.spotify.com")})]}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{modifiers:["cmd"],key:","},onAction:S.openCommandPreferences})})]})}function gd({isLoading:r}){return(0,S.getPreferenceValues)().hideIconWhenIdle?null:(0,v.jsxs)(S.MenuBarExtra,{icon:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},isLoading:r,children:[(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Spotify needs to be opened"})}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Open Spotify",icon:"spotify-icon.svg",onAction:()=>Tt?(0,S.open)("spotify:"):(0,S.open)("https://play.spotify.com")})}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{modifiers:["cmd"],key:","},onAction:S.openCommandPreferences})})]})}function yd({title:r="Nothing is playing right now",isLoading:t}){return(0,S.getPreferenceValues)().hideIconWhenIdle?null:(0,v.jsxs)(S.MenuBarExtra,{icon:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},isLoading:t,children:[(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:r})}),(0,v.jsxs)(S.MenuBarExtra.Section,{children:[(0,v.jsx)(S.MenuBarExtra.Item,{title:"Your library",icon:S.Icon.Book,onAction:()=>(0,S.launchCommand)({name:"yourLibrary",type:S.LaunchType.UserInitiated})}),(0,v.jsx)(S.MenuBarExtra.Item,{title:"Search",icon:S.Icon.MagnifyingGlass,onAction:()=>(0,S.launchCommand)({name:"search",type:S.LaunchType.UserInitiated})})]}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Open Spotify",icon:"spotify-icon.svg",onAction:()=>Tt?(0,S.open)("spotify:"):(0,S.open)("https://play.spotify.com")})}),(0,v.jsx)(S.MenuBarExtra.Section,{children:(0,v.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{modifiers:["cmd"],key:","},onAction:S.openCommandPreferences})})]})}function ai(r){return(0,v.jsx)(Jo,{children:(0,v.jsx)(bd,{...r})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
