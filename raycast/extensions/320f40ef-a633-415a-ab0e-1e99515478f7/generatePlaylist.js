"use strict";var Kc=Object.create;var en=Object.defineProperty;var Zc=Object.getOwnPropertyDescriptor;var Xc=Object.getOwnPropertyNames;var eu=Object.getPrototypeOf,tu=Object.prototype.hasOwnProperty;var sr=(r,t)=>()=>(r&&(t=r(r=0)),t);var it=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Zn=(r,t)=>{for(var n in t)en(r,n,{get:t[n],enumerable:!0})},Ns=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Xc(t))!tu.call(r,o)&&o!==n&&en(r,o,{get:()=>t[o],enumerable:!(s=Zc(t,o))||s.enumerable});return r};var te=(r,t,n)=>(n=r!=null?Kc(eu(r)):{},Ns(t||!r||!r.__esModule?en(n,"default",{value:r,enumerable:!0}):n,r)),ru=r=>Ns(en({},"__esModule",{value:!0}),r);var da=it(re=>{"use strict";var so=re&&re.__awaiter||function(r,t,n,s){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function h(g){try{b(s.next(g))}catch(_){l(_)}}function p(g){try{b(s.throw(g))}catch(_){l(_)}}function b(g){g.done?c(g.value):o(g.value).then(h,p)}b((s=s.apply(r,t||[])).next())})};Object.defineProperty(re,"__esModule",{value:!0});re.HttpError=re.optimistic=re.okify=re.ok=re.SUCCESS_CODES=re.handle=void 0;function Su(r,t){return so(this,void 0,void 0,function*(){let{status:n,data:s,headers:o}=yield r,c=t[n];if(c)return c(s);if(t.default)return t.default(n,s);throw new ir(n,s,o)})}re.handle=Su;re.SUCCESS_CODES=[200,201,202,204];function oo(r){return so(this,void 0,void 0,function*(){let t=yield r;if(re.SUCCESS_CODES.some(n=>n==t.status))return t.data;throw new ir(t.status,t.data,t.headers)})}re.ok=oo;function io(r){return(...t)=>oo(r(...t))}re.okify=io;function wu(r){let t={};return Object.entries(r).forEach(([n,s])=>{t[n]=typeof s=="function"?io(s):s}),t}re.optimistic=wu;var ir=class extends Error{constructor(t,n,s){super(`Error: ${t}`),this.status=t,this.data=n,this.headers=s}};re.HttpError=ir});var ha=it(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.joinUrl=ie.stripUndefined=ie.delimited=ie.encode=ie.allowReserved=ie.encodeReserved=void 0;ie.encodeReserved=[encodeURIComponent,encodeURIComponent];ie.allowReserved=[encodeURIComponent,encodeURI];function co(r,t=","){let n=(s,o)=>{let c=r[o%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(c).join(t):Object.entries(s).reduce((h,p)=>[...h,...p],[]).map(c).join(t):c(String(s))};return(s,...o)=>s.reduce((c,l,h)=>`${c}${l}${n(o[h],h)}`,"")}ie.encode=co;function Eu(r=","){return(t,n=ie.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,o])=>co(n,r)`${s}=${o}`).join("&")}ie.delimited=Eu;function Ru(r){return r&&JSON.parse(JSON.stringify(r))}ie.stripUndefined=Ru;function Tu(...r){return r.filter(Boolean).map((t,n)=>n===0?t:t.replace(/^\/+/,"")).map((t,n,s)=>n===s.length-1?t:t.replace(/\/+$/,"")).join("/")}ie.joinUrl=Tu});var ba=it(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.space=ae.pipe=ae.form=ae.json=ae.explode=ae.deep=ae.query=void 0;var Ue=ha();function xu(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}ae.query=xu;function $u(r,[t,n]=Ue.encodeReserved){let s=(0,Ue.encode)([l=>l,t]),o=(0,Ue.encode)([l=>l,n]),c=(l,h="")=>Object.entries(l).filter(([,p])=>p!==void 0).map(([p,b])=>{let g=Array.isArray(l)?"":p,_=h?s`${h}[${g}]`:p;return typeof b=="object"?c(b,_):o`${_}=${b}`}).join("&");return c(r)}ae.deep=$u;function uo(r,t=Ue.encodeReserved){let n=(0,Ue.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,o])=>Array.isArray(o)?o.map(c=>n`${s}=${c}`).join("&"):typeof o=="object"?uo(o,t):n`${s}=${o}`).join("&")}ae.explode=uo;function Pu(r,t=Ue.encodeReserved){let n=(0,Ue.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,o])=>{let c=JSON.stringify(o);return n`${s}=${c}`}).join("&")}ae.json=Pu;ae.form=(0,Ue.delimited)();ae.pipe=(0,Ue.delimited)("|");ae.space=(0,Ue.delimited)("%20")});var fo=it(de=>{"use strict";var ju=de&&de.__createBinding||(Object.create?(function(r,t,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(r,s,o)}):(function(r,t,n,s){s===void 0&&(s=n),r[s]=t[n]})),vu=de&&de.__setModuleDefault||(Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t}),Au=de&&de.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&ju(t,r,n);return vu(t,r),t},on=de&&de.__awaiter||function(r,t,n,s){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function h(g){try{b(s.next(g))}catch(_){l(_)}}function p(g){try{b(s.throw(g))}catch(_){l(_)}}function b(g){g.done?c(g.value):o(g.value).then(h,p)}b((s=s.apply(r,t||[])).next())})},cn=de&&de.__rest||function(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n};Object.defineProperty(de,"__esModule",{value:!0});de.runtime=void 0;var Cu=Au(ba()),lo=ha(),Iu=da();function Uu(r){function t(p,b){return on(this,void 0,void 0,function*(){let g=yield o(p,b),_;try{_=yield g.text()}catch{}return{status:g.status,headers:g.headers,contentType:g.headers.get("content-type"),data:_}})}function n(p,b={}){return on(this,void 0,void 0,function*(){let{status:g,headers:_,contentType:k,data:O}=yield t(p,Object.assign(Object.assign({},b),{headers:Object.assign({Accept:"application/json"},b.headers)}));return(k?k.includes("json"):!1)?{status:g,headers:_,data:O?JSON.parse(O):null}:{status:g,headers:_,data:O}})}function s(p,b={}){return on(this,void 0,void 0,function*(){let g=yield o(p,b),_;try{_=yield g.blob()}catch{}return{status:g.status,headers:g.headers,data:_}})}function o(p,b={}){return on(this,void 0,void 0,function*(){let g=Object.assign(Object.assign({},r),b),{baseUrl:_,headers:k,fetch:O}=g,w=cn(g,["baseUrl","headers","fetch"]),E=(0,lo.joinUrl)(_,p);return yield(O||fetch)(E,Object.assign(Object.assign({},w),{headers:(0,lo.stripUndefined)(Object.assign(Object.assign({},r.headers),k))}))})}function c(p){return p?.match(/\bjson\b/i)?p:"application/json"}function l(p){return p?.startsWith("application/x-www-form-urlencoded")?p:"application/x-www-form-urlencoded"}function h(p){return p?.startsWith("multipart/form-data")?p:"multipart/form-data"}return{ok:Iu.ok,fetchText:t,fetchJson:n,fetchBlob:s,json(p){var{body:b,headers:g}=p,_=cn(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},_),b!=null&&{body:JSON.stringify(b)}),{headers:Object.assign(Object.assign({},g),{"Content-Type":c(String(g?.["Content-Type"]))})})},form(p){var{body:b,headers:g}=p,_=cn(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},_),b!=null&&{body:Cu.form(b)}),{headers:Object.assign(Object.assign({},g),{"Content-Type":l(String(g?.["Content-Type"]))})})},multipart(p){var{body:b,headers:g}=p,_=cn(p,["body","headers"]);if(b==null)return _;let k=new(r.formDataConstructor||_.formDataConstructor||FormData),O=(w,E)=>{typeof E=="string"||E instanceof Blob?k.append(w,E):k.append(w,new Blob([JSON.stringify(E)],{type:"application/json"}))};return Object.entries(b).forEach(([w,E])=>{Array.isArray(E)?E.forEach($=>O(w,$)):O(w,E)}),Object.assign(Object.assign({},_),{body:k,headers:Object.assign(Object.assign({},g),{"Content-Type":h(String(g?.["Content-Type"]))})})}}}de.runtime=Uu});var go=it((un,bo)=>{(function(r,t){typeof un=="object"&&typeof bo<"u"?t(un):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(un,(function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let o=s();function c(e){return typeof e=="object"&&e!==null||typeof e=="function"}let l=n,h=Promise,p=Promise.prototype.then,b=Promise.resolve.bind(h),g=Promise.reject.bind(h);function _(e){return new h(e)}function k(e){return b(e)}function O(e){return g(e)}function w(e,a,i){return p.call(e,a,i)}function E(e,a,i){w(w(e,a,i),void 0,l)}function $(e,a){E(e,a)}function P(e,a){E(e,void 0,a)}function W(e,a,i){return w(e,a,i)}function F(e){w(e,void 0,l)}let T=(()=>{let e=o&&o.queueMicrotask;if(typeof e=="function")return e;let a=k(void 0);return i=>w(a,i)})();function z(e,a,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,i)}function C(e,a,i){try{return k(z(e,a,i))}catch(u){return O(u)}}let se=16384;class ee{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let i=this._back,u=i;i._elements.length===se-1&&(u={_elements:[],_next:void 0}),i._elements.push(a),u!==i&&(this._back=u,i._next=u),++this._size}shift(){let a=this._front,i=a,u=this._cursor,f=u+1,y=a._elements,S=y[u];return f===se&&(i=a._next,f=0),--this._size,this._cursor=f,a!==i&&(this._front=i),y[u]=void 0,S}forEach(a){let i=this._cursor,u=this._front,f=u._elements;for(;(i!==f.length||u._next!==void 0)&&!(i===f.length&&(u=u._next,f=u._elements,i=0,f.length===0));)a(f[i]),++i}peek(){let a=this._front,i=this._cursor;return a._elements[i]}}function gt(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?we(e):a._state==="closed"?M(e):Re(e,a._storedError)}function et(e,a){let i=e._ownerReadableStream;return Pe(i,a)}function G(e){e._ownerReadableStream._state==="readable"?me(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Dt(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function H(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function we(e){e._closedPromise=_((a,i)=>{e._closedPromise_resolve=a,e._closedPromise_reject=i})}function Re(e,a){we(e),me(e,a)}function M(e){we(e),yt(e)}function me(e,a){e._closedPromise_reject!==void 0&&(F(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Dt(e,a){Re(e,a)}function yt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let yr=t("[[AbortSteps]]"),Sr=t("[[ErrorSteps]]"),Bt=t("[[CancelSteps]]"),Wt=t("[[PullSteps]]"),wr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},kn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function En(e){return typeof e=="object"||typeof e=="function"}function Te(e,a){if(e!==void 0&&!En(e))throw new TypeError(`${a} is not an object.`)}function he(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function Rn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function _r(e,a){if(!Rn(e))throw new TypeError(`${a} is not an object.`)}function xe(e,a,i){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${i}'.`)}function Ft(e,a,i){if(e===void 0)throw new TypeError(`${a} is required in '${i}'.`)}function Tn(e){return Number(e)}function qa(e){return e===0?0:e}function vi(e){return qa(kn(e))}function Ma(e,a){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=qa(f),!wr(f))throw new TypeError(`${a} is not a finite number`);if(f=vi(f),f<0||f>u)throw new TypeError(`${a} is outside the accepted range of 0 to ${u}, inclusive`);return!wr(f)||f===0?0:f}function xn(e,a){if(!He(e))throw new TypeError(`${a} is not a ReadableStream.`)}function St(e){return new Nt(e)}function za(e,a){e._reader._readRequests.push(a)}function $n(e,a,i){let f=e._reader._readRequests.shift();i?f._closeSteps():f._chunkSteps(a)}function Or(e){return e._reader._readRequests.length}function La(e){let a=e._reader;return!(a===void 0||!Ne(a))}class Nt{constructor(a){if(xe(a,1,"ReadableStreamDefaultReader"),xn(a,"First parameter"),Ge(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");gt(this,a),this._readRequests=new ee}get closed(){return Ne(this)?this._closedPromise:O(kr("closed"))}cancel(a=void 0){return Ne(this)?this._ownerReadableStream===void 0?O(H("cancel")):et(this,a):O(kr("cancel"))}read(){if(!Ne(this))return O(kr("read"));if(this._ownerReadableStream===void 0)return O(H("read from"));let a,i,u=_((y,S)=>{a=y,i=S});return Qt(this,{_chunkSteps:y=>a({value:y,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:y=>i(y)}),u}releaseLock(){if(!Ne(this))throw kr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");G(this)}}}Object.defineProperties(Nt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ne(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Nt}function Qt(e,a){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?a._closeSteps():i._state==="errored"?a._errorSteps(i._storedError):i._readableStreamController[Wt](a)}function kr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Da=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ba{constructor(a,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=i}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let i=()=>this._returnSteps(a);return this._ongoingPromise?W(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return O(H("iterate"));let i,u,f=_((S,R)=>{i=S,u=R});return Qt(a,{_chunkSteps:S=>{this._ongoingPromise=void 0,T(()=>i({value:S,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,G(a),i({value:void 0,done:!0})},_errorSteps:S=>{this._ongoingPromise=void 0,this._isFinished=!0,G(a),u(S)}}),f}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return O(H("finish iterating"));if(!this._preventCancel){let u=et(i,a);return G(i),W(u,()=>({value:a,done:!0}))}return G(i),k({value:a,done:!0})}}let Wa={next(){return Fa(this)?this._asyncIteratorImpl.next():O(Na("next"))},return(e){return Fa(this)?this._asyncIteratorImpl.return(e):O(Na("return"))}};Da!==void 0&&Object.setPrototypeOf(Wa,Da);function Ai(e,a){let i=St(e),u=new Ba(i,a),f=Object.create(Wa);return f._asyncIteratorImpl=u,f}function Fa(e){if(!c(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ba}catch{return!1}}function Na(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Qa=Number.isNaN||function(e){return e!==e};function Vt(e){return e.slice()}function Va(e,a,i,u,f){new Uint8Array(e).set(new Uint8Array(i,u,f),a)}function Bd(e){return e}function Er(e){return!1}function Ja(e,a,i){if(e.slice)return e.slice(a,i);let u=i-a,f=new ArrayBuffer(u);return Va(f,0,e,a,u),f}function Ci(e){return!(typeof e!="number"||Qa(e)||e<0)}function Ha(e){let a=Ja(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Pn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function jn(e,a,i){if(!Ci(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:i}),e._queueTotalSize+=i}function Ii(e){return e._queue.peek().value}function Qe(e){e._queue=new ee,e._queueTotalSize=0}class Jt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!vn(this))throw Un("view");return this._view}respond(a){if(!vn(this))throw Un("respond");if(xe(a,1,"respond"),a=Ma(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Er(this._view.buffer),Pr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!vn(this))throw Un("respondWithNewView");if(xe(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Er(a.buffer),jr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Jt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class wt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!tt(this))throw Gt("byobRequest");return In(this)}get desiredSize(){if(!tt(this))throw Gt("desiredSize");return rs(this)}close(){if(!tt(this))throw Gt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);Ht(this)}enqueue(a){if(!tt(this))throw Gt("enqueue");if(xe(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);$r(this,a)}error(a=void 0){if(!tt(this))throw Gt("error");$e(this,a)}[Bt](a){Ga(this),Qe(this);let i=this._cancelAlgorithm(a);return xr(this),i}[Wt](a){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Xa(this);let y=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);a._chunkSteps(y);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(S){a._errorSteps(S);return}let y={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}za(i,a),rt(this)}}Object.defineProperties(wt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function tt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof wt}function vn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Jt}function rt(e){if(!zi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();E(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,rt(e))},u=>{$e(e,u)})}function Ga(e){Cn(e),e._pendingPullIntos=new ee}function An(e,a){let i=!1;e._state==="closed"&&(i=!0);let u=Ya(a);a.readerType==="default"?$n(e,u,i):Bi(e,u,i)}function Ya(e){let a=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/i)}function Rr(e,a,i,u){e._queue.push({buffer:a,byteOffset:i,byteLength:u}),e._queueTotalSize+=u}function Ka(e,a){let i=a.elementSize,u=a.bytesFilled-a.bytesFilled%i,f=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),y=a.bytesFilled+f,S=y-y%i,R=f,A=!1;S>u&&(R=S-a.bytesFilled,A=!0);let q=e._queue;for(;R>0;){let L=q.peek(),D=Math.min(R,L.byteLength),Y=a.byteOffset+a.bytesFilled;Va(a.buffer,Y,L.buffer,L.byteOffset,D),L.byteLength===D?q.shift():(L.byteOffset+=D,L.byteLength-=D),e._queueTotalSize-=D,Za(e,D,a),R-=D}return A}function Za(e,a,i){i.bytesFilled+=a}function Xa(e){e._queueTotalSize===0&&e._closeRequested?(xr(e),nr(e._controlledReadableByteStream)):rt(e)}function Cn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function es(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Ka(e,a)&&(Tr(e),An(e._controlledReadableByteStream,a))}}function Ui(e,a,i){let u=e._controlledReadableByteStream,f=1;a.constructor!==DataView&&(f=a.constructor.BYTES_PER_ELEMENT);let y=a.constructor,S=a.buffer,R={buffer:S,bufferByteLength:S.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:f,viewConstructor:y,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),ss(u,i);return}if(u._state==="closed"){let A=new y(R.buffer,R.byteOffset,0);i._closeSteps(A);return}if(e._queueTotalSize>0){if(Ka(e,R)){let A=Ya(R);Xa(e),i._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");$e(e,A),i._errorSteps(A);return}}e._pendingPullIntos.push(R),ss(u,i),rt(e)}function qi(e,a){let i=e._controlledReadableByteStream;if(qn(i))for(;os(i)>0;){let u=Tr(e);An(i,u)}}function Mi(e,a,i){if(Za(e,a,i),i.bytesFilled<i.elementSize)return;Tr(e);let u=i.bytesFilled%i.elementSize;if(u>0){let f=i.byteOffset+i.bytesFilled,y=Ja(i.buffer,f-u,f);Rr(e,y,0,y.byteLength)}i.bytesFilled-=u,An(e._controlledReadableByteStream,i),es(e)}function ts(e,a){let i=e._pendingPullIntos.peek();Cn(e),e._controlledReadableByteStream._state==="closed"?qi(e):Mi(e,a,i),rt(e)}function Tr(e){return e._pendingPullIntos.shift()}function zi(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(La(a)&&Or(a)>0||qn(a)&&os(a)>0||rs(e)>0)}function xr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ht(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw $e(e,u),u}xr(e),nr(a)}}function $r(e,a){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let u=a.buffer,f=a.byteOffset,y=a.byteLength,S=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Er(R.buffer),R.buffer=R.buffer}if(Cn(e),La(i))if(Or(i)===0)Rr(e,S,f,y);else{e._pendingPullIntos.length>0&&Tr(e);let R=new Uint8Array(S,f,y);$n(i,R,!1)}else qn(i)?(Rr(e,S,f,y),es(e)):Rr(e,S,f,y);rt(e)}function $e(e,a){let i=e._controlledReadableByteStream;i._state==="readable"&&(Ga(e),Qe(e),xr(e),js(i,a))}function In(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),i=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),u=Object.create(Jt.prototype);Di(u,e,i),e._byobRequest=u}return e._byobRequest}function rs(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Pr(e,a){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+a>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,ts(e,a)}function jr(e,a){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+a.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=a.byteLength;i.buffer=a.buffer,ts(e,f)}function ns(e,a,i,u,f,y,S){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Qe(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=y,a._pullAlgorithm=u,a._cancelAlgorithm=f,a._autoAllocateChunkSize=S,a._pendingPullIntos=new ee,e._readableStreamController=a;let R=i();E(k(R),()=>{a._started=!0,rt(a)},A=>{$e(a,A)})}function Li(e,a,i){let u=Object.create(wt.prototype),f=()=>{},y=()=>k(void 0),S=()=>k(void 0);a.start!==void 0&&(f=()=>a.start(u)),a.pull!==void 0&&(y=()=>a.pull(u)),a.cancel!==void 0&&(S=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ns(e,u,f,y,S,i,R)}function Di(e,a,i){e._associatedReadableByteStreamController=a,e._view=i}function Un(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Gt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function as(e){return new Yt(e)}function ss(e,a){e._reader._readIntoRequests.push(a)}function Bi(e,a,i){let f=e._reader._readIntoRequests.shift();i?f._closeSteps(a):f._chunkSteps(a)}function os(e){return e._reader._readIntoRequests.length}function qn(e){let a=e._reader;return!(a===void 0||!nt(a))}class Yt{constructor(a){if(xe(a,1,"ReadableStreamBYOBReader"),xn(a,"First parameter"),Ge(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!tt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");gt(this,a),this._readIntoRequests=new ee}get closed(){return nt(this)?this._closedPromise:O(vr("closed"))}cancel(a=void 0){return nt(this)?this._ownerReadableStream===void 0?O(H("cancel")):et(this,a):O(vr("cancel"))}read(a){if(!nt(this))return O(vr("read"));if(!ArrayBuffer.isView(a))return O(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return O(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return O(new TypeError("view's buffer must have non-zero byteLength"));if(Er(a.buffer),this._ownerReadableStream===void 0)return O(H("read from"));let i,u,f=_((S,R)=>{i=S,u=R});return is(this,a,{_chunkSteps:S=>i({value:S,done:!1}),_closeSteps:S=>i({value:S,done:!0}),_errorSteps:S=>u(S)}),f}releaseLock(){if(!nt(this))throw vr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");G(this)}}}Object.defineProperties(Yt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function nt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Yt}function is(e,a,i){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?i._errorSteps(u._storedError):Ui(u._readableStreamController,a,i)}function vr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Kt(e,a){let{highWaterMark:i}=e;if(i===void 0)return a;if(Qa(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function Ar(e){let{size:a}=e;return a||(()=>1)}function Cr(e,a){Te(e,a);let i=e?.highWaterMark,u=e?.size;return{highWaterMark:i===void 0?void 0:Tn(i),size:u===void 0?void 0:Wi(u,`${a} has member 'size' that`)}}function Wi(e,a){return he(e,a),i=>Tn(e(i))}function Fi(e,a){Te(e,a);let i=e?.abort,u=e?.close,f=e?.start,y=e?.type,S=e?.write;return{abort:i===void 0?void 0:Ni(i,e,`${a} has member 'abort' that`),close:u===void 0?void 0:Qi(u,e,`${a} has member 'close' that`),start:f===void 0?void 0:Vi(f,e,`${a} has member 'start' that`),write:S===void 0?void 0:Ji(S,e,`${a} has member 'write' that`),type:y}}function Ni(e,a,i){return he(e,i),u=>C(e,a,[u])}function Qi(e,a,i){return he(e,i),()=>C(e,a,[])}function Vi(e,a,i){return he(e,i),u=>z(e,a,[u])}function Ji(e,a,i){return he(e,i),(u,f)=>C(e,a,[u,f])}function cs(e,a){if(!_t(e))throw new TypeError(`${a} is not a WritableStream.`)}function Hi(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Gi=typeof AbortController=="function";function Yi(){if(Gi)return new AbortController}class Zt{constructor(a={},i={}){a===void 0?a=null:_r(a,"First parameter");let u=Cr(i,"Second parameter"),f=Fi(a,"First parameter");if(ls(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let S=Ar(u),R=Kt(u,1);lc(this,f,R,S)}get locked(){if(!_t(this))throw zr("locked");return Ot(this)}abort(a=void 0){return _t(this)?Ot(this)?O(new TypeError("Cannot abort a stream that already has a writer")):Ir(this,a):O(zr("abort"))}close(){return _t(this)?Ot(this)?O(new TypeError("Cannot close a stream that already has a writer")):Ce(this)?O(new TypeError("Cannot close an already-closing stream")):ds(this):O(zr("close"))}getWriter(){if(!_t(this))throw zr("getWriter");return us(this)}}Object.defineProperties(Zt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function us(e){return new Xt(e)}function Ki(e,a,i,u,f=1,y=()=>1){let S=Object.create(Zt.prototype);ls(S);let R=Object.create(kt.prototype);return gs(S,R,e,a,i,u,f,y),S}function ls(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ee,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function _t(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Zt}function Ot(e){return e._writer!==void 0}function Ir(e,a){var i;if(e._state==="closed"||e._state==="errored")return k(void 0);e._writableStreamController._abortReason=a,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let u=e._state;if(u==="closed"||u==="errored")return k(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,a=void 0);let y=_((S,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:S,_reject:R,_reason:a,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=y,f||zn(e,a),y}function ds(e){let a=e._state;if(a==="closed"||a==="errored")return O(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let i=_((f,y)=>{let S={_resolve:f,_reject:y};e._closeRequest=S}),u=e._writer;return u!==void 0&&e._backpressure&&a==="writable"&&Jn(u),dc(e._writableStreamController),i}function Zi(e){return _((i,u)=>{let f={_resolve:i,_reject:u};e._writeRequests.push(f)})}function Mn(e,a){if(e._state==="writable"){zn(e,a);return}Ln(e)}function zn(e,a){let i=e._writableStreamController;e._state="erroring",e._storedError=a;let u=e._writer;u!==void 0&&ps(u,a),!nc(e)&&i._started&&Ln(e)}function Ln(e){e._state="errored",e._writableStreamController[Sr]();let a=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(a)}),e._writeRequests=new ee,e._pendingAbortRequest===void 0){Ur(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(a),Ur(e);return}let u=e._writableStreamController[yr](i._reason);E(u,()=>{i._resolve(),Ur(e)},f=>{i._reject(f),Ur(e)})}function Xi(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ec(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,Mn(e,a)}function tc(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&_s(i)}function rc(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),Mn(e,a)}function Ce(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function nc(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function ac(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function sc(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ur(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Qn(a,e._storedError)}function Dn(e,a){let i=e._writer;i!==void 0&&a!==e._backpressure&&(a?yc(i):Jn(i)),e._backpressure=a}class Xt{constructor(a){if(xe(a,1,"WritableStreamDefaultWriter"),cs(a,"First parameter"),Ot(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let i=a._state;if(i==="writable")!Ce(a)&&a._backpressure?Dr(this):Os(this),Lr(this);else if(i==="erroring")Vn(this,a._storedError),Lr(this);else if(i==="closed")Os(this),bc(this);else{let u=a._storedError;Vn(this,u),ws(this,u)}}get closed(){return at(this)?this._closedPromise:O(st("closed"))}get desiredSize(){if(!at(this))throw st("desiredSize");if(this._ownerWritableStream===void 0)throw er("desiredSize");return uc(this)}get ready(){return at(this)?this._readyPromise:O(st("ready"))}abort(a=void 0){return at(this)?this._ownerWritableStream===void 0?O(er("abort")):oc(this,a):O(st("abort"))}close(){if(!at(this))return O(st("close"));let a=this._ownerWritableStream;return a===void 0?O(er("close")):Ce(a)?O(new TypeError("Cannot close an already-closing stream")):fs(this)}releaseLock(){if(!at(this))throw st("releaseLock");this._ownerWritableStream!==void 0&&ms(this)}write(a=void 0){return at(this)?this._ownerWritableStream===void 0?O(er("write to")):hs(this,a):O(st("write"))}}Object.defineProperties(Xt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function at(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Xt}function oc(e,a){let i=e._ownerWritableStream;return Ir(i,a)}function fs(e){let a=e._ownerWritableStream;return ds(a)}function ic(e){let a=e._ownerWritableStream,i=a._state;return Ce(a)||i==="closed"?k(void 0):i==="errored"?O(a._storedError):fs(e)}function cc(e,a){e._closedPromiseState==="pending"?Qn(e,a):gc(e,a)}function ps(e,a){e._readyPromiseState==="pending"?ks(e,a):Sc(e,a)}function uc(e){let a=e._ownerWritableStream,i=a._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:ys(a._writableStreamController)}function ms(e){let a=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ps(e,i),cc(e,i),a._writer=void 0,e._ownerWritableStream=void 0}function hs(e,a){let i=e._ownerWritableStream,u=i._writableStreamController,f=fc(u,a);if(i!==e._ownerWritableStream)return O(er("write to"));let y=i._state;if(y==="errored")return O(i._storedError);if(Ce(i)||y==="closed")return O(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return O(i._storedError);let S=Zi(i);return pc(u,a,f),S}let bs={};class kt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Bn(this))throw Nn("abortReason");return this._abortReason}get signal(){if(!Bn(this))throw Nn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!Bn(this))throw Nn("error");this._controlledWritableStream._state==="writable"&&Ss(this,a)}[yr](a){let i=this._abortAlgorithm(a);return qr(this),i}[Sr](){Qe(this)}}Object.defineProperties(kt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Bn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof kt}function gs(e,a,i,u,f,y,S,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Qe(a),a._abortReason=void 0,a._abortController=Yi(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=S,a._writeAlgorithm=u,a._closeAlgorithm=f,a._abortAlgorithm=y;let A=Fn(a);Dn(e,A);let q=i(),L=k(q);E(L,()=>{a._started=!0,Mr(a)},D=>{a._started=!0,Mn(e,D)})}function lc(e,a,i,u){let f=Object.create(kt.prototype),y=()=>{},S=()=>k(void 0),R=()=>k(void 0),A=()=>k(void 0);a.start!==void 0&&(y=()=>a.start(f)),a.write!==void 0&&(S=q=>a.write(q,f)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=q=>a.abort(q)),gs(e,f,y,S,R,A,i,u)}function qr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function dc(e){jn(e,bs,0),Mr(e)}function fc(e,a){try{return e._strategySizeAlgorithm(a)}catch(i){return Wn(e,i),1}}function ys(e){return e._strategyHWM-e._queueTotalSize}function pc(e,a,i){try{jn(e,a,i)}catch(f){Wn(e,f);return}let u=e._controlledWritableStream;if(!Ce(u)&&u._state==="writable"){let f=Fn(e);Dn(u,f)}Mr(e)}function Mr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){Ln(a);return}if(e._queue.length===0)return;let u=Ii(e);u===bs?mc(e):hc(e,u)}function Wn(e,a){e._controlledWritableStream._state==="writable"&&Ss(e,a)}function mc(e){let a=e._controlledWritableStream;ac(a),Pn(e);let i=e._closeAlgorithm();qr(e),E(i,()=>{tc(a)},u=>{rc(a,u)})}function hc(e,a){let i=e._controlledWritableStream;sc(i);let u=e._writeAlgorithm(a);E(u,()=>{Xi(i);let f=i._state;if(Pn(e),!Ce(i)&&f==="writable"){let y=Fn(e);Dn(i,y)}Mr(e)},f=>{i._state==="writable"&&qr(e),ec(i,f)})}function Fn(e){return ys(e)<=0}function Ss(e,a){let i=e._controlledWritableStream;qr(e),zn(i,a)}function zr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Nn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function st(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function er(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Lr(e){e._closedPromise=_((a,i)=>{e._closedPromise_resolve=a,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function ws(e,a){Lr(e),Qn(e,a)}function bc(e){Lr(e),_s(e)}function Qn(e,a){e._closedPromise_reject!==void 0&&(F(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function gc(e,a){ws(e,a)}function _s(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Dr(e){e._readyPromise=_((a,i)=>{e._readyPromise_resolve=a,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function Vn(e,a){Dr(e),ks(e,a)}function Os(e){Dr(e),Jn(e)}function ks(e,a){e._readyPromise_reject!==void 0&&(F(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function yc(e){Dr(e)}function Sc(e,a){Vn(e,a)}function Jn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Es=typeof DOMException<"u"?DOMException:void 0;function wc(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function _c(){let e=function(i,u){this.message=i||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Oc=wc(Es)?Es:_c();function Rs(e,a,i,u,f,y){let S=St(e),R=us(a);e._disturbed=!0;let A=!1,q=k(void 0);return _((L,D)=>{let Y;if(y!==void 0){if(Y=()=>{let x=new Oc("Aborted","AbortError"),I=[];u||I.push(()=>a._state==="writable"?Ir(a,x):k(void 0)),f||I.push(()=>e._state==="readable"?Pe(e,x):k(void 0)),le(()=>Promise.all(I.map(Q=>Q())),!0,x)},y.aborted){Y();return}y.addEventListener("abort",Y)}function je(){return _((x,I)=>{function Q(be){be?x():w(Tt(),Q,I)}Q(!1)})}function Tt(){return A?k(!0):w(R._readyPromise,()=>_((x,I)=>{Qt(S,{_chunkSteps:Q=>{q=w(hs(R,Q),void 0,n),x(!1)},_closeSteps:()=>x(!0),_errorSteps:I})}))}if(Le(e,S._closedPromise,x=>{u?_e(!0,x):le(()=>Ir(a,x),!0,x)}),Le(a,R._closedPromise,x=>{f?_e(!0,x):le(()=>Pe(e,x),!0,x)}),oe(e,S._closedPromise,()=>{i?_e():le(()=>ic(R))}),Ce(a)||a._state==="closed"){let x=new TypeError("the destination writable stream closed before all data could be piped to it");f?_e(!0,x):le(()=>Pe(e,x),!0,x)}F(je());function Ye(){let x=q;return w(q,()=>x!==q?Ye():void 0)}function Le(x,I,Q){x._state==="errored"?Q(x._storedError):P(I,Q)}function oe(x,I,Q){x._state==="closed"?Q():$(I,Q)}function le(x,I,Q){if(A)return;A=!0,a._state==="writable"&&!Ce(a)?$(Ye(),be):be();function be(){E(x(),()=>De(I,Q),xt=>De(!0,xt))}}function _e(x,I){A||(A=!0,a._state==="writable"&&!Ce(a)?$(Ye(),()=>De(x,I)):De(x,I))}function De(x,I){ms(R),G(S),y!==void 0&&y.removeEventListener("abort",Y),x?D(I):L(void 0)}})}class Et{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Br(this))throw Nr("desiredSize");return Hn(this)}close(){if(!Br(this))throw Nr("close");if(!Rt(this))throw new TypeError("The stream is not in a state that permits close");rr(this)}enqueue(a=void 0){if(!Br(this))throw Nr("enqueue");if(!Rt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Fr(this,a)}error(a=void 0){if(!Br(this))throw Nr("error");Ve(this,a)}[Bt](a){Qe(this);let i=this._cancelAlgorithm(a);return Wr(this),i}[Wt](a){let i=this._controlledReadableStream;if(this._queue.length>0){let u=Pn(this);this._closeRequested&&this._queue.length===0?(Wr(this),nr(i)):tr(this),a._chunkSteps(u)}else za(i,a),tr(this)}}Object.defineProperties(Et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Br(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Et}function tr(e){if(!Ts(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();E(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,tr(e))},u=>{Ve(e,u)})}function Ts(e){let a=e._controlledReadableStream;return!Rt(e)||!e._started?!1:!!(Ge(a)&&Or(a)>0||Hn(e)>0)}function Wr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function rr(e){if(!Rt(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Wr(e),nr(a))}function Fr(e,a){if(!Rt(e))return;let i=e._controlledReadableStream;if(Ge(i)&&Or(i)>0)$n(i,a,!1);else{let u;try{u=e._strategySizeAlgorithm(a)}catch(f){throw Ve(e,f),f}try{jn(e,a,u)}catch(f){throw Ve(e,f),f}}tr(e)}function Ve(e,a){let i=e._controlledReadableStream;i._state==="readable"&&(Qe(e),Wr(e),js(i,a))}function Hn(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function kc(e){return!Ts(e)}function Rt(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function xs(e,a,i,u,f,y,S){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,Qe(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=S,a._strategyHWM=y,a._pullAlgorithm=u,a._cancelAlgorithm=f,e._readableStreamController=a;let R=i();E(k(R),()=>{a._started=!0,tr(a)},A=>{Ve(a,A)})}function Ec(e,a,i,u){let f=Object.create(Et.prototype),y=()=>{},S=()=>k(void 0),R=()=>k(void 0);a.start!==void 0&&(y=()=>a.start(f)),a.pull!==void 0&&(S=()=>a.pull(f)),a.cancel!==void 0&&(R=A=>a.cancel(A)),xs(e,f,y,S,R,i,u)}function Nr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Rc(e,a){return tt(e._readableStreamController)?xc(e):Tc(e)}function Tc(e,a){let i=St(e),u=!1,f=!1,y=!1,S=!1,R,A,q,L,D,Y=_(oe=>{D=oe});function je(){return u?(f=!0,k(void 0)):(u=!0,Qt(i,{_chunkSteps:le=>{T(()=>{f=!1;let _e=le,De=le;y||Fr(q._readableStreamController,_e),S||Fr(L._readableStreamController,De),u=!1,f&&je()})},_closeSteps:()=>{u=!1,y||rr(q._readableStreamController),S||rr(L._readableStreamController),(!y||!S)&&D(void 0)},_errorSteps:()=>{u=!1}}),k(void 0))}function Tt(oe){if(y=!0,R=oe,S){let le=Vt([R,A]),_e=Pe(e,le);D(_e)}return Y}function Ye(oe){if(S=!0,A=oe,y){let le=Vt([R,A]),_e=Pe(e,le);D(_e)}return Y}function Le(){}return q=Gn(Le,je,Tt),L=Gn(Le,je,Ye),P(i._closedPromise,oe=>{Ve(q._readableStreamController,oe),Ve(L._readableStreamController,oe),(!y||!S)&&D(void 0)}),[q,L]}function xc(e){let a=St(e),i=!1,u=!1,f=!1,y=!1,S=!1,R,A,q,L,D,Y=_(x=>{D=x});function je(x){P(x._closedPromise,I=>{x===a&&($e(q._readableStreamController,I),$e(L._readableStreamController,I),(!y||!S)&&D(void 0))})}function Tt(){nt(a)&&(G(a),a=St(e),je(a)),Qt(a,{_chunkSteps:I=>{T(()=>{u=!1,f=!1;let Q=I,be=I;if(!y&&!S)try{be=Ha(I)}catch(xt){$e(q._readableStreamController,xt),$e(L._readableStreamController,xt),D(Pe(e,xt));return}y||$r(q._readableStreamController,Q),S||$r(L._readableStreamController,be),i=!1,u?Le():f&&oe()})},_closeSteps:()=>{i=!1,y||Ht(q._readableStreamController),S||Ht(L._readableStreamController),q._readableStreamController._pendingPullIntos.length>0&&Pr(q._readableStreamController,0),L._readableStreamController._pendingPullIntos.length>0&&Pr(L._readableStreamController,0),(!y||!S)&&D(void 0)},_errorSteps:()=>{i=!1}})}function Ye(x,I){Ne(a)&&(G(a),a=as(e),je(a));let Q=I?L:q,be=I?q:L;is(a,x,{_chunkSteps:$t=>{T(()=>{u=!1,f=!1;let Pt=I?S:y;if(I?y:S)Pt||jr(Q._readableStreamController,$t);else{let Fs;try{Fs=Ha($t)}catch(Kn){$e(Q._readableStreamController,Kn),$e(be._readableStreamController,Kn),D(Pe(e,Kn));return}Pt||jr(Q._readableStreamController,$t),$r(be._readableStreamController,Fs)}i=!1,u?Le():f&&oe()})},_closeSteps:$t=>{i=!1;let Pt=I?S:y,Xr=I?y:S;Pt||Ht(Q._readableStreamController),Xr||Ht(be._readableStreamController),$t!==void 0&&(Pt||jr(Q._readableStreamController,$t),!Xr&&be._readableStreamController._pendingPullIntos.length>0&&Pr(be._readableStreamController,0)),(!Pt||!Xr)&&D(void 0)},_errorSteps:()=>{i=!1}})}function Le(){if(i)return u=!0,k(void 0);i=!0;let x=In(q._readableStreamController);return x===null?Tt():Ye(x._view,!1),k(void 0)}function oe(){if(i)return f=!0,k(void 0);i=!0;let x=In(L._readableStreamController);return x===null?Tt():Ye(x._view,!0),k(void 0)}function le(x){if(y=!0,R=x,S){let I=Vt([R,A]),Q=Pe(e,I);D(Q)}return Y}function _e(x){if(S=!0,A=x,y){let I=Vt([R,A]),Q=Pe(e,I);D(Q)}return Y}function De(){}return q=Ps(De,Le,le),L=Ps(De,oe,_e),je(a),[q,L]}function $c(e,a){Te(e,a);let i=e,u=i?.autoAllocateChunkSize,f=i?.cancel,y=i?.pull,S=i?.start,R=i?.type;return{autoAllocateChunkSize:u===void 0?void 0:Ma(u,`${a} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:Pc(f,i,`${a} has member 'cancel' that`),pull:y===void 0?void 0:jc(y,i,`${a} has member 'pull' that`),start:S===void 0?void 0:vc(S,i,`${a} has member 'start' that`),type:R===void 0?void 0:Ac(R,`${a} has member 'type' that`)}}function Pc(e,a,i){return he(e,i),u=>C(e,a,[u])}function jc(e,a,i){return he(e,i),u=>C(e,a,[u])}function vc(e,a,i){return he(e,i),u=>z(e,a,[u])}function Ac(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Cc(e,a){Te(e,a);let i=e?.mode;return{mode:i===void 0?void 0:Ic(i,`${a} has member 'mode' that`)}}function Ic(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Uc(e,a){return Te(e,a),{preventCancel:!!e?.preventCancel}}function $s(e,a){Te(e,a);let i=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,y=e?.signal;return y!==void 0&&qc(y,`${a} has member 'signal' that`),{preventAbort:!!i,preventCancel:!!u,preventClose:!!f,signal:y}}function qc(e,a){if(!Hi(e))throw new TypeError(`${a} is not an AbortSignal.`)}function Mc(e,a){Te(e,a);let i=e?.readable;Ft(i,"readable","ReadableWritablePair"),xn(i,`${a} has member 'readable' that`);let u=e?.writable;return Ft(u,"writable","ReadableWritablePair"),cs(u,`${a} has member 'writable' that`),{readable:i,writable:u}}class Je{constructor(a={},i={}){a===void 0?a=null:_r(a,"First parameter");let u=Cr(i,"Second parameter"),f=$c(a,"First parameter");if(Yn(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=Kt(u,0);Li(this,f,y)}else{let y=Ar(u),S=Kt(u,1);Ec(this,f,S,y)}}get locked(){if(!He(this))throw ot("locked");return Ge(this)}cancel(a=void 0){return He(this)?Ge(this)?O(new TypeError("Cannot cancel a stream that already has a reader")):Pe(this,a):O(ot("cancel"))}getReader(a=void 0){if(!He(this))throw ot("getReader");return Cc(a,"First parameter").mode===void 0?St(this):as(this)}pipeThrough(a,i={}){if(!He(this))throw ot("pipeThrough");xe(a,1,"pipeThrough");let u=Mc(a,"First parameter"),f=$s(i,"Second parameter");if(Ge(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ot(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=Rs(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return F(y),u.readable}pipeTo(a,i={}){if(!He(this))return O(ot("pipeTo"));if(a===void 0)return O("Parameter 1 is required in 'pipeTo'.");if(!_t(a))return O(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=$s(i,"Second parameter")}catch(f){return O(f)}return Ge(this)?O(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ot(a)?O(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Rs(this,a,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!He(this))throw ot("tee");let a=Rc(this);return Vt(a)}values(a=void 0){if(!He(this))throw ot("values");let i=Uc(a,"First parameter");return Ai(this,i.preventCancel)}}Object.defineProperties(Je.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Je.prototype,t.asyncIterator,{value:Je.prototype.values,writable:!0,configurable:!0});function Gn(e,a,i,u=1,f=()=>1){let y=Object.create(Je.prototype);Yn(y);let S=Object.create(Et.prototype);return xs(y,S,e,a,i,u,f),y}function Ps(e,a,i){let u=Object.create(Je.prototype);Yn(u);let f=Object.create(wt.prototype);return ns(u,f,e,a,i,0,void 0),u}function Yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function He(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Je}function Ge(e){return e._reader!==void 0}function Pe(e,a){if(e._disturbed=!0,e._state==="closed")return k(void 0);if(e._state==="errored")return O(e._storedError);nr(e);let i=e._reader;i!==void 0&&nt(i)&&(i._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),i._readIntoRequests=new ee);let u=e._readableStreamController[Bt](a);return W(u,n)}function nr(e){e._state="closed";let a=e._reader;a!==void 0&&(yt(a),Ne(a)&&(a._readRequests.forEach(i=>{i._closeSteps()}),a._readRequests=new ee))}function js(e,a){e._state="errored",e._storedError=a;let i=e._reader;i!==void 0&&(me(i,a),Ne(i)?(i._readRequests.forEach(u=>{u._errorSteps(a)}),i._readRequests=new ee):(i._readIntoRequests.forEach(u=>{u._errorSteps(a)}),i._readIntoRequests=new ee))}function ot(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function vs(e,a){Te(e,a);let i=e?.highWaterMark;return Ft(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Tn(i)}}let As=e=>e.byteLength;try{Object.defineProperty(As,"name",{value:"size",configurable:!0})}catch{}class Qr{constructor(a){xe(a,1,"ByteLengthQueuingStrategy"),a=vs(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Is(this))throw Cs("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Is(this))throw Cs("size");return As}}Object.defineProperties(Qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Cs(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Is(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Qr}let Us=()=>1;try{Object.defineProperty(Us,"name",{value:"size",configurable:!0})}catch{}class Vr{constructor(a){xe(a,1,"CountQueuingStrategy"),a=vs(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Ms(this))throw qs("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ms(this))throw qs("size");return Us}}Object.defineProperties(Vr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Vr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function qs(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ms(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Vr}function zc(e,a){Te(e,a);let i=e?.flush,u=e?.readableType,f=e?.start,y=e?.transform,S=e?.writableType;return{flush:i===void 0?void 0:Lc(i,e,`${a} has member 'flush' that`),readableType:u,start:f===void 0?void 0:Dc(f,e,`${a} has member 'start' that`),transform:y===void 0?void 0:Bc(y,e,`${a} has member 'transform' that`),writableType:S}}function Lc(e,a,i){return he(e,i),u=>C(e,a,[u])}function Dc(e,a,i){return he(e,i),u=>z(e,a,[u])}function Bc(e,a,i){return he(e,i),(u,f)=>C(e,a,[u,f])}class Jr{constructor(a={},i={},u={}){a===void 0&&(a=null);let f=Cr(i,"Second parameter"),y=Cr(u,"Third parameter"),S=zc(a,"First parameter");if(S.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(S.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Kt(y,0),A=Ar(y),q=Kt(f,1),L=Ar(f),D,Y=_(je=>{D=je});Wc(this,Y,q,L,R,A),Nc(this,S),S.start!==void 0?D(S.start(this._transformStreamController)):D(void 0)}get readable(){if(!zs(this))throw Ws("readable");return this._readable}get writable(){if(!zs(this))throw Ws("writable");return this._writable}}Object.defineProperties(Jr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Jr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Wc(e,a,i,u,f,y){function S(){return a}function R(Y){return Jc(e,Y)}function A(Y){return Hc(e,Y)}function q(){return Gc(e)}e._writable=Ki(S,R,q,A,i,u);function L(){return Yc(e)}function D(Y){return Gr(e,Y),k(void 0)}e._readable=Gn(S,L,D,f,y),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Yr(e,!0),e._transformStreamController=void 0}function zs(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Jr}function Hr(e,a){Ve(e._readable._readableStreamController,a),Gr(e,a)}function Gr(e,a){Ls(e._transformStreamController),Wn(e._writable._writableStreamController,a),e._backpressure&&Yr(e,!1)}function Yr(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=a}class ar{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Kr(this))throw Zr("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return Hn(a)}enqueue(a=void 0){if(!Kr(this))throw Zr("enqueue");Ds(this,a)}error(a=void 0){if(!Kr(this))throw Zr("error");Qc(this,a)}terminate(){if(!Kr(this))throw Zr("terminate");Vc(this)}}Object.defineProperties(ar.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Kr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof ar}function Fc(e,a,i,u){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=i,a._flushAlgorithm=u}function Nc(e,a){let i=Object.create(ar.prototype),u=y=>{try{return Ds(i,y),k(void 0)}catch(S){return O(S)}},f=()=>k(void 0);a.transform!==void 0&&(u=y=>a.transform(y,i)),a.flush!==void 0&&(f=()=>a.flush(i)),Fc(e,i,u,f)}function Ls(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ds(e,a){let i=e._controlledTransformStream,u=i._readable._readableStreamController;if(!Rt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Fr(u,a)}catch(y){throw Gr(i,y),i._readable._storedError}kc(u)!==i._backpressure&&Yr(i,!0)}function Qc(e,a){Hr(e._controlledTransformStream,a)}function Bs(e,a){let i=e._transformAlgorithm(a);return W(i,void 0,u=>{throw Hr(e._controlledTransformStream,u),u})}function Vc(e){let a=e._controlledTransformStream,i=a._readable._readableStreamController;rr(i);let u=new TypeError("TransformStream terminated");Gr(a,u)}function Jc(e,a){let i=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return W(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Bs(i,a)})}return Bs(i,a)}function Hc(e,a){return Hr(e,a),k(void 0)}function Gc(e){let a=e._readable,i=e._transformStreamController,u=i._flushAlgorithm();return Ls(i),W(u,()=>{if(a._state==="errored")throw a._storedError;rr(a._readableStreamController)},f=>{throw Hr(e,f),a._storedError})}function Yc(e){return Yr(e,!1),e._backpressureChangePromise}function Zr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ws(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Qr,r.CountQueuingStrategy=Vr,r.ReadableByteStreamController=wt,r.ReadableStream=Je,r.ReadableStreamBYOBReader=Yt,r.ReadableStreamBYOBRequest=Jt,r.ReadableStreamDefaultController=Et,r.ReadableStreamDefaultReader=Nt,r.TransformStream=Jr,r.TransformStreamDefaultController=ar,r.WritableStream=Zt,r.WritableStreamDefaultController=kt,r.WritableStreamDefaultWriter=Xt,Object.defineProperty(r,"__esModule",{value:!0})}))});var yo=it(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(n){throw r.emitWarning=t,n}}catch{Object.assign(globalThis,go())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let s=0,o=this;return new ReadableStream({type:"bytes",async pull(c){let h=await o.slice(s,Math.min(o.size,s+65536)).arrayBuffer();s+=h.byteLength,c.enqueue(new Uint8Array(h)),s===o.size&&c.close()}})})}catch{}});async function*ya(r,t=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let s=n.byteOffset,o=n.byteOffset+n.byteLength;for(;s!==o;){let c=Math.min(o-s,So),l=n.buffer.slice(s,s+c);s+=l.byteLength,yield new Uint8Array(l)}}else yield n;else{let s=0,o=n;for(;s!==o.size;){let l=await o.slice(s,Math.min(o.size,s+So)).arrayBuffer();s+=l.byteLength,yield new Uint8Array(l)}}}var rf,So,wo,Sd,Be,ur=sr(()=>{rf=te(yo(),1);So=65536;wo=class Sa{#t=[];#r="";#e=0;#s="transparent";constructor(t=[],n={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let s=new TextEncoder;for(let c of t){let l;ArrayBuffer.isView(c)?l=new Uint8Array(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)):c instanceof ArrayBuffer?l=new Uint8Array(c.slice(0)):c instanceof Sa?l=c:l=s.encode(`${c}`),this.#e+=ArrayBuffer.isView(l)?l.byteLength:l.size,this.#t.push(l)}this.#s=`${n.endings===void 0?"transparent":n.endings}`;let o=n.type===void 0?"":String(n.type);this.#r=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#e}get type(){return this.#r}async text(){let t=new TextDecoder,n="";for await(let s of ya(this.#t,!1))n+=t.decode(s,{stream:!0});return n+=t.decode(),n}async arrayBuffer(){let t=new Uint8Array(this.size),n=0;for await(let s of ya(this.#t,!1))t.set(s,n),n+=s.length;return t.buffer}stream(){let t=ya(this.#t,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let s=await t.next();s.done?n.close():n.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,n=this.size,s=""){let{size:o}=this,c=t<0?Math.max(o+t,0):Math.min(t,o),l=n<0?Math.max(o+n,0):Math.min(n,o),h=Math.max(l-c,0),p=this.#t,b=[],g=0;for(let k of p){if(g>=h)break;let O=ArrayBuffer.isView(k)?k.byteLength:k.size;if(c&&O<=c)c-=O,l-=O;else{let w;ArrayBuffer.isView(k)?(w=k.subarray(c,Math.min(O,l)),g+=w.byteLength):(w=k.slice(c,Math.min(O,l)),g+=w.size),l-=O,b.push(w),c=0}}let _=new Sa([],{type:String(s).toLowerCase()});return _.#e=h,_.#t=b,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(wo.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Sd=wo,Be=Sd});var wd,_d,It,wa=sr(()=>{ur();wd=class extends Be{#t=0;#r="";constructor(t,n,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let o=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(o)||(this.#t=o),this.#r=String(n)}get name(){return this.#r}get lastModified(){return this.#t}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Be&&/^(File)$/.test(t[Symbol.toStringTag])}},_d=wd,It=_d});function ko(r,t=Be){var n=`${_o()}${_o()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],o=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((c,l)=>typeof c=="string"?s.push(o+_a(l)+`"\r
\r
${c.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(o+_a(l)+`"; filename="${_a(c.name,1)}"\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,c,`\r
`)),s.push(`--${n}--`),new t(s,{type:"multipart/form-data; boundary="+n})}var lr,Od,kd,_o,Ed,Oo,_a,lt,dt,ln=sr(()=>{ur();wa();({toStringTag:lr,iterator:Od,hasInstance:kd}=Symbol),_o=Math.random,Ed="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Oo=(r,t,n)=>(r+="",/^(Blob|File)$/.test(t&&t[lr])?[(n=n!==void 0?n+"":t[lr]=="File"?t.name:"blob",r),t.name!==n||t[lr]=="blob"?new It([t],n,t):t]:[r,t+""]),_a=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),lt=(r,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)},dt=class{#t=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[lr](){return"FormData"}[Od](){return this.entries()}static[kd](t){return t&&typeof t=="object"&&t[lr]==="FormData"&&!Ed.some(n=>typeof t[n]!="function")}append(...t){lt("append",arguments,2),this.#t.push(Oo(...t))}delete(t){lt("delete",arguments,1),t+="",this.#t=this.#t.filter(([n])=>n!==t)}get(t){lt("get",arguments,1),t+="";for(var n=this.#t,s=n.length,o=0;o<s;o++)if(n[o][0]===t)return n[o][1];return null}getAll(t,n){return lt("getAll",arguments,1),n=[],t+="",this.#t.forEach(s=>s[0]===t&&n.push(s[1])),n}has(t){return lt("has",arguments,1),t+="",this.#t.some(n=>n[0]===t)}forEach(t,n){lt("forEach",arguments,1);for(var[s,o]of this)t.call(n,o,s,this)}set(...t){lt("set",arguments,2);var n=[],s=!0;t=Oo(...t),this.#t.forEach(o=>{o[0]===t[0]?s&&(s=!n.push(t)):n.push(o)}),s&&n.push(t),this.#t=n}*entries(){yield*this.#t}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var $o=it((bf,xo)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}xo.exports=globalThis.DOMException});var fn,Rd,Sf,ka=sr(()=>{fn=require("node:fs"),Rd=te($o(),1);wa();ur();({stat:Sf}=fn.promises)});var jo={};Zn(jo,{toFormData:()=>Ad});function vd(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let n=t[2]||t[3]||"",s=n.slice(n.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(o,c)=>String.fromCharCode(c)),s}async function Ad(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new Ea(n[1]||n[2]),o,c,l,h,p,b,g=[],_=new dt,k=P=>{l+=$.decode(P,{stream:!0})},O=P=>{g.push(P)},w=()=>{let P=new It(g,b,{type:p});_.append(h,P)},E=()=>{_.append(h,l)},$=new TextDecoder("utf-8");$.decode(),s.onPartBegin=function(){s.onPartData=k,s.onPartEnd=E,o="",c="",l="",h="",p="",b=null,g.length=0},s.onHeaderField=function(P){o+=$.decode(P,{stream:!0})},s.onHeaderValue=function(P){c+=$.decode(P,{stream:!0})},s.onHeaderEnd=function(){if(c+=$.decode(),o=o.toLowerCase(),o==="content-disposition"){let P=c.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);P&&(h=P[2]||P[3]||""),b=vd(c),b&&(s.onPartData=O,s.onPartEnd=w)}else o==="content-type"&&(p=c);c="",o=""};for await(let P of r)s.write(P);return s.end(),_}var qe,V,Po,Ze,pn,mn,Td,fr,xd,$d,Pd,jd,ft,Ea,vo=sr(()=>{ka();ln();qe=0,V={START_BOUNDARY:qe++,HEADER_FIELD_START:qe++,HEADER_FIELD:qe++,HEADER_VALUE_START:qe++,HEADER_VALUE:qe++,HEADER_VALUE_ALMOST_DONE:qe++,HEADERS_ALMOST_DONE:qe++,PART_DATA_START:qe++,PART_DATA:qe++,END:qe++},Po=1,Ze={PART_BOUNDARY:Po,LAST_BOUNDARY:Po*=2},pn=10,mn=13,Td=32,fr=45,xd=58,$d=97,Pd=122,jd=r=>r|32,ft=()=>{},Ea=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=ft,this.onHeaderField=ft,this.onHeadersEnd=ft,this.onHeaderValue=ft,this.onPartBegin=ft,this.onPartData=ft,this.onPartEnd=ft,this.boundaryChars={},t=`\r
--`+t;let n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s),this.boundaryChars[n[s]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=V.START_BOUNDARY}write(t){let n=0,s=t.length,o=this.index,{lookbehind:c,boundary:l,boundaryChars:h,index:p,state:b,flags:g}=this,_=this.boundary.length,k=_-1,O=t.length,w,E,$=T=>{this[T+"Mark"]=n},P=T=>{delete this[T+"Mark"]},W=(T,z,C,se)=>{(z===void 0||z!==C)&&this[T](se&&se.subarray(z,C))},F=(T,z)=>{let C=T+"Mark";C in this&&(z?(W(T,this[C],n,t),delete this[C]):(W(T,this[C],t.length,t),this[C]=0))};for(n=0;n<s;n++)switch(w=t[n],b){case V.START_BOUNDARY:if(p===l.length-2){if(w===fr)g|=Ze.LAST_BOUNDARY;else if(w!==mn)return;p++;break}else if(p-1===l.length-2){if(g&Ze.LAST_BOUNDARY&&w===fr)b=V.END,g=0;else if(!(g&Ze.LAST_BOUNDARY)&&w===pn)p=0,W("onPartBegin"),b=V.HEADER_FIELD_START;else return;break}w!==l[p+2]&&(p=-2),w===l[p+2]&&p++;break;case V.HEADER_FIELD_START:b=V.HEADER_FIELD,$("onHeaderField"),p=0;case V.HEADER_FIELD:if(w===mn){P("onHeaderField"),b=V.HEADERS_ALMOST_DONE;break}if(p++,w===fr)break;if(w===xd){if(p===1)return;F("onHeaderField",!0),b=V.HEADER_VALUE_START;break}if(E=jd(w),E<$d||E>Pd)return;break;case V.HEADER_VALUE_START:if(w===Td)break;$("onHeaderValue"),b=V.HEADER_VALUE;case V.HEADER_VALUE:w===mn&&(F("onHeaderValue",!0),W("onHeaderEnd"),b=V.HEADER_VALUE_ALMOST_DONE);break;case V.HEADER_VALUE_ALMOST_DONE:if(w!==pn)return;b=V.HEADER_FIELD_START;break;case V.HEADERS_ALMOST_DONE:if(w!==pn)return;W("onHeadersEnd"),b=V.PART_DATA_START;break;case V.PART_DATA_START:b=V.PART_DATA,$("onPartData");case V.PART_DATA:if(o=p,p===0){for(n+=k;n<O&&!(t[n]in h);)n+=_;n-=k,w=t[n]}if(p<l.length)l[p]===w?(p===0&&F("onPartData",!0),p++):p=0;else if(p===l.length)p++,w===mn?g|=Ze.PART_BOUNDARY:w===fr?g|=Ze.LAST_BOUNDARY:p=0;else if(p-1===l.length)if(g&Ze.PART_BOUNDARY){if(p=0,w===pn){g&=~Ze.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),b=V.HEADER_FIELD_START;break}}else g&Ze.LAST_BOUNDARY&&w===fr?(W("onPartEnd"),b=V.END,g=0):p=0;if(p>0)c[p-1]=w;else if(o>0){let T=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);W("onPartData",0,o,T),o=0,$("onPartData"),n--}break;case V.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}F("onHeaderField"),F("onHeaderValue"),F("onPartData"),this.index=p,this.state=b,this.flags=g}end(){if(this.state===V.HEADER_FIELD_START&&this.index===0||this.state===V.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==V.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Dd={};Zn(Dd,{default:()=>ji});module.exports=ru(Dd);var N=require("@raycast/api");var U=te(require("react")),j=require("@raycast/api");var Qs=Object.prototype.hasOwnProperty;function tn(r,t){var n,s;if(r===t)return!0;if(r&&t&&(n=r.constructor)===t.constructor){if(n===Date)return r.getTime()===t.getTime();if(n===RegExp)return r.toString()===t.toString();if(n===Array){if((s=r.length)===t.length)for(;s--&&tn(r[s],t[s]););return s===-1}if(!n||typeof r=="object"){s=0;for(n in r)if(Qs.call(r,n)&&++s&&!Qs.call(t,n)||!(n in t)||!tn(r[n],t[n]))return!1;return Object.keys(t).length===s}}return r!==r&&t!==t}var ct=te(require("node:fs")),sn=te(require("node:path")),Xs=te(require("node:crypto")),eo=te(require("node:child_process")),to=require("node:buffer"),At=te(require("node:stream")),ro=require("node:util");var ua=require("react/jsx-runtime");var Xn=globalThis;function nu(r){let t=(0,U.useRef)(r),n=(0,U.useRef)(0);return tn(r,t.current)||(t.current=r,n.current+=1),(0,U.useMemo)(()=>t.current,[n.current])}function Oe(r){let t=(0,U.useRef)(r);return t.current=r,t}function Ct(r,t){let n=r instanceof Error?r.message:String(r);return(0,j.showToast)({style:j.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??n,primaryAction:t?.primaryAction??Vs(r),secondaryAction:t?.primaryAction?Vs(r):void 0})}var Vs=r=>{let t=!0,n="[Extension Name]...",s="";try{let l=JSON.parse((0,ct.readFileSync)((0,sn.join)(j.environment.assetsPath,"..","package.json"),"utf8"));n=`[${l.title}]...`,s=`https://raycast.com/${l.owner||l.author}/${l.name}`,(!l.owner||l.access==="public")&&(t=!1)}catch{}let o=j.environment.isDevelopment||t,c=r instanceof Error?r?.stack||r?.message||"":String(r);return{title:o?"Copy Logs":"Report Error",onAction(l){l.hide(),o?j.Clipboard.copy(c):(0,j.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(s)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${c}
\`\`\`
`)}`)}}};function la(r,t,n){let s=(0,U.useRef)(0),[o,c]=(0,U.useState)({isLoading:!0}),l=Oe(r),h=Oe(n?.abortable),p=Oe(t||[]),b=Oe(n?.onError),g=Oe(n?.onData),_=Oe(n?.onWillExecute),k=Oe(n?.failureToastOptions),O=Oe(o.data),w=(0,U.useRef)(null),E=(0,U.useRef)({page:0}),$=(0,U.useRef)(!1),P=(0,U.useRef)(!0),W=(0,U.useRef)(50),F=(0,U.useCallback)(()=>(h.current&&(h.current.current?.abort(),h.current.current=new AbortController),++s.current),[h]),T=(0,U.useCallback)((...G)=>{let H=F();_.current?.(G),c(M=>({...M,isLoading:!0}));let we=au(l.current)(...G);function Re(M){return M.name=="AbortError"||H===s.current&&(b.current?b.current(M):j.environment.launchType!==j.LaunchType.Background&&Ct(M,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(me){me.hide(),w.current?.(...p.current||[])}},...k.current}),c({error:M,isLoading:!1})),M}return typeof we=="function"?($.current=!0,we(E.current).then(({data:M,hasMore:me,cursor:Dt})=>(H===s.current&&(E.current&&(E.current.cursor=Dt,E.current.lastItem=M?.[M.length-1]),g.current&&g.current(M,E.current),me&&(W.current=M.length),P.current=me,c(yt=>E.current.page===0?{data:M,isLoading:!1}:{data:(yt.data||[])?.concat(M),isLoading:!1})),M),M=>(P.current=!1,Re(M)))):($.current=!1,we.then(M=>(H===s.current&&(g.current&&g.current(M),c({data:M,isLoading:!1})),M),Re))},[g,b,p,l,c,w,_,E,k,F]);w.current=T;let z=(0,U.useCallback)(()=>{E.current={page:0};let G=p.current||[];return T(...G)},[T,p]),C=(0,U.useCallback)(async(G,H)=>{let we;try{if(H?.optimisticUpdate){F(),typeof H?.rollbackOnError!="function"&&H?.rollbackOnError!==!1&&(we=structuredClone(O.current?.value));let Re=H.optimisticUpdate;c(M=>({...M,data:Re(M.data)}))}return await G}catch(Re){if(typeof H?.rollbackOnError=="function"){let M=H.rollbackOnError;c(me=>({...me,data:M(me.data)}))}else H?.optimisticUpdate&&H?.rollbackOnError!==!1&&c(M=>({...M,data:we}));throw Re}finally{H?.shouldRevalidateAfter!==!1&&(j.environment.launchType===j.LaunchType.Background||j.environment.commandMode==="menu-bar"?await z():z())}},[z,O,c,F]),se=(0,U.useCallback)(()=>{E.current.page+=1;let G=p.current||[];T(...G)},[E,p,T]);(0,U.useEffect)(()=>{E.current={page:0},n?.execute!==!1?T(...t||[]):F()},[nu([t,n?.execute,T]),h,E]),(0,U.useEffect)(()=>()=>{F()},[F]);let ee=n?.execute!==!1?o.isLoading:!1,gt={...o,isLoading:ee},et=$.current?{pageSize:W.current,hasMore:P.current,onLoadMore:se}:void 0;return{...gt,revalidate:z,mutate:C,pagination:et}}function au(r){return r===Promise.all||r===Promise.race||r===Promise.resolve||r===Promise.reject?r.bind(Promise):r}function Js(r){return typeof r!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))!==null}function su(r){return r instanceof URLSearchParams?r.toString():r}function no(r,t=[]){function n(s){return"update"in r?r.update(s,"utf8"):r.write(s)}return{dispatch:function(s){s=su(s),s===null?this._null():this["_"+typeof s](s)},_object:function(s){let o=/\[object (.*)\]/i,c=Object.prototype.toString.call(s),l=o.exec(c)?.[1]??"unknown:["+c+"]";l=l.toLowerCase();let h=null;if((h=t.indexOf(s))>=0){this.dispatch("[CIRCULAR:"+h+"]");return}else t.push(s);if(Buffer.isBuffer(s))return n("buffer:"),n(s.toString("utf8"));if(l!=="object"&&l!=="function"&&l!=="asyncfunction")if(this["_"+l])this["_"+l](s);else throw new Error('Unknown object type "'+l+'"');else{let p=Object.keys(s);p=p.sort(),Js(s)||p.splice(0,0,"prototype","__proto__","constructor"),n("object:"+p.length+":");let b=this;return p.forEach(function(g){b.dispatch(g),n(":"),b.dispatch(s[g]),n(",")})}},_array:function(s,o){o=typeof o<"u"?o:!1;let c=this;if(n("array:"+s.length+":"),!o||s.length<=1){s.forEach(function(p){c.dispatch(p)});return}let l=[],h=s.map(function(p){let b=ou(),g=t.slice();return no(b,g).dispatch(p),l=l.concat(g.slice(t.length)),b.read().toString()});t=t.concat(l),h.sort(),this._array(h,!1)},_date:function(s){n("date:"+s.toJSON())},_symbol:function(s){n("symbol:"+s.toString())},_error:function(s){n("error:"+s.toString())},_boolean:function(s){n("bool:"+s.toString())},_string:function(s){n("string:"+s.length+":"),n(s.toString())},_function:function(s){n("fn:"),Js(s)?this.dispatch("[native]"):this.dispatch(s.toString()),this.dispatch("function-name:"+String(s.name)),this._object(s)},_number:function(s){n("number:"+s.toString())},_xml:function(s){n("xml:"+s.toString())},_null:function(){n("Null")},_undefined:function(){n("Undefined")},_regexp:function(s){n("regex:"+s.toString())},_uint8array:function(s){n("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint8clampedarray:function(s){n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},_int8array:function(s){n("int8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint16array:function(s){n("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},_int16array:function(s){n("int16array:"),this.dispatch(Array.prototype.slice.call(s))},_uint32array:function(s){n("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},_int32array:function(s){n("int32array:"),this.dispatch(Array.prototype.slice.call(s))},_float32array:function(s){n("float32array:"),this.dispatch(Array.prototype.slice.call(s))},_float64array:function(s){n("float64array:"),this.dispatch(Array.prototype.slice.call(s))},_arraybuffer:function(s){n("arraybuffer:"),this.dispatch(new Uint8Array(s))},_url:function(s){n("url:"+s.toString())},_map:function(s){n("map:");let o=Array.from(s);this._array(o,!0)},_set:function(s){n("set:");let o=Array.from(s);this._array(o,!0)},_file:function(s){n("file:"),this.dispatch([s.name,s.size,s.type,s.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){n("domwindow")},_bigint:function(s){n("bigint:"+s.toString())},_process:function(){n("process")},_timer:function(){n("timer")},_pipe:function(){n("pipe")},_tcp:function(){n("tcp")},_udp:function(){n("udp")},_tty:function(){n("tty")},_statwatcher:function(){n("statwatcher")},_securecontext:function(){n("securecontext")},_connection:function(){n("connection")},_zlib:function(){n("zlib")},_context:function(){n("context")},_nodescript:function(){n("nodescript")},_httpparser:function(){n("httpparser")},_dataview:function(){n("dataview")},_signal:function(){n("signal")},_fsevent:function(){n("fsevent")},_tlswrap:function(){n("tlswrap")}}}function ou(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}function iu(r,t){let n=this[r];return n instanceof Date?`__raycast_cached_date__${n.toString()}`:Buffer.isBuffer(n)?`__raycast_cached_buffer__${n.toString("base64")}`:t}function cu(r,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function Hs(r){let t=Xs.default.createHash("sha1");return no(t).dispatch(r),t.digest("hex")}var uu=Symbol("cache without namespace"),Gs=new Map;function lu(r,t,n){let s=n?.cacheNamespace||uu,o=Gs.get(s)||Gs.set(s,new j.Cache({namespace:n?.cacheNamespace})).get(s);if(!o)throw new Error("Missing cache");let c=Oe(r),l=Oe(t),h=(0,U.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(c.current)}catch(_){console.error("Could not get Cache data:",_);return}}),p=(0,U.useMemo)(()=>{if(typeof h<"u"){if(h==="undefined")return;try{return JSON.parse(h,cu)}catch(_){return console.warn("The cached data is corrupted",_),l.current}}else return l.current},[h,l]),b=Oe(p),g=(0,U.useCallback)(_=>{let k=typeof _=="function"?_(b.current):_;if(typeof k>"u")o.set(c.current,"undefined");else{let O=JSON.stringify(k,iu);o.set(c.current,O)}return k},[o,c,b]);return[p,g]}var jt=Symbol();function Ie(r,t,n){let{initialData:s,keepPreviousData:o,internal_cacheKeySuffix:c,...l}=n||{},h=(0,U.useRef)(null),[p,b]=lu(Hs(t||[])+c,jt,{cacheNamespace:Hs(r)}),g=(0,U.useRef)(p!==jt?p:s),_=(0,U.useRef)(void 0),{mutate:k,revalidate:O,...w}=la(r,t||[],{...l,onData(F,T){_.current=T,l.onData&&l.onData(F,T),!(T&&T.page>0)&&(h.current="promise",g.current=F,b(F))}}),E,$=w.pagination;_.current&&_.current.page>0&&w.data?E=w.data:h.current==="promise"?E=g.current:o&&p!==jt?(E=p,$&&($.hasMore=!0,$.pageSize=p.length)):o&&p===jt?E=g.current:p!==jt?(E=p,$&&($.hasMore=!0,$.pageSize=p.length)):E=s;let P=Oe(E),W=(0,U.useCallback)(async(F,T)=>{let z;try{if(T?.optimisticUpdate){typeof T?.rollbackOnError!="function"&&T?.rollbackOnError!==!1&&(z=structuredClone(P.current));let C=T.optimisticUpdate(P.current);h.current="cache",g.current=C,b(C)}return await k(F,{shouldRevalidateAfter:T?.shouldRevalidateAfter})}catch(C){if(typeof T?.rollbackOnError=="function"){let se=T.rollbackOnError(P.current);h.current="cache",g.current=se,b(se)}else T?.optimisticUpdate&&T?.rollbackOnError!==!1&&(h.current="cache",g.current=z,b(z));throw C}},[b,k,P,g,h]);return(0,U.useEffect)(()=>{p!==jt&&(h.current="cache",g.current=p)},[p]),{data:E,isLoading:w.isLoading,error:w.error,mutate:_.current&&_.current.page>0?k:W,pagination:$,revalidate:O}}var nn=r=>!!r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function",ea=Symbol.for("signal-exit emitter"),sa=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),Xn[ea])return Xn[ea];Object.defineProperty(Xn,ea,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,n){this.listeners[t].push(n)}removeListener(t,n){let s=this.listeners[t],o=s.indexOf(n);o!==-1&&(o===0&&s.length===1?s.length=0:s.splice(o,1))}emit(t,n,s){if(this.emitted[t])return!1;this.emitted[t]=!0;let o=!1;for(let c of this.listeners[t])o=c(n,s)===!0||o;return t==="exit"&&(o=this.emit("afterExit",n,s)||o),o}},oa=class{onExit(){return()=>{}}load(){}unload(){}},ia=class{#t;#r;#e;#s;#i;#o;#a;#n;constructor(t){this.#t=process.platform==="win32"?"SIGINT":"SIGHUP",this.#r=new sa,this.#o={},this.#a=!1,this.#n=[],this.#n.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#n.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#n.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=t,this.#o={};for(let n of this.#n)this.#o[n]=()=>{let s=this.#e.listeners(n),{count:o}=this.#r,c=t;if(typeof c.__signal_exit_emitter__=="object"&&typeof c.__signal_exit_emitter__.count=="number"&&(o+=c.__signal_exit_emitter__.count),s.length===o){this.unload();let l=this.#r.emit("exit",null,n),h=n==="SIGHUP"?this.#t:n;l||t.kill(t.pid,h)}};this.#i=t.reallyExit,this.#s=t.emit}onExit(t,n){if(!nn(this.#e))return()=>{};this.#a===!1&&this.load();let s=n?.alwaysLast?"afterExit":"exit";return this.#r.on(s,t),()=>{this.#r.removeListener(s,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#a){this.#a=!0,this.#r.count+=1;for(let t of this.#n)try{let n=this.#o[t];n&&this.#e.on(t,n)}catch{}this.#e.emit=(t,...n)=>this.#u(t,...n),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#a&&(this.#a=!1,this.#n.forEach(t=>{let n=this.#o[t];if(!n)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,n)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#r.count-=1)}#c(t){return nn(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#u(t,...n){let s=this.#s;if(t==="exit"&&nn(this.#e)){typeof n[0]=="number"&&(this.#e.exitCode=n[0]);let o=s.call(this.#e,t,...n);return this.#r.emit("exit",this.#e.exitCode,null),o}else return s.call(this.#e,t,...n)}},ta=null,du=(r,t)=>(ta||(ta=nn(process)?new ia(process):new oa),ta.onExit(r,t));function fu(r,{timeout:t}={}){let n=new Promise((h,p)=>{r.on("exit",(b,g)=>{h({exitCode:b,signal:g,timedOut:!1})}),r.on("error",b=>{p(b)}),r.stdin&&r.stdin.on("error",b=>{p(b)})}),s=du(()=>{r.kill()});if(t===0||t===void 0)return n.finally(()=>s());let o,c=new Promise((h,p)=>{o=setTimeout(()=>{r.kill("SIGTERM"),p(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},t)}),l=n.finally(()=>{clearTimeout(o)});return Promise.race([c,l]).finally(()=>s())}var ca=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function pu(r){let{encoding:t}=r,n=t==="buffer",s=new At.default.PassThrough({objectMode:!1});t&&t!=="buffer"&&s.setEncoding(t);let o=0,c=[];return s.on("data",l=>{c.push(l),o+=l.length}),s.getBufferedValue=()=>n?Buffer.concat(c,o):c.join(""),s.getBufferedLength=()=>o,s}async function Ys(r,t){let n=pu(t);return await new Promise((s,o)=>{let c=l=>{l&&n.getBufferedLength()<=to.constants.MAX_LENGTH&&(l.bufferedData=n.getBufferedValue()),o(l)};(async()=>{try{await(0,ro.promisify)(At.default.pipeline)(r,n),s()}catch(l){c(l)}})(),n.on("data",()=>{n.getBufferedLength()>8e7&&c(new ca)})}),n.getBufferedValue()}async function Ks(r,t){r.destroy();try{return await t}catch(n){return n.bufferedData}}async function mu({stdout:r,stderr:t},{encoding:n},s){let o=Ys(r,{encoding:n}),c=Ys(t,{encoding:n});try{return await Promise.all([s,o,c])}catch(l){return Promise.all([{error:l,exitCode:null,signal:l.signal,timedOut:l.timedOut||!1},Ks(r,o),Ks(t,c)])}}function hu(r){let t=typeof r=="string"?`
`:10,n=typeof r=="string"?"\r":13;return r[r.length-1]===t&&(r=r.slice(0,-1)),r[r.length-1]===n&&(r=r.slice(0,-1)),r}function Zs(r,t){return r.stripFinalNewline?hu(t):t}function bu({timedOut:r,timeout:t,signal:n,exitCode:s}){return r?`timed out after ${t} milliseconds`:n!=null?`was killed with ${n}`:s!=null?`failed with exit code ${s}`:"failed"}function gu({stdout:r,stderr:t,error:n,signal:s,exitCode:o,command:c,timedOut:l,options:h,parentError:p}){let g=`Command ${bu({timedOut:l,timeout:h?.timeout,signal:s,exitCode:o})}: ${c}`,_=n?`${g}
${n.message}`:g,k=[_,t,r].filter(Boolean).join(`
`);return n?n.originalMessage=n.message:n=p,n.message=k,n.shortMessage=_,n.command=c,n.exitCode=o,n.signal=s,n.stdout=r,n.stderr=t,"bufferedData"in n&&delete n.bufferedData,n}function yu({stdout:r,stderr:t,error:n,exitCode:s,signal:o,timedOut:c,command:l,options:h,parentError:p}){if(n||s!==0||o!==null)throw gu({error:n,exitCode:s,signal:o,stdout:r,stderr:t,command:l,timedOut:c,options:h,parentError:p});return r}var rn={asana:"1191201745684312",github:"7235fe8d42157f1f38c0",linear:"c8ff37b9225c3c9aefd7d66ea0e5b6f1",slack:"851756884692.5546927290212"},an=class r{constructor(t){this.clientId=t.clientId,this.scope=Array.isArray(t.scope)?t.scope.join(" "):t.scope,this.personalAccessToken=t.personalAccessToken,this.bodyEncoding=t.bodyEncoding,this.client=t.client,this.extraParameters=t.extraParameters,this.authorizeUrl=t.authorizeUrl,this.tokenUrl=t.tokenUrl,this.refreshTokenUrl=t.refreshTokenUrl,this.onAuthorize=t.onAuthorize,this.tokenResponseParser=t.tokenResponseParser??(n=>n),this.tokenRefreshResponseParser=t.tokenRefreshResponseParser??(n=>n),this.authorize=this.authorize.bind(this)}static asana(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"Asana",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="251" height="232" fill="none"><path fill="#F06A6A" d="M179.383 54.373c0 30.017-24.337 54.374-54.354 54.374-30.035 0-54.373-24.338-54.373-54.374C70.656 24.338 94.993 0 125.029 0c30.017 0 54.354 24.338 54.354 54.373ZM54.393 122.33C24.376 122.33.02 146.668.02 176.685c0 30.017 24.337 54.373 54.373 54.373 30.035 0 54.373-24.338 54.373-54.373 0-30.017-24.338-54.355-54.373-54.355Zm141.253 0c-30.035 0-54.373 24.338-54.373 54.374 0 30.035 24.338 54.373 54.373 54.373 30.017 0 54.374-24.338 54.374-54.373 0-30.036-24.338-54.374-54.374-54.374Z"/></svg>')}`,providerId:"asana",description:"Connect your Asana account"}),clientId:t.clientId??rn.asana,authorizeUrl:t.authorizeUrl??"https://asana.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://asana.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://asana.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static github(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"GitHub",providerIcon:{source:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>')}`,tintColor:j.Color.PrimaryText},providerId:"github",description:"Connect your GitHub account"}),clientId:t.clientId??rn.github,authorizeUrl:t.authorizeUrl??"https://github.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://github.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://github.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static google(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.AppURI,providerName:"Google",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" style="display:block" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')}`,providerId:"google",description:"Connect your Google account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:t.tokenUrl??"https://oauth2.googleapis.com/token",refreshTokenUrl:t.tokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static jira(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"Jira",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2361" height="2500" viewBox="2.59 0 214.091 224"><linearGradient id="a" x1="102.4" x2="56.15" y1="218.63" y2="172.39" gradientTransform="matrix(1 0 0 -1 0 264)" gradientUnits="userSpaceOnUse"><stop offset=".18" stop-color="#0052cc"/><stop offset="1" stop-color="#2684ff"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="114.65" x2="160.81" y1="85.77" y2="131.92"/><path fill="#2684ff" d="M214.06 105.73 117.67 9.34 108.33 0 35.77 72.56 2.59 105.73a8.89 8.89 0 0 0 0 12.54l66.29 66.29L108.33 224l72.55-72.56 1.13-1.12 32.05-32a8.87 8.87 0 0 0 0-12.59zm-105.73 39.39L75.21 112l33.12-33.12L141.44 112z"/><path fill="url(#a)" d="M108.33 78.88a55.75 55.75 0 0 1-.24-78.61L35.62 72.71l39.44 39.44z"/><path fill="url(#b)" d="m141.53 111.91-33.2 33.21a55.77 55.77 0 0 1 0 78.86L181 151.35z"/></svg>')}`,providerId:"jira",description:"Connect your Jira account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://auth.atlassian.com/authorize",tokenUrl:t.tokenUrl??"https://auth.atlassian.com/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static linear(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"Linear",providerIcon:{source:{light:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#222326" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/></svg>')}`,dark:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z" /></svg>')}`}},providerId:"linear",description:"Connect your Linear account"}),clientId:t.clientId??rn.linear,authorizeUrl:t.authorizeUrl??"https://linear.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://linear.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://linear.oauth.raycast.com/refresh-token",scope:t.scope,extraParameters:{actor:"user"},onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static slack(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"Slack",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="73 73 124 124"><style>.st0{fill:#e01e5a}.st1{fill:#36c5f0}.st2{fill:#2eb67d}.st3{fill:#ecb22e}</style><path d="M99.4 151.2c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zM105.9 151.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9v-32.3z" class="st0"/><path d="M118.8 99.4c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v12.9h-12.9zM118.8 105.9c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H86.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3z" class="st1"/><path d="M170.6 118.8c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9h-12.9v-12.9zM164.1 118.8c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V86.5c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3z" class="st2"/><path d="M151.2 170.6c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9v-12.9h12.9zM151.2 164.1c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9h-32.3z" class="st3"/></svg>')}`,providerId:"slack",description:"Connect your Slack account"}),clientId:t.clientId??rn.slack,authorizeUrl:t.authorizeUrl??"https://slack.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/token",refreshTokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/refresh-token",scope:"",extraParameters:{user_scope:t.scope},personalAccessToken:t.personalAccessToken,bodyEncoding:t.tokenUrl?t.bodyEncoding??"url-encoded":"json",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser??(n=>({access_token:n.authed_user.access_token,scope:n.authed_user.scope}))})}static zoom(t){return new r({client:new j.OAuth.PKCEClient({redirectMethod:j.OAuth.RedirectMethod.Web,providerName:"Zoom",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.845 80"><path d="M73.786 78.835H10.88A10.842 10.842 0 0 1 .833 72.122a10.841 10.841 0 0 1 2.357-11.85L46.764 16.7h-31.23C6.954 16.699 0 9.744 0 1.165h58.014c4.414 0 8.357 2.634 10.046 6.712a10.843 10.843 0 0 1-2.356 11.85L22.13 63.302h36.122c8.58 0 15.534 6.955 15.534 15.534Zm278.059-48.544C351.845 13.588 338.256 0 321.553 0c-8.934 0-16.975 3.89-22.524 10.063C293.48 3.89 285.44 0 276.505 0c-16.703 0-30.291 13.588-30.291 30.291v48.544c8.579 0 15.534-6.955 15.534-15.534v-33.01c0-8.137 6.62-14.757 14.757-14.757s14.757 6.62 14.757 14.757v33.01c0 8.58 6.955 15.534 15.534 15.534V30.291c0-8.137 6.62-14.757 14.757-14.757s14.758 6.62 14.758 14.757v33.01c0 8.58 6.954 15.534 15.534 15.534V30.291ZM238.447 40c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.908-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S173.98 26.488 173.98 40s10.953 24.466 24.466 24.466S222.913 53.512 222.913 40Zm-70.68 0c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S87.767 26.488 87.767 40s10.954 24.466 24.466 24.466S136.699 53.512 136.699 40Z" style="fill:#0b5cff"/></svg>')}`,providerId:"zoom",description:"Connect your Zoom account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://zoom.us/oauth/authorize",tokenUrl:t.tokenUrl??"https://zoom.us/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}async authorize(){let t=await this.client.getTokens();if(t?.accessToken){if(t.refreshToken&&t.isExpired()){let c=await this.refreshTokens({token:t.refreshToken});if(c)return await this.client.setTokens(c),c.access_token}return t.accessToken}let n=await this.client.authorizationRequest({endpoint:this.authorizeUrl,clientId:this.clientId,scope:this.scope,extraParameters:this.extraParameters}),{authorizationCode:s}=await this.client.authorize(n),o=await this.fetchTokens({authRequest:n,authorizationCode:s});return await this.client.setTokens(o),o.access_token}async fetchTokens({authRequest:t,authorizationCode:n}){let s;if(this.bodyEncoding==="url-encoded"){let l=new URLSearchParams;l.append("client_id",this.clientId),l.append("code",n),l.append("code_verifier",t.codeVerifier),l.append("grant_type","authorization_code"),l.append("redirect_uri",t.redirectURI),s={body:l}}else s={body:JSON.stringify({client_id:this.clientId,code:n,code_verifier:t.codeVerifier,grant_type:"authorization_code",redirect_uri:t.redirectURI}),headers:{"Content-Type":"application/json"}};let o=await fetch(this.tokenUrl,{method:"POST",...s});if(!o.ok){let l=await o.text();throw console.error("fetch tokens error:",l),new Error(`Error while fetching tokens: ${o.status} (${o.statusText})
${l}`)}let c=this.tokenResponseParser(await o.json());return Array.isArray(c.scope)?{...c,scope:c.scope.join(" ")}:c}async refreshTokens({token:t}){let n;if(this.bodyEncoding==="url-encoded"){let o=new URLSearchParams;o.append("client_id",this.clientId),o.append("refresh_token",t),o.append("grant_type","refresh_token"),n={body:o}}else n={body:JSON.stringify({client_id:this.clientId,refresh_token:t,grant_type:"refresh_token"}),headers:{"Content-Type":"application/json"}};let s=await fetch(this.refreshTokenUrl??this.tokenUrl,{method:"POST",...n});if(s.ok){let o=this.tokenRefreshResponseParser(await s.json());return o.refresh_token=o.refresh_token??t,o}else{let o=await s.text();console.error("refresh tokens error:",o),this.client.description=`${this.client.providerName} needs you to sign-in again. Press \u23CE or click the button below to continue.`,await this.client.removeTokens(),await this.authorize()}}},vt=null,or=null,ra=null,na=null,aa=null;function ao(r){return j.environment.commandMode==="no-view"?t=>async s=>{if(!vt){vt=r.personalAccessToken??await r.authorize(),or=r.personalAccessToken?"personal":"oauth";let o=(await r.client?.getTokens())?.idToken;r.onAuthorize&&await Promise.resolve(r.onAuthorize({token:vt,type:or,idToken:o}))}return t(s)}:t=>{let n=s=>{r.personalAccessToken?(vt=r.personalAccessToken,or="personal"):(ra||(ra=r.authorize()),vt=U.default.use(ra),or="oauth");let o;return r.client&&(na||(na=r.client?.getTokens().then(c=>c?.idToken)),o=U.default.use(na)),r.onAuthorize&&(aa||(aa=Promise.resolve(r.onAuthorize({token:vt,type:or,idToken:o}))),U.default.use(aa)),(0,ua.jsx)(t,{...s})};return n.displayName=`withAccessToken(${t.displayName||t.name})`,n}}async function Ke(r,t,n){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:s,language:o,timeout:c,...l}=Array.isArray(t)?n||{}:t||{},h=s!==!1?[]:["-ss"];o==="JavaScript"&&h.push("-l","JavaScript"),Array.isArray(t)&&h.push("-",...t);let p=eo.default.spawn("osascript",h,{...l,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),b=fu(p,{timeout:c??1e4});p.stdin.end(r);let[{error:g,exitCode:_,signal:k,timedOut:O},w,E]=await mu(p,{encoding:"utf8"},b),$=Zs({stripFinalNewline:!0},w),P=Zs({stripFinalNewline:!0},E);return yu({stdout:$,stderr:P,error:g,exitCode:_,signal:k,timedOut:O,command:"osascript",options:n,parentError:new Error})}var fa=te(da());function ut(r){if(console.log("getError",r),r instanceof fa.HttpError)if(typeof r.data=="string")try{return JSON.parse(r.data).error}catch{return{status:r.status,message:r.data,reason:"UNKNOWN_ERROR"}}else return r.data.error;return{status:500,message:"Unknown error",reason:"UNKNOWN_ERROR"}}function v(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof fa.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return r instanceof Error?r.message:String(r)}var pa=require("@raycast/api");var _u="7bbb789c01ff44ed842907b7a80c404f",Ou=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),ku=new pa.OAuth.PKCEClient({redirectMethod:pa.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"}),ma=new an({client:ku,clientId:_u,scope:Ou,authorizeUrl:"https://accounts.spotify.com/authorize/",tokenUrl:"https://accounts.spotify.com/api/token",refreshTokenUrl:"https://accounts.spotify.com/api/token",bodyEncoding:"url-encoded"});var ga={};Zn(ga,{defaults:()=>cr,deleteMeAlbums:()=>gl,deleteMeAudiobooks:()=>el,deleteMeEpisodes:()=>Rl,deleteMeFollowing:()=>Ql,deleteMeShows:()=>Pl,deleteMeTracks:()=>_l,deletePlaylistsByPlaylistIdFollowers:()=>Ul,deletePlaylistsByPlaylistIdTracks:()=>pl,getAlbums:()=>Mu,getAlbumsById:()=>qu,getAlbumsByIdTracks:()=>zu,getArtists:()=>Du,getArtistsById:()=>Lu,getArtistsByIdAlbums:()=>Bu,getArtistsByIdRelatedArtists:()=>Fu,getArtistsByIdTopTracks:()=>Wu,getAudioAnalysisById:()=>Yl,getAudioFeatures:()=>Hl,getAudioFeaturesById:()=>Gl,getAudiobooks:()=>Yu,getAudiobooksById:()=>Gu,getAudiobooksByIdChapters:()=>Ku,getBrowseCategories:()=>Ml,getBrowseCategoriesByCategoryId:()=>zl,getBrowseCategoriesByCategoryIdPlaylists:()=>Ll,getBrowseFeaturedPlaylists:()=>ql,getBrowseNewReleases:()=>Wl,getChapters:()=>nl,getChaptersById:()=>rl,getEpisodes:()=>Hu,getEpisodesById:()=>Ju,getMarkets:()=>md,getMe:()=>il,getMeAlbums:()=>hl,getMeAlbumsContains:()=>yl,getMeAudiobooks:()=>Zu,getMeAudiobooksContains:()=>tl,getMeEpisodes:()=>kl,getMeEpisodesContains:()=>Tl,getMeFollowing:()=>Fl,getMeFollowingContains:()=>Vl,getMePlayer:()=>Xl,getMePlayerCurrentlyPlaying:()=>rd,getMePlayerDevices:()=>td,getMePlayerQueue:()=>fd,getMePlayerRecentlyPlayed:()=>dd,getMePlaylists:()=>ml,getMeShows:()=>xl,getMeShowsContains:()=>jl,getMeTopArtists:()=>hd,getMeTopTracks:()=>bd,getMeTracks:()=>Sl,getMeTracksContains:()=>Ol,getNext:()=>gd,getPlaylistsByPlaylistId:()=>cl,getPlaylistsByPlaylistIdFollowersContains:()=>Jl,getPlaylistsByPlaylistIdImages:()=>Dl,getPlaylistsByPlaylistIdTracks:()=>ll,getRecommendations:()=>Kl,getRecommendationsAvailableGenreSeeds:()=>Zl,getShows:()=>Qu,getShowsById:()=>Nu,getShowsByIdEpisodes:()=>Vu,getTracks:()=>sl,getTracksById:()=>al,getUsersByUserId:()=>vl,getUsersByUserIdPlaylists:()=>Al,postMePlayerNext:()=>sd,postMePlayerPrevious:()=>od,postMePlayerQueue:()=>pd,postPlaylistsByPlaylistIdTracks:()=>dl,postUsersByUserIdPlaylists:()=>Cl,putMeAlbums:()=>bl,putMeAudiobooks:()=>Xu,putMeEpisodes:()=>El,putMeFollowing:()=>Nl,putMePlayer:()=>ed,putMePlayerPause:()=>ad,putMePlayerPlay:()=>nd,putMePlayerRepeat:()=>cd,putMePlayerSeek:()=>id,putMePlayerShuffle:()=>ld,putMePlayerVolume:()=>ud,putMeShows:()=>$l,putMeTracks:()=>wl,putPlaylistsByPlaylistId:()=>ul,putPlaylistsByPlaylistIdFollowers:()=>Il,putPlaylistsByPlaylistIdImages:()=>Bl,putPlaylistsByPlaylistIdTracks:()=>fl,search:()=>ol,servers:()=>mo});var po=te(fo()),m=te(ba()),cr={baseUrl:"https://api.spotify.com/v1"},d=po.runtime(cr),mo={server1:"https://api.spotify.com/v1"};function qu(r,{market:t}={},n){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Mu(r,{market:t}={},n){return d.ok(d.fetchJson(`/albums${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function zu(r,{market:t,limit:n,offset:s}={},o){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...o}))}function Lu(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function Du(r,t){return d.ok(d.fetchJson(`/artists${m.query(m.explode({ids:r}))}`,{...t}))}function Bu(r,{includeGroups:t,market:n,limit:s,offset:o}={},c){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/albums${m.query(m.explode({include_groups:t,market:n,limit:s,offset:o}))}`,{...c}))}function Wu(r,{market:t}={},n){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${m.query(m.explode({market:t}))}`,{...n}))}function Fu(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function Nu(r,{market:t}={},n){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Qu(r,{market:t}={},n){return d.ok(d.fetchJson(`/shows${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function Vu(r,{market:t,limit:n,offset:s}={},o){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...o}))}function Ju(r,{market:t}={},n){return d.ok(d.fetchJson(`/episodes/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Hu(r,{market:t}={},n){return d.ok(d.fetchJson(`/episodes${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function Gu(r,{market:t}={},n){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Yu(r,{market:t}={},n){return d.ok(d.fetchJson(`/audiobooks${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function Ku(r,{market:t,limit:n,offset:s}={},o){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...o}))}function Zu({limit:r,offset:t}={},n){return d.ok(d.fetchJson(`/me/audiobooks${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function Xu(r,t){return d.ok(d.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"PUT"}))}function el(r,t){return d.ok(d.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"DELETE"}))}function tl(r,t){return d.ok(d.fetchJson(`/me/audiobooks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function rl(r,{market:t}={},n){return d.ok(d.fetchJson(`/chapters/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function nl(r,{market:t}={},n){return d.ok(d.fetchJson(`/chapters${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function al(r,{market:t}={},n){return d.ok(d.fetchJson(`/tracks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function sl(r,{market:t}={},n){return d.ok(d.fetchJson(`/tracks${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function ol(r,t,{market:n,limit:s,offset:o,includeExternal:c}={},l){return d.ok(d.fetchJson(`/search${m.query(m.explode({q:r,market:n,limit:s,offset:o,include_external:c}),m.form({type:t}))}`,{...l}))}function il(r){return d.ok(d.fetchJson("/me",{...r}))}function cl(r,{market:t,fields:n,additionalTypes:s}={},o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}${m.query(m.explode({market:t,fields:n,additional_types:s}))}`,{...o}))}function ul(r,t,n){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}`,d.json({...n,method:"PUT",body:t})))}function ll(r,{market:t,fields:n,limit:s,offset:o,additionalTypes:c}={},l){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,fields:n,limit:s,offset:o,additional_types:c}))}`,{...l}))}function dl(r,t,{position:n,uris:s}={},o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({position:n,uris:s}))}`,d.json({...o,method:"POST",body:t})))}function fl(r,t,{uris:n}={},s){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({uris:n}))}`,d.json({...s,method:"PUT",body:t})))}function pl(r,t,n){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,d.json({...n,method:"DELETE",body:t})))}function ml({limit:r,offset:t}={},n){return d.ok(d.fetchJson(`/me/playlists${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function hl({limit:r,offset:t,market:n}={},s){return d.ok(d.fetchJson(`/me/albums${m.query(m.explode({limit:r,offset:t,market:n}))}`,{...s}))}function bl(r,t,n){return d.ok(d.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,d.json({...n,method:"PUT",body:t})))}function gl(r,t,n){return d.ok(d.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,d.json({...n,method:"DELETE",body:t})))}function yl(r,t){return d.ok(d.fetchJson(`/me/albums/contains${m.query(m.explode({ids:r}))}`,{...t}))}function Sl({market:r,limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/me/tracks${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function wl(r,t,n){return d.ok(d.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,d.json({...n,method:"PUT",body:t})))}function _l(r,t,n){return d.ok(d.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,d.json({...n,method:"DELETE",body:t})))}function Ol(r,t){return d.ok(d.fetchJson(`/me/tracks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function kl({market:r,limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/me/episodes${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function El(r,t,n){return d.ok(d.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,d.json({...n,method:"PUT",body:t})))}function Rl(r,t,n){return d.ok(d.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,d.json({...n,method:"DELETE",body:t})))}function Tl(r,t){return d.ok(d.fetchJson(`/me/episodes/contains${m.query(m.explode({ids:r}))}`,{...t}))}function xl({limit:r,offset:t}={},n){return d.ok(d.fetchJson(`/me/shows${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function $l(r,t,n){return d.ok(d.fetchJson(`/me/shows${m.query(m.explode({ids:r}))}`,d.json({...n,method:"PUT",body:t})))}function Pl(r,t,{market:n}={},s){return d.ok(d.fetchJson(`/me/shows${m.query(m.explode({ids:r,market:n}))}`,d.json({...s,method:"DELETE",body:t})))}function jl(r,t){return d.ok(d.fetchJson(`/me/shows/contains${m.query(m.explode({ids:r}))}`,{...t}))}function vl(r,t){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function Al(r,{limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists${m.query(m.explode({limit:t,offset:n}))}`,{...s}))}function Cl(r,t,n){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,d.json({...n,method:"POST",body:t})))}function Il(r,t,n){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,d.json({...n,method:"PUT",body:t})))}function Ul(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function ql({country:r,locale:t,timestamp:n,limit:s,offset:o}={},c){return d.ok(d.fetchJson(`/browse/featured-playlists${m.query(m.explode({country:r,locale:t,timestamp:n,limit:s,offset:o}))}`,{...c}))}function Ml({country:r,locale:t,limit:n,offset:s}={},o){return d.ok(d.fetchJson(`/browse/categories${m.query(m.explode({country:r,locale:t,limit:n,offset:s}))}`,{...o}))}function zl(r,{country:t,locale:n}={},s){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}${m.query(m.explode({country:t,locale:n}))}`,{...s}))}function Ll(r,{country:t,limit:n,offset:s}={},o){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${m.query(m.explode({country:t,limit:n,offset:s}))}`,{...o}))}function Dl(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function Bl(r,t,n){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...n,method:"PUT",body:t}))}function Wl({country:r,limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/browse/new-releases${m.query(m.explode({country:r,limit:t,offset:n}))}`,{...s}))}function Fl(r,{after:t,limit:n}={},s){return d.ok(d.fetchJson(`/me/following${m.query(m.explode({type:r,after:t,limit:n}))}`,{...s}))}function Nl(r,t,n,s){return d.ok(d.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,d.json({...s,method:"PUT",body:n})))}function Ql(r,t,n,s){return d.ok(d.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,d.json({...s,method:"DELETE",body:n})))}function Vl(r,t,n){return d.ok(d.fetchJson(`/me/following/contains${m.query(m.explode({type:r,ids:t}))}`,{...n}))}function Jl(r,t,n){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${m.query(m.explode({ids:t}))}`,{...n}))}function Hl(r,t){return d.ok(d.fetchJson(`/audio-features${m.query(m.explode({ids:r}))}`,{...t}))}function Gl(r,t){return d.ok(d.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function Yl(r,t){return d.ok(d.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function Kl({limit:r,market:t,seedArtists:n,seedGenres:s,seedTracks:o,minAcousticness:c,maxAcousticness:l,targetAcousticness:h,minDanceability:p,maxDanceability:b,targetDanceability:g,minDurationMs:_,maxDurationMs:k,targetDurationMs:O,minEnergy:w,maxEnergy:E,targetEnergy:$,minInstrumentalness:P,maxInstrumentalness:W,targetInstrumentalness:F,minKey:T,maxKey:z,targetKey:C,minLiveness:se,maxLiveness:ee,targetLiveness:gt,minLoudness:et,maxLoudness:G,targetLoudness:H,minMode:we,maxMode:Re,targetMode:M,minPopularity:me,maxPopularity:Dt,targetPopularity:yt,minSpeechiness:yr,maxSpeechiness:Sr,targetSpeechiness:Bt,minTempo:Wt,maxTempo:wr,targetTempo:kn,minTimeSignature:En,maxTimeSignature:Te,targetTimeSignature:he,minValence:Rn,maxValence:_r,targetValence:xe}={},Ft){return d.ok(d.fetchJson(`/recommendations${m.query(m.explode({limit:r,market:t,seed_artists:n,seed_genres:s,seed_tracks:o,min_acousticness:c,max_acousticness:l,target_acousticness:h,min_danceability:p,max_danceability:b,target_danceability:g,min_duration_ms:_,max_duration_ms:k,target_duration_ms:O,min_energy:w,max_energy:E,target_energy:$,min_instrumentalness:P,max_instrumentalness:W,target_instrumentalness:F,min_key:T,max_key:z,target_key:C,min_liveness:se,max_liveness:ee,target_liveness:gt,min_loudness:et,max_loudness:G,target_loudness:H,min_mode:we,max_mode:Re,target_mode:M,min_popularity:me,max_popularity:Dt,target_popularity:yt,min_speechiness:yr,max_speechiness:Sr,target_speechiness:Bt,min_tempo:Wt,max_tempo:wr,target_tempo:kn,min_time_signature:En,max_time_signature:Te,target_time_signature:he,min_valence:Rn,max_valence:_r,target_valence:xe}))}`,{...Ft}))}function Zl(r){return d.ok(d.fetchJson("/recommendations/available-genre-seeds",{...r}))}function Xl({market:r,additionalTypes:t}={},n){return d.ok(d.fetchJson(`/me/player${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function ed(r,t){return d.ok(d.fetchJson("/me/player",d.json({...t,method:"PUT",body:r})))}function td(r){return d.ok(d.fetchJson("/me/player/devices",{...r}))}function rd({market:r,additionalTypes:t}={},n){return d.ok(d.fetchJson(`/me/player/currently-playing${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function nd(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/play${m.query(m.explode({device_id:t}))}`,d.json({...n,method:"PUT",body:r})))}function ad({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/pause${m.query(m.explode({device_id:r}))}`,{...t,method:"PUT"}))}function sd({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/next${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function od({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/previous${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function id(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/seek${m.query(m.explode({position_ms:r,device_id:t}))}`,{...n,method:"PUT"}))}function cd(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/repeat${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function ud(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/volume${m.query(m.explode({volume_percent:r,device_id:t}))}`,{...n,method:"PUT"}))}function ld(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/shuffle${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function dd({limit:r,after:t,before:n}={},s){return d.ok(d.fetchJson(`/me/player/recently-played${m.query(m.explode({limit:r,after:t,before:n}))}`,{...s}))}function fd(r){return d.ok(d.fetchJson("/me/player/queue",{...r}))}function pd(r,{deviceId:t}={},n){return d.ok(d.fetchJson(`/me/player/queue${m.query(m.explode({uri:r,device_id:t}))}`,{...n,method:"POST"}))}function md(r){return d.ok(d.fetchJson("/markets",{...r}))}function hd({timeRange:r,limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/me/top/artists${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function bd({timeRange:r,limit:t,offset:n}={},s){return d.ok(d.fetchJson(`/me/top/tracks${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function gd(r,t){let n=r.replace(mo.server1,"");return d.ok(d.fetchJson(n,{...t}))}var Vo=te(require("node:http"),1),Jo=te(require("node:https"),1),mt=te(require("node:zlib"),1),Se=te(require("node:stream"),1),hr=require("node:buffer");function yd(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,t).split(";"),s="",o=!1,c=n[0]||"text/plain",l=c;for(let g=1;g<n.length;g++)n[g]==="base64"?o=!0:n[g]&&(l+=`;${n[g]}`,n[g].indexOf("charset=")===0&&(s=n[g].substring(8)));!n[0]&&!s.length&&(l+=";charset=US-ASCII",s="US-ASCII");let h=o?"base64":"ascii",p=unescape(r.substring(t+1)),b=Buffer.from(p,h);return b.type=c,b.typeFull=l,b.charset=s,b}var ho=yd;var ke=te(require("node:stream"),1),Fe=require("node:util"),ge=require("node:buffer");ur();ln();var We=class extends Error{constructor(t,n){super(t),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var fe=class extends We{constructor(t,n,s){super(t,n),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var dn=Symbol.toStringTag,Oa=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[dn]==="URLSearchParams",dr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[dn]),Eo=r=>typeof r=="object"&&(r[dn]==="AbortSignal"||r[dn]==="EventTarget"),Ro=(r,t)=>{let n=new URL(t).hostname,s=new URL(r).hostname;return n===s||n.endsWith(`.${s}`)},To=(r,t)=>{let n=new URL(t).protocol,s=new URL(r).protocol;return n===s};var Cd=(0,Fe.promisify)(ke.default.pipeline),pe=Symbol("Body internals"),Me=class{constructor(t,{size:n=0}={}){let s=null;t===null?t=null:Oa(t)?t=ge.Buffer.from(t.toString()):dr(t)||ge.Buffer.isBuffer(t)||(Fe.types.isAnyArrayBuffer(t)?t=ge.Buffer.from(t):ArrayBuffer.isView(t)?t=ge.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ke.default||(t instanceof dt?(t=ko(t),s=t.type.split("=")[1]):t=ge.Buffer.from(String(t))));let o=t;ge.Buffer.isBuffer(t)?o=ke.default.Readable.from(t):dr(t)&&(o=ke.default.Readable.from(t.stream())),this[pe]={body:t,stream:o,boundary:s,disturbed:!1,error:null},this.size=n,t instanceof ke.default&&t.on("error",c=>{let l=c instanceof We?c:new fe(`Invalid response body while trying to fetch ${this.url}: ${c.message}`,"system",c);this[pe].error=l})}get body(){return this[pe].stream}get bodyUsed(){return this[pe].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:n,byteLength:s}=await Ra(this);return t.slice(n,n+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new dt,o=new URLSearchParams(await this.text());for(let[c,l]of o)s.append(c,l);return s}let{toFormData:n}=await Promise.resolve().then(()=>(vo(),jo));return n(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[pe].body&&this[pe].body.type||"",n=await this.arrayBuffer();return new Be([n],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Ra(this);return new TextDecoder().decode(t)}buffer(){return Ra(this)}};Me.prototype.buffer=(0,Fe.deprecate)(Me.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Me.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Fe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Ra(r){if(r[pe].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[pe].disturbed=!0,r[pe].error)throw r[pe].error;let{body:t}=r;if(t===null)return ge.Buffer.alloc(0);if(!(t instanceof ke.default))return ge.Buffer.alloc(0);let n=[],s=0;try{for await(let o of t){if(r.size>0&&s+o.length>r.size){let c=new fe(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(c),c}s+=o.length,n.push(o)}}catch(o){throw o instanceof We?o:new fe(`Invalid response body while trying to fetch ${r.url}: ${o.message}`,"system",o)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return n.every(o=>typeof o=="string")?ge.Buffer.from(n.join("")):ge.Buffer.concat(n,s)}catch(o){throw new fe(`Could not create Buffer from response body for ${r.url}: ${o.message}`,"system",o)}else throw new fe(`Premature close of server response while trying to fetch ${r.url}`)}var Ut=(r,t)=>{let n,s,{body:o}=r[pe];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof ke.default&&typeof o.getBoundary!="function"&&(n=new ke.PassThrough({highWaterMark:t}),s=new ke.PassThrough({highWaterMark:t}),o.pipe(n),o.pipe(s),r[pe].stream=n,o=s),o},Id=(0,Fe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),hn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Oa(r)?"application/x-www-form-urlencoded;charset=UTF-8":dr(r)?r.type||null:ge.Buffer.isBuffer(r)||Fe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof dt?`multipart/form-data; boundary=${t[pe].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Id(r)}`:r instanceof ke.default?null:"text/plain;charset=UTF-8",Ao=r=>{let{body:t}=r[pe];return t===null?0:dr(t)?t.size:ge.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Co=async(r,{body:t})=>{t===null?r.end():await Cd(t,r)};var Ta=require("node:util"),pr=te(require("node:http"),1),bn=typeof pr.default.validateHeaderName=="function"?pr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},xa=typeof pr.default.validateHeaderValue=="function"?pr.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},ye=class r extends URLSearchParams{constructor(t){let n=[];if(t instanceof r){let s=t.raw();for(let[o,c]of Object.entries(s))n.push(...c.map(l=>[o,l]))}else if(t!=null)if(typeof t=="object"&&!Ta.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)n.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");n=[...t].map(o=>{if(typeof o!="object"||Ta.types.isBoxedPrimitive(o))throw new TypeError("Each header pair must be an iterable object");return[...o]}).map(o=>{if(o.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...o]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([s,o])=>(bn(s),xa(s,String(o)),[String(s).toLowerCase(),String(o)])):void 0,super(n),new Proxy(this,{get(s,o,c){switch(o){case"append":case"set":return(l,h)=>(bn(l),xa(l,String(h)),URLSearchParams.prototype[o].call(s,String(l).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return l=>(bn(l),URLSearchParams.prototype[o].call(s,String(l).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,o,c)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let n=this.getAll(t);if(n.length===0)return null;let s=n.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,n=void 0){for(let s of this.keys())Reflect.apply(t,n,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,n)=>(t[n]=this.getAll(n),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,n)=>{let s=this.getAll(n);return n==="host"?t[n]=s[0]:t[n]=s.length>1?s:s[0],t},{})}};Object.defineProperties(ye.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Io(r=[]){return new ye(r.reduce((t,n,s,o)=>(s%2===0&&t.push(o.slice(s,s+2)),t),[]).filter(([t,n])=>{try{return bn(t),xa(t,String(n)),!0}catch{return!1}}))}var Ud=new Set([301,302,303,307,308]),gn=r=>Ud.has(r);var ve=Symbol("Response internals"),Ee=class r extends Me{constructor(t=null,n={}){super(t,n);let s=n.status!=null?n.status:200,o=new ye(n.headers);if(t!==null&&!o.has("Content-Type")){let c=hn(t,this);c&&o.append("Content-Type",c)}this[ve]={type:"default",url:n.url,status:s,statusText:n.statusText||"",headers:o,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[ve].type}get url(){return this[ve].url||""}get status(){return this[ve].status}get ok(){return this[ve].status>=200&&this[ve].status<300}get redirected(){return this[ve].counter>0}get statusText(){return this[ve].statusText}get headers(){return this[ve].headers}get highWaterMark(){return this[ve].highWaterMark}clone(){return new r(Ut(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,n=302){if(!gn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(t).toString()},status:n})}static error(){let t=new r(null,{status:0,statusText:""});return t[ve].type="error",t}static json(t=void 0,n={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let o=new ye(n&&n.headers);return o.has("content-type")||o.set("content-type","application/json"),new r(s,{...n,headers:o})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Ee.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Fo=require("node:url"),No=require("node:util");var Uo=r=>{if(r.search)return r.search;let t=r.href.length-1,n=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-n.length]==="?"?"?":""};var Mo=require("node:net");function qo(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var zo=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Lo="strict-origin-when-cross-origin";function Do(r){if(!zo.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function qd(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),n=(0,Mo.isIP)(t);return n===4&&/^127\./.test(t)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function qt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:qd(r)}function Bo(r,{referrerURLCallback:t,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let o=r.referrer,c=qo(o),l=qo(o,!0);c.toString().length>4096&&(c=l),t&&(c=t(c)),n&&(l=n(l));let h=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return c;case"strict-origin":return qt(c)&&!qt(h)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return c.origin===h.origin?c:qt(c)&&!qt(h)?"no-referrer":l;case"same-origin":return c.origin===h.origin?c:"no-referrer";case"origin-when-cross-origin":return c.origin===h.origin?c:l;case"no-referrer-when-downgrade":return qt(c)&&!qt(h)?"no-referrer":c;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Wo(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let s of t)s&&zo.has(s)&&(n=s);return n}var Z=Symbol("Request internals"),mr=r=>typeof r=="object"&&typeof r[Z]=="object",Md=(0,No.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),pt=class r extends Me{constructor(t,n={}){let s;if(mr(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let o=n.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(o)&&(o=o.toUpperCase()),!mr(n)&&"data"in n&&Md(),(n.body!=null||mr(t)&&t.body!==null)&&(o==="GET"||o==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let c=n.body?n.body:mr(t)&&t.body!==null?Ut(t):null;super(c,{size:n.size||t.size||0});let l=new ye(n.headers||t.headers||{});if(c!==null&&!l.has("Content-Type")){let b=hn(c,this);b&&l.set("Content-Type",b)}let h=mr(t)?t.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!Eo(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?t.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let b=new URL(p);p=/^about:(\/\/)?client$/.test(b)?"client":b}else p=void 0;this[Z]={method:o,redirect:n.redirect||t.redirect||"follow",headers:l,parsedURL:s,signal:h,referrer:p},this.follow=n.follow===void 0?t.follow===void 0?20:t.follow:n.follow,this.compress=n.compress===void 0?t.compress===void 0?!0:t.compress:n.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent,this.highWaterMark=n.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||t.referrerPolicy||""}get method(){return this[Z].method}get url(){return(0,Fo.format)(this[Z].parsedURL)}get headers(){return this[Z].headers}get redirect(){return this[Z].redirect}get signal(){return this[Z].signal}get referrer(){if(this[Z].referrer==="no-referrer")return"";if(this[Z].referrer==="client")return"about:client";if(this[Z].referrer)return this[Z].referrer.toString()}get referrerPolicy(){return this[Z].referrerPolicy}set referrerPolicy(t){this[Z].referrerPolicy=Do(t)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(pt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Qo=r=>{let{parsedURL:t}=r[Z],n=new ye(r[Z].headers);n.has("Accept")||n.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let h=Ao(r);typeof h=="number"&&!Number.isNaN(h)&&(s=String(h))}s&&n.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=Lo),r.referrer&&r.referrer!=="no-referrer"?r[Z].referrer=Bo(r):r[Z].referrer="no-referrer",r[Z].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=r;typeof o=="function"&&(o=o(t));let c=Uo(t),l={path:t.pathname+c,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:o};return{parsedURL:t,options:l}};var yn=class extends We{constructor(t,n="aborted"){super(t,n)}};ln();ka();var zd=new Set(["data:","http:","https:"]);async function Sn(r,t){return new Promise((n,s)=>{let o=new pt(r,t),{parsedURL:c,options:l}=Qo(o);if(!zd.has(c.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if(c.protocol==="data:"){let w=ho(o.url),E=new Ee(w,{headers:{"Content-Type":w.typeFull}});n(E);return}let h=(c.protocol==="https:"?Jo.default:Vo.default).request,{signal:p}=o,b=null,g=()=>{let w=new yn("The operation was aborted.");s(w),o.body&&o.body instanceof Se.default.Readable&&o.body.destroy(w),!(!b||!b.body)&&b.body.emit("error",w)};if(p&&p.aborted){g();return}let _=()=>{g(),O()},k=h(c.toString(),l);p&&p.addEventListener("abort",_);let O=()=>{k.abort(),p&&p.removeEventListener("abort",_)};k.on("error",w=>{s(new fe(`request to ${o.url} failed, reason: ${w.message}`,"system",w)),O()}),Ld(k,w=>{b&&b.body&&b.body.destroy(w)}),process.version<"v14"&&k.on("socket",w=>{let E;w.prependListener("end",()=>{E=w._eventsCount}),w.prependListener("close",$=>{if(b&&E<w._eventsCount&&!$){let P=new Error("Premature close");P.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",P)}})}),k.on("response",w=>{k.setTimeout(0);let E=Io(w.rawHeaders);if(gn(w.statusCode)){let T=E.get("Location"),z=null;try{z=T===null?null:new URL(T,o.url)}catch{if(o.redirect!=="manual"){s(new fe(`uri requested responds with an invalid redirect URL: ${T}`,"invalid-redirect")),O();return}}switch(o.redirect){case"error":s(new fe(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),O();return;case"manual":break;case"follow":{if(z===null)break;if(o.counter>=o.follow){s(new fe(`maximum redirect reached at: ${o.url}`,"max-redirect")),O();return}let C={headers:new ye(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:Ut(o),signal:o.signal,size:o.size,referrer:o.referrer,referrerPolicy:o.referrerPolicy};if(!Ro(o.url,z)||!To(o.url,z))for(let ee of["authorization","www-authenticate","cookie","cookie2"])C.headers.delete(ee);if(w.statusCode!==303&&o.body&&t.body instanceof Se.default.Readable){s(new fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),O();return}(w.statusCode===303||(w.statusCode===301||w.statusCode===302)&&o.method==="POST")&&(C.method="GET",C.body=void 0,C.headers.delete("content-length"));let se=Wo(E);se&&(C.referrerPolicy=se),n(Sn(new pt(z,C))),O();return}default:return s(new TypeError(`Redirect option '${o.redirect}' is not a valid value of RequestRedirect`))}}p&&w.once("end",()=>{p.removeEventListener("abort",_)});let $=(0,Se.pipeline)(w,new Se.PassThrough,T=>{T&&s(T)});process.version<"v12.10"&&w.on("aborted",_);let P={url:o.url,status:w.statusCode,statusText:w.statusMessage,headers:E,size:o.size,counter:o.counter,highWaterMark:o.highWaterMark},W=E.get("Content-Encoding");if(!o.compress||o.method==="HEAD"||W===null||w.statusCode===204||w.statusCode===304){b=new Ee($,P),n(b);return}let F={flush:mt.default.Z_SYNC_FLUSH,finishFlush:mt.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){$=(0,Se.pipeline)($,mt.default.createGunzip(F),T=>{T&&s(T)}),b=new Ee($,P),n(b);return}if(W==="deflate"||W==="x-deflate"){let T=(0,Se.pipeline)(w,new Se.PassThrough,z=>{z&&s(z)});T.once("data",z=>{(z[0]&15)===8?$=(0,Se.pipeline)($,mt.default.createInflate(),C=>{C&&s(C)}):$=(0,Se.pipeline)($,mt.default.createInflateRaw(),C=>{C&&s(C)}),b=new Ee($,P),n(b)}),T.once("end",()=>{b||(b=new Ee($,P),n(b))});return}if(W==="br"){$=(0,Se.pipeline)($,mt.default.createBrotliDecompress(),T=>{T&&s(T)}),b=new Ee($,P),n(b);return}b=new Ee($,P),n(b)}),Co(k,o).catch(s)})}function Ld(r,t){let n=hr.Buffer.from(`0\r
\r
`),s=!1,o=!1,c;r.on("response",l=>{let{headers:h}=l;s=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",l=>{let h=()=>{if(s&&!o){let b=new Error("Premature close");b.code="ERR_STREAM_PREMATURE_CLOSE",t(b)}},p=b=>{o=hr.Buffer.compare(b.slice(-5),n)===0,!o&&c&&(o=hr.Buffer.compare(c.slice(-3),n.slice(0,3))===0&&hr.Buffer.compare(b.slice(-2),n.slice(3))===0),c=b};l.prependListener("close",h),l.on("data",p),r.on("close",()=>{l.removeListener("close",h),l.removeListener("data",p)})})}var $a;ma.onAuthorize=({token:r})=>{cr.headers={Authorization:`Bearer ${r}`},cr.fetch=Sn,$a=ga};var Ho=ao(ma);function B(){if(!$a)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:$a}}async function Go(r,t){let{spotifyClient:n}=B();try{return(await n.search(r,["track"],{limit:t})).tracks}catch(s){let o=v(s);throw console.log("searchTracks.ts Error:",o),new Error(o)}}var Ko=require("react");var Yo=require("@raycast/api"),wn=!1;async function _n(){return wn=!!(await(0,Yo.getApplications)()).find(n=>n.bundleId==="com.spotify.client"),wn}var Zo=Ho(({children:r})=>((0,Ko.useEffect)(()=>{_n()},[]),r));var xi=require("@raycast/api");function Xo(r){let t=Math.floor(r/36e5),n=Math.floor(r%36e5/6e4),s=Math.floor(r%6e4/1e3);return`${t>0?`${Pa(t)}:`:""}${Pa(n)}:${Pa(s)}`}var Pa=r=>String(r).padStart(2,"0");var Lt=require("@raycast/api");var ai=require("@raycast/api");async function ei({albumId:r,limit:t}){let{spotifyClient:n}=B();try{return await n.getAlbumsByIdTracks(r,{limit:t})}catch(s){let o=v(s);throw console.log("getAlbumTracks.ts Error:",o),new Error(o)}}function ti({albumId:r="",limit:t=50,options:n}){let{data:s,error:o,isLoading:c}=Ie((l,h)=>ei({albumId:l,limit:h}),[r,t],{execute:n?.execute!==!1&&!!r&&!!t});return{albumTracksData:s,albumTracksError:o,albumTracksIsLoading:c}}async function ri(r,t,n){let{spotifyClient:s}=B();try{return{items:((await s.getPlaylistsByPlaylistIdTracks(r,{limit:t,...n!==void 0&&{offset:n}}))?.items??[]).map(l=>({...l.track||{}}))}}catch(o){let c=v(o);throw console.log("getPlaylistTracks.ts Error:",c),new Error(c)}}function ni({playlistId:r="",limit:t=50,options:n}){let{data:s,error:o,isLoading:c}=Ie((l,h)=>ri(l,h),[r,t],{execute:n?.execute!==!1&&!!r&&!!t});return{playlistTracksData:s,playlistTracksError:o,playlistTracksIsLoading:c}}var ja=require("react/jsx-runtime");function si({album:r,playlist:t,tracks:n,showGoToAlbum:s}){let{albumTracksData:o,albumTracksIsLoading:c}=ti({albumId:r?.id,options:{execute:!!r}}),{playlistTracksData:l,playlistTracksIsLoading:h}=ni({playlistId:t?.id,options:{execute:!!t}}),p=o?.items||l?.items||n;return(0,ja.jsx)(ai.List,{searchBarPlaceholder:"Search songs",isLoading:c||h,children:p&&p.map((b,g)=>(0,ja.jsx)(br,{playingContext:r?.uri||t?.uri,track:b,album:r||b.album,showGoToAlbum:s},`${b.id}${g}`))})}async function oi({limit:r=50}={}){let{spotifyClient:t}=B(),n=null,s=null;try{for(n=await t.getMePlaylists({limit:r}),s=n?.next;s;){let o=await t.getNext(s);n={...n,...o,items:[...n?.items??[],...o.items??[]]},s=o?.next}return n}catch(o){let c=v(o);throw console.log("getMyPlaylists.ts Error:",c),new Error(c)}}function ii({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:o}=Ie(()=>oi(),[],{execute:r?.execute!==!1});return{myPlaylistsData:t,myPlaylistsError:n,myPlaylistsIsLoading:s,myPlaylistsRevalidate:o}}async function ci(){let{spotifyClient:r}=B();try{return await r.getMe()}catch(t){let n=v(t);throw console.log("getMe.ts Error:",n),new Error(n)}}function ui({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:o}=Ie(()=>ci(),[],{execute:r?.execute!==!1});return{meData:t,meError:n,meIsLoading:s,meRevalidate:o}}var ne=require("@raycast/api");async function On({playlistId:r,trackUris:t}){let{spotifyClient:n}=B();try{return await n.postPlaylistsByPlaylistIdTracks(r,{uris:t})}catch(s){let o=v(s);throw console.log("addToPlaylist.ts Error:",o),new Error(o)}}var va=require("react/jsx-runtime");function li({playlists:r,meData:t,uri:n}){let{closeWindowOnAction:s}=(0,ne.getPreferenceValues)();return(0,va.jsx)(ne.ActionPanel.Submenu,{icon:ne.Icon.List,title:"Add to Playlist",children:r?.filter(o=>o.owner?.id===t?.id).map(o=>(0,va.jsx)(ne.Action,{title:o.name,onAction:async()=>{try{if(await On({playlistId:o.id,trackUris:[n]}),s){await(0,ne.showHUD)(`Added to ${o.name}`),await(0,ne.popToRoot)();return}await(0,ne.showToast)({title:`Added to ${o.name}`})}catch(c){let l=ut(c);await(0,ne.showToast)({title:"Error adding song to playlist",message:l.message,style:ne.Toast.Style.Failure})}}},o.id))})}var ze=require("@raycast/api");var ht=require("react/jsx-runtime");function di({url:r,uri:t,title:n}){return(0,ht.jsxs)(ze.ActionPanel.Section,{children:[(0,ht.jsx)(ze.Action.CopyToClipboard,{icon:ze.Icon.Link,title:"Copy URL",shortcut:{modifiers:["cmd","shift"],key:"c"},content:{html:`<a href="${r}" title="${n}">${n}</a>`,text:r}}),(0,ht.jsx)(ze.Action.CopyToClipboard,{icon:ze.Icon.CopyClipboard,title:"Copy Artist and Title",shortcut:{modifiers:["cmd","shift"],key:"t"},content:n}),wn?(0,ht.jsx)(ze.Action.Open,{icon:"spotify-icon.svg",title:"Open on Spotify",shortcut:{modifiers:["cmd"],key:"o"},target:t||"spotify"}):(0,ht.jsx)(ze.Action.OpenInBrowser,{title:"Open on Spotify Web",shortcut:{modifiers:["cmd"],key:"o"},url:r||"https://play.spotify.com"})]})}var ce=require("@raycast/api");async function Mt({uri:r}){let{spotifyClient:t}=B();try{return await t.postMePlayerQueue(r)}catch(n){let s=v(n);throw console.log("addToQueue.ts Error:",s),new Error(s)}}var pi=require("react/jsx-runtime");function fi({uri:r,title:t}){let{closeWindowOnAction:n}=(0,ce.getPreferenceValues)();return(0,pi.jsx)(ce.Action,{icon:ce.Icon.Plus,title:"Add To Queue",shortcut:{modifiers:["opt"],key:"q"},onAction:async()=>{try{if(await Mt({uri:r}),n){await(0,ce.showHUD)("Added to queue"),await(0,ce.popToRoot)();return}(0,ce.showToast)({title:"Added to queue",message:t})}catch(s){let o=ut(s);(0,ce.showToast)({title:"Error adding song to queue",message:o.message,style:ce.Toast.Style.Failure})}}})}var X=require("@raycast/api");var mi=require("@raycast/api");function Xe(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}async function hi(r){await(0,mi.closeMainWindow)(),await Ke(r)}async function bi({trackIds:r,artistIds:t}){let{spotifyClient:n}=B();try{return await n.getRecommendations({seedTracks:r.join(),seedArtists:t?.join()})}catch(s){let o=v(s);throw console.log("getRecommendations.ts Error:",o),new Error(o)}}async function Aa({trackIds:r=[],artistIds:t=[]}={}){let{spotifyClient:n}=B();try{let o=(await bi({trackIds:r,artistIds:t}))?.tracks;if(o)try{await n.putMePlayerPlay({uris:o.flatMap(c=>c.uri)})}catch(c){let l=v(c);if(l?.toLocaleLowerCase().includes("no active device")||l?.toLocaleLowerCase().includes("restricted device")||l?.toLocaleLowerCase().includes("premium required")){let h=Xe(`play track "${o[0].uri}"`);await hi(h)}}}catch(s){let o=v(s);throw console.log("startRadio.ts Error:",o),new Error(o)}}var yi=require("react/jsx-runtime");function gi({trackId:r,artistId:t,onRadioStarted:n}){let{closeWindowOnAction:s}=(0,X.getPreferenceValues)();return(0,yi.jsx)(X.Action,{icon:X.Icon.Music,title:"Start Radio",onAction:async()=>{if(s)try{await Aa({trackIds:r?[r]:void 0,artistIds:t?[t]:void 0}),await(0,X.showHUD)("Playing Radio"),await(0,X.popToRoot)();return}catch(c){let l=ut(c);await(0,X.showHUD)(l.message)}let o=await(0,X.showToast)({title:"Starting Radio...",style:X.Toast.Style.Animated});try{await Aa({trackIds:r?[r]:void 0,artistIds:t?[t]:void 0}),n||(o.title="Playing radio",o.style=X.Toast.Style.Success),n&&setTimeout(()=>{n(),o.title="Playing Radio",o.style=X.Toast.Style.Success},300)}catch(c){let l=ut(c);o.title="Error Starting Radio",o.message=l.message,o.style=X.Toast.Style.Failure}}})}var K=require("@raycast/api");async function Si(){let{spotifyClient:r}=B();try{return await r.getMePlayerDevices()}catch(t){let n=v(t);throw console.log("getMyDevices.ts Error:",n),new Error(n)}}var zt={album:"spotify:album:",artist:"spotify:artist:",playlist:"spotify:playlist:",track:"spotify:track:",show:"spotify:show:",episode:"spotify:episode:"};async function gr({id:r,type:t,contextUri:n}={}){let{spotifyClient:s}=B(),{devices:o}=await Si(),c=await _n();try{let l=o?.find(p=>p.is_active);if(!l&&c){await wi({id:r,type:t});return}let h=l?.id??o?.[0]?.id??void 0;!t||!r?await s.putMePlayerPlay({context_uri:n},{deviceId:h}):t==="track"?n?await s.putMePlayerPlay({context_uri:n,offset:{uri:`${zt.track}${r}`}},{deviceId:h}):await s.putMePlayerPlay({uris:[`${zt.track}${r}`]},{deviceId:h}):t==="episode"?await s.putMePlayerPlay({uris:[`${zt.episode}${r}`]},{deviceId:h}):await s.putMePlayerPlay({context_uri:`${zt[t]}${r}`},{deviceId:h})}catch(l){let h=v(l);if(c&&(h?.toLocaleLowerCase().includes("no device found")||h?.toLocaleLowerCase().includes("no active device")||h?.toLocaleLowerCase().includes("restricted device")||h?.toLocaleLowerCase().includes("premium required"))){await wi({id:r,type:t});return}throw new Error(h)}}async function wi({id:r,type:t}){try{if(!t||!r){let n=Xe("play");await Ke(n)}else if(t==="track"){let n=Xe(`play track "${zt[t]}${r}"`);await Ke(n)}else{let n=Xe(`
        delay 1
        play track "${zt[t]}${r}"`);await Ke(n)}}catch(n){let s=v(n);throw new Error(s)}}var Oi=require("react/jsx-runtime");function _i({id:r,type:t,playingContext:n,onPlay:s,tracksToQueue:o}){let{closeWindowOnAction:c}=(0,K.getPreferenceValues)(),l=async()=>{try{if(await gr({id:r,type:t,contextUri:n}),c)await(0,K.showHUD)("Playing"),await(0,K.popToRoot)();else{let h=await(0,K.showToast)({title:"Playing...",style:K.Toast.Style.Animated});s&&s(),h.title="Playing",h.style=K.Toast.Style.Success}if(o)for(let h of o)await Mt({uri:h.uri})}catch(h){let p=v(h);c?(await(0,K.showHUD)("Failed to play"),await(0,K.popToRoot)()):await Ct(h,{title:p.toLowerCase().includes("no active device")?"No active device":"Failed to play",primaryAction:{title:"Copy Error",shortcut:{modifiers:["cmd"],key:"t"},onAction:async()=>{await K.Clipboard.copy(p)}}})}};return(0,Oi.jsx)(K.Action,{icon:K.Icon.Play,title:"Play",onAction:l})}var J=require("@raycast/api");async function Ca({trackIds:r}){let{spotifyClient:t}=B();try{return await t.putMeTracks(r.join())}catch(n){let s=v(n);throw console.log("addToMySavedTracks.ts Error:",s),new Error(s)}}async function ki({trackIds:r}){let{spotifyClient:t}=B();try{return await t.getMeTracksContains(r.join())}catch(n){let s=v(n);throw console.log("containsMySavedTracks.ts Error:",s),new Error(s)}}function Ei({trackIds:r,options:t}){let{data:n,error:s,isLoading:o,revalidate:c}=Ie(l=>ki({trackIds:l}),[r],{execute:t?.execute!==!1&&r.length>0});return{containsMySavedTracksData:n,containsMySavedTracksError:s,containsMySavedTracksIsLoading:o,containsMySavedTracksRevalidate:c}}async function Ia({trackIds:r}){let{spotifyClient:t}=B();try{return await t.deleteMeTracks(r.join())}catch(n){let s=v(n);throw console.log("removeFromMySavedTracks.ts Error:",s),new Error(s)}}var bt=require("react/jsx-runtime");function Ri({trackId:r}){let{closeWindowOnAction:t}=(0,J.getPreferenceValues)(),{containsMySavedTracksData:n,containsMySavedTracksRevalidate:s}=Ei({trackIds:r?[r]:[]}),o=n?.[0];return(0,bt.jsxs)(bt.Fragment,{children:[o&&(0,bt.jsx)(J.Action,{icon:J.Icon.HeartDisabled,title:"Dislike",onAction:async()=>{if(t)try{await Ia({trackIds:r?[r]:[]}),await(0,J.showHUD)("Disliked"),await(0,J.popToRoot)();return}catch(l){let h=v(l);await(0,J.showHUD)(h)}let c=await(0,J.showToast)({title:"Disliking...",style:J.Toast.Style.Animated});try{await Ia({trackIds:r?[r]:[]}),await s(),c.title="Disliked",c.style=J.Toast.Style.Success}catch(l){let h=v(l);c.style=J.Toast.Style.Failure,c.title="Something went wrong",c.message=h}}}),!o&&(0,bt.jsx)(J.Action,{icon:J.Icon.Heart,title:"Like",onAction:async()=>{if(t)try{await Ca({trackIds:r?[r]:[]}),await(0,J.showHUD)("Liked"),await(0,J.popToRoot)();return}catch(l){let h=v(l);await(0,J.showHUD)(h)}let c=await(0,J.showToast)({title:"Liking...",style:J.Toast.Style.Animated});try{await Ca({trackIds:r?[r]:[]}),await s(),c.title="Liked",c.style=J.Toast.Style.Success}catch(l){let h=v(l);c.style=J.Toast.Style.Failure,c.title="Something went wrong",c.message=h}}})]})}var Ae=require("react/jsx-runtime");function Ti({title:r,track:t,album:n,showAddToSaved:s,showGoToAlbum:o,playingContext:c,tracksToQueue:l}){let{myPlaylistsData:h}=ii(),{meData:p}=ui();return(0,Ae.jsxs)(Lt.ActionPanel,{children:[(0,Ae.jsx)(_i,{id:t.id,type:"track",playingContext:c,tracksToQueue:l}),n&&o&&(0,Ae.jsx)(Lt.Action.Push,{icon:Lt.Icon.AppWindowList,title:"Go to Album",target:(0,Ae.jsx)(si,{album:n,showGoToAlbum:!1})}),(0,Ae.jsx)(gi,{trackId:t.id}),s&&(0,Ae.jsx)(Ri,{trackId:t.id}),t.uri&&(0,Ae.jsx)(fi,{uri:t.uri,title:r}),h?.items&&p&&t.uri&&(0,Ae.jsx)(li,{playlists:h.items,meData:p,uri:t.uri}),(0,Ae.jsx)(di,{url:t?.external_urls?.spotify,uri:t.uri,title:r})]})}var Ua=require("react/jsx-runtime");function br({track:r,album:t,showAddToSaved:n,showGoToAlbum:s,playingContext:o,tracksToQueue:c}){let l=r.name||"",h=r?.artists?.map(b=>b.name).join(", "),p;return t?.images&&(p={source:t.images[t.images.length-1]?.url}),(0,Ua.jsx)(xi.List.Item,{icon:p,title:l,subtitle:h,accessories:[{text:r.duration_ms?Xo(r.duration_ms):void 0}],actions:(0,Ua.jsx)(Ti,{title:l,track:r,album:t,showAddToSaved:n,showGoToAlbum:s,playingContext:o,tracksToQueue:c})})}async function $i({name:r,description:t}){let{spotifyClient:n}=B();try{let o=(await n.getMe()).id;if(o)return await n.postUsersByUserIdPlaylists(o,{name:r,description:t})}catch(s){let o=v(s);throw console.log("createPlaylist.ts Error:",o),new Error(o)}}async function Pi(){let{spotifyClient:r}=B();try{await r.postMePlayerNext()}catch(t){let n=v(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){let s=Xe("next track");await Ke(s);return}throw console.log("skipToNext.ts Error:",n),new Error(n)}}var ue=require("react/jsx-runtime");function ji(r){let{data:t,isLoading:n}=la(async()=>{let h=(await N.AI.ask(`Generate a playlist of 20 to 50 songs based on this description: "${r.arguments.description}". IMPORTANT: If the description contains a list of artist names (e.g., "songs from artist1, artist2, artist3, artist4, artist5"), ONLY include songs from those specific artists. Do not include any songs from artists not mentioned in the description. Ensure the songs transition smoothly between each other. Return me only a parsable and minified JSON object with the following structure:

{
  "name": <Playlist name>,
  "description": <Playlist description>,
  "tracks": [
    {
      "title": <Song title>,
      "artist": <Song's artist>
    },
    ...
  ]
}`,{model:N.AI.Model["OpenAI_GPT4o-mini"]})).match(/[{\\[]{1}([,:{}\\[\]0-9.\-+Eaeflnr-u \n\r\t]|".*?")+[}\]]{1}/gis)?.[0];if(!h)throw new Error("Invalid result returned from AI");let p=JSON.parse(h),b=await Promise.all(p.tracks.map(async g=>{try{let k=(await Go(`track:${g.title} artist:${g.artist}`,1))?.items?.[0];if(k)return k}catch(_){return console.error(_),null}}));return{name:p.name,description:p.description,tracks:b}},[],{failureToastOptions:{title:"Could not generate playlist",message:"Please try again."}});async function s(){if(t)try{await(0,N.showToast)({style:N.Toast.Style.Animated,title:"Adding playlist to Spotify"});let l=await $i({name:t.name,description:t.description});if(l?.id){let h=c?.map(p=>p?.uri).filter(Boolean)??[];await On({playlistId:l.id,trackUris:h}),await(0,N.showToast)({style:N.Toast.Style.Success,title:"Added playlist to Spotify",message:`"${t.name}" has been added to your Spotify Library`,primaryAction:{title:`Play "${t.name}"`,onAction:async()=>{await gr({id:l.id,type:"playlist",contextUri:l.uri})}}})}}catch(l){await Ct(l,{title:"Could not add playlist to Spotify"})}}async function o(){if(t)try{await(0,N.showToast)({style:N.Toast.Style.Animated,title:"Adding songs to queue"});for(let l of c??[])!l||!l.uri||await Mt({uri:l?.uri});await(0,N.showToast)({style:N.Toast.Style.Success,title:"Added songs to queue",primaryAction:{title:"Play Next Song in Queue",onAction:async()=>{await Pi(),await gr()}}})}catch(l){await Ct(l,{title:"Could not add songs to queue"})}}let c=[...new Set(t?.tracks)];return(0,ue.jsx)(Zo,{children:(0,ue.jsxs)(N.List,{isLoading:n,searchBarPlaceholder:c&&c.length>0?"Search songs":"Generating playlist\u2026",children:[c&&c.length>0?(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(N.List.Item,{icon:N.Icon.Stars,title:"Add Playlist to Spotify",actions:(0,ue.jsx)(N.ActionPanel,{children:(0,ue.jsx)(N.Action,{title:"Add to Spotify",onAction:s})})}),(0,ue.jsx)(N.List.Item,{icon:N.Icon.BulletPoints,title:"Add Songs to Queue",actions:(0,ue.jsx)(N.ActionPanel,{children:(0,ue.jsx)(N.Action,{title:"Add Songs",onAction:o})})})]}):null,(0,ue.jsx)(N.List.Section,{title:t?.name,children:c?.map(l=>l?(0,ue.jsx)(br,{track:l,album:l.album,showGoToAlbum:!0},l.id):null)})]})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
