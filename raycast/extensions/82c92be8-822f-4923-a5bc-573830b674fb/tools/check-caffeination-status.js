"use strict";var f=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var I=(e,t)=>{for(var n in t)f(e,n,{get:t[n],enumerable:!0})},v=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of C(t))!x.call(e,r)&&r!==n&&f(e,r,{get:()=>t[r],enumerable:!(i=h(t,r))||i.enumerable});return e};var k=e=>v(f({},"__esModule",{value:!0}),e);var T={};I(T,{default:()=>O});module.exports=k(T);var D=require("node:child_process");var o=require("@raycast/api");var a=require("@raycast/api"),u=require("node:child_process");async function g(e,t,n){t&&await(0,a.showHUD)(t),await c({menubar:!1,status:!1}),(0,u.exec)(`/usr/bin/caffeinate ${M(n)} || true`),await m(e,!0)}async function c(e,t){t&&await(0,a.showHUD)(t),(0,u.execSync)("/usr/bin/killall caffeinate || true"),await m(e,!1)}async function m(e,t){e.menubar&&await p("index",{caffeinated:t}),e.status&&await p("status",{caffeinated:t})}async function p(e,t){try{await(0,a.launchCommand)({name:e,type:a.LaunchType.Background,context:t})}catch{}}function M(e){let t=(0,a.getPreferenceValues)(),n=[];return t.preventDisplay&&n.push("d"),t.preventDisk&&n.push("m"),t.preventSystem&&n.push("i"),e&&n.push(` ${e}`),n.length>0?`-${n.join("")}`:""}function R(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}async function S(){let t=R(new Date().getDay()).toLowerCase(),n=await a.LocalStorage.getItem(t);return n===void 0?void 0:JSON.parse(n)}async function N(e){if(!e||Object.keys(e).length===0)return!1;let t=new Date,[n,i]=e.from.split(":").map(Number),[r,l]=e.to.split(":").map(Number),s=t.getHours(),d=t.getMinutes(),y=(s>n||s===n&&d>=i)&&(s<r||s===r&&d<l);if(y===!1&&e.IsRunning===!0)return e.IsRunning=!1,await c({menubar:!0,status:!0}),await o.LocalStorage.setItem(e.day,JSON.stringify(e)),!1;if(y===!0&&e.IsRunning===!1){let w=(r-n)*3600+(l-i)*60;return await g({menubar:!0,status:!0},void 0,`-t ${w}`),e.IsRunning=!0,await o.LocalStorage.setItem(e.day,JSON.stringify(e)),!0}return!1}async function b(){let e=await S();return e===void 0||e.IsManuallyDecafed?!1:await N(e)}async function O(){let e=L(),t=await b();return e||t?"Your Mac is currently caffeinated (sleep is prevented)":"Your Mac is not caffeinated (normal sleep settings apply)"}function L(){try{return(0,D.execSync)("pgrep caffeinate"),!0}catch{return!1}}
