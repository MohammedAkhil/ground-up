"use strict";var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var S=(t,e)=>{for(var a in e)u(t,a,{get:e[a],enumerable:!0})},b=(t,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of p(e))!m.call(t,r)&&r!==a&&u(t,r,{get:()=>e[r],enumerable:!(i=g(e,r))||i.enumerable});return t};var D=t=>b(u({},"__esModule",{value:!0}),t);var I={};S(I,{default:()=>v});module.exports=D(I);var n=require("@raycast/api"),s=require("node:child_process");async function c(t,e,a){e&&await(0,n.showHUD)(e),await w({menubar:!1,status:!1}),(0,s.exec)(`/usr/bin/caffeinate ${h(a)} || true`),await f(t,!0)}async function w(t,e){e&&await(0,n.showHUD)(e),(0,s.execSync)("/usr/bin/killall caffeinate || true"),await f(t,!1)}async function f(t,e){t.menubar&&await o("index",{caffeinated:e}),t.status&&await o("status",{caffeinated:e})}async function o(t,e){try{await(0,n.launchCommand)({name:t,type:n.LaunchType.Background,context:e})}catch{}}function h(t){let e=(0,n.getPreferenceValues)(),a=[];return e.preventDisplay&&a.push("d"),e.preventDisk&&a.push("m"),e.preventSystem&&a.push("i"),t&&a.push(` ${t}`),a.length>0?`-${a.join("")}`:""}function l(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}async function y(){let e=l(new Date().getDay()).toLowerCase(),a=await n.LocalStorage.getItem(e);return a===void 0?void 0:JSON.parse(a)}async function d(t,e){switch(t){case"caffeinate":{e.IsManuallyDecafed=!1,e.IsRunning=!1,await n.LocalStorage.setItem(e.day,JSON.stringify(e));break}case"decaffeinate":{(e.IsRunning===!0||x(e))&&(e.IsManuallyDecafed=!0,e.IsRunning=!1,await n.LocalStorage.setItem(e.day,JSON.stringify(e)));break}default:break}}function x(t){let a=l(new Date().getDay()).toLowerCase();return t.day!==a}var v=async()=>{let t=await y();t!=null&&await d("decaffeinate",t),await c({menubar:!0,status:!0},"Your Mac is now caffeinated")};
